% 集合的极限
% keys 集合|极限|特征函数|并集|交集|上极限|下极限
% license Xiao
% type Tutor

% \issueOther{定位不是很清晰，如果希望放在集合论/序论里，应当移除关于特征函数的部分；如果想放在分析了，应该放到数列的上下极限之后}


\pentry{集合\nref{nod_Set}，极限\nref{nod_Lim}}{nod_f3ce}

\subsection{特征函数}
如果我们有可数个集合构成的族 $\{A_n\}$，每个 $A_n$ 都是编了号的集合，那么对于给定的元素，我们可以观察它是否存在于各 $A_n$ 中。为了表达方便，我们用一个\textbf{特征函数}，$\mathcal{X}$，来表达属于关系：对于元素 $x$ 和集合 $A_n$，当 $x\in A_n$ 时 $\mathcal{X}_{A_n}(x)=1$；当 $x\not\in A_n$ 时 $\mathcal{X}_{A_n}(x)=0$。

有了特征函数，我们就可以套用数列的极限来讨论集合的极限。

\subsection{上极限和下极限}
给定一列编好了号的集合：$\{A_n\}$。为了方便之后的讨论，先定义两列集合：$U_k=\underset{i\ge k}{\bigcup}A_i$，$J_k=\underset{i\ge k}{\bigcap} A_i$。

这么取的两列集合有很棒的性质：对于任何正整数 $k$，$U_{k+1}\subseteq U_k$，而 $J_{k+1}\supseteq J_k$。如果说真子集时比原来的集合要小的话，我们可以认为 $U_k$ 是一个\textbf{单调不增}的集列，而 $J_k$\textbf{单调不减}。这么一来，对于任何元素 $x$，不管 $x$ 是一个数字，一种动物，还是一片凋落在安田讲堂\footnote{安田讲堂是东京大学的大厅。}前的银杏叶，它的特征函数 $\mathcal{X}_{U_n}(x)$\textbf{单调不增}，也就是说一旦某个 $U_n$ 不包含 $x$，那么任何 $m>n$ 的 $U_m$ 也不包含 $x$；同样地，$\mathcal{X}_{J_n}(x)$\textbf{单调不减}，也就是说也就是说一旦某个 $J_n$ 包含 $x$，那么任何 $m>n$ 的 $J_m$ 也包含 $x$。

单调函数都是必然有极限的，这么一来，任给元素 $x$，$\mathcal{X}_{U_n}(x)$ 和 $\mathcal{X}_{J_n}(x)$ 都有极限。那么我们可以定义 $U_n$ 和 $J_n$ 的极限如下：

\begin{definition}{上极限}\label{def_SetLim_1}
给定一列编好了号的集合：$\{A_n\}$，令 $U_k=\underset{i\ge k}{\bigcup} A_i$。定义 $\lim\limits_{k\to\infty} U_k=U$，其中 $U=\{x|\text{存在无穷多个正整数}n,\text{使}\mathcal{X}_{U_n}(x)=1\}$。称这个 $U$ 是集列 $\{A_n\}$ 的\textbf{上极限集合（upper limit set）}。
\end{definition}

简单来说，某元素 $x$ 在上极限 $U$ 中，当且仅当 $x$ 在\textbf{无穷多个}$A_n$ 中。

%Jier：注释原因：格式混乱且没有必要。上段的“简单来说”后面的句子，就是翻译了一下定义中的集合语言而已。
%\begin{corollary}{其实也没那么简单，证明如下：}
%假设$x\in\limsup A_{k}$。那么对于任意的$j$，都有$x\in\bigcup_{k\geqslant j}A_{k}$，即$x$至少属于从第$j$个集合开始的所有$A_{k}$的并集。由此可得，对于每个$j\geq1$，存在一个$k\geq j$，使得$x\in A_{k}$；因此，$x$属于无限多个$A_{k}$。该蕴含关系是可逆的，即如果$x$属于无限多个$A_{k}$，那么$x\in\limsup A_{k}$。
%\end{corollary}

类似地有：

\begin{definition}{下极限}
给定一列编好了号的集合：$\{A_n\}$，令 $J_k=\underset{i\ge k}{\bigcap} A_i$。定义 $\lim\limits_{k\to\infty} J_k=J$，其中 $J=\{x|\text{存在正整数}N\text{使得}\forall n>N, \mathcal{X}_{J_n}(x)=1\}$。称这个 $J$ 是集列 $\{A_n\}$ 的\textbf{下极限集合（lower limit set）}。
\end{definition}

简单来说，某元素 $x$ 在下极限 $J$ 中，当且仅当从集合序列的某一个（比如 $A_N$）开始，$x$ 在之后的\textbf{每一个}$A_n$ 中。也可以简单地说，只有有限个 $A_n$ 不包含 $x$。

%Jier：注释原因同上一条。
%\begin{corollary}{证明如下：}
%假设$x\in\liminf A_{k}$。那么对于某个$k$，有$x\in\bigcap_{k\geqslant j}A_{k}$，即$x$属于从某个$j$开始的所有$A_{k}$的交集。因此，对于某个$j\geq1$，$x\in A_{k}$对所有$k\geq j$都成立；由此可得，$x$属于从某个$k$开始的所有$A_{k}$。该蕴含关系同样是可逆的，即如果$x$属于从某个$k$开始的所有$A_{k}$，那么$x\in\liminf A_{k}$。
%\end{corollary}

如果从 $A_n$ 的视角来看的话，上极限 $U$ 中的元素是包含于无穷多个 $A_n$ 的。我们也可以记上极限为 $U=\underset{n\to \infty}{\overline{\lim}} A_n$。

下极限 $J$ 中的元素，从某个编号 $m$ 开始，包含于\textbf{每一个} $n>m$ 的 $A_n$。我们也可以记下极限为 $J=\underset{n\to \infty}{\underline{\lim}}A_n$。

由定义容易得到，下极限必是上极限的子集。

%Jier：注释原因同前。
%\begin{corollary}{为了证明：}
%\begin{equation}
%\liminf_{k\to\infty} A_k \subset \limsup_{k\to\infty} A_k~,
%\end{equation}
%我们需要证明对于任意的$x \in \liminf_{k\to\infty} A_k$，都有$x \in \limsup_{k\to\infty} A_k$。

%假设$x \in \liminf_{k\to\infty} A_k$，这意味着对于任意的正整数$n$，存在一个$N \geq n$，使得$x \in A_N$。

%现在，我们证明$x \in \limsup_{k\to\infty} A_k$。由于$x \in A_N$，它至少在序列的第$N$个位置出现了。因此，$x$属于$\bigcup_{k=N}^{\infty} A_k$。
%\end{corollary}
\subsubsection{上下极限的计算}
给定一列编好了号的集合：$\{A_n\}$，则
\begin{equation}
\underset{n\to \infty}{\overline{\lim}} A_n = \overset {\infty}{\underset{k=1}{\bigcap}} \overset{\infty}{\underset{i=k}{\bigcup}} A_i = \overset{\infty}{\underset{k=1}{\bigcap}} U_k~,
\end{equation}
类似地
\begin{equation}
\underset{n\to \infty}{\underline{\lim}}A_n=\overset{\infty}{\underset{k=1}{\bigcup}}\overset{\infty}{\underset{i=k}{\bigcap}} A_i=\overset{\infty} {\underset{k=1}{\bigcup}} J_k~,
\end{equation}
这两个计算公式的依据是单调性。由于 $U_k$ 单调不增，$J_k$ 单调不减，于是 $\displaystyle \overset{N}{\underset{k=1}{\bigcap}}U_k=U_N$，因此
\begin{equation}
\lim_{k\to\infty}U_k=\lim\limits_{N\to\infty}\overset{N}{\underset{k=1}{\bigcap}} U_k=\overset{\infty}{\underset{k=1}{\bigcap}}U_k
\qquad
\lim\limits_{k\to\infty}J_k=\lim\limits_{N\to\infty}\overset{N}{\underset{k=1}{\bigcup}} J_k=\overset{\infty}{\underset{k=1}{\bigcup}} J_k~.
\end{equation}

\subsection{极限}
给定一列编好了号的集合：$\{A_n\}$，那么它的上极限和下极限总是存在的。

但是，如果有一个元素 $x$ 很不听话，随着 $n$ 向无穷增大，$\mathcal{X}_{A_n}(x)$ 一会儿是 $1$，一会儿是 $0$，那就没法定义 $\{A_n\}$ 的极限，因为你没法说清楚这个不听话的 $x$ 究竟是不是极限集合中的元素。所以，为了良好地定义 $\{A_n\}$ 的极限，就不允许不听话的 $x$ 出现。

单调集列自然不存在不听话的 $x$，但是单调性是一个过分强的要求。为了让集列 $\{A_n\}$ 有极限，我们只需要它的上极限等于下极限：$\underset{n\to \infty}{\overline{\lim}} A_n=\underset{n\to \infty}{\underline{\lim}} A_n$。由于每一个 $J_k\subseteq U_k$，故已经必有 $\underset{n\to \infty}{\underline{\lim}} A_n\subseteq \underset{n\to \infty}{\overline{\lim}} A_n$，所以我们只要求 $\underset{n\to \infty}{\overline{\lim}}A_n\subseteq \underset{n\to \infty}{\underline{\lim}} A_n$。
当 $\underset{n\to \infty}{\overline{\lim}} A_n\subseteq \underset{n\to \infty}{\underline{\lim}} A_n$ 时，上下极限相等，我们就统一把它们叫做 $\{A_n\}$ 的\textbf{极限（limit set）}。
