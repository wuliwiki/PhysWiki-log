% 恒成立（高中）
% keys 恒等式|恒成立|不等式恒成立
% license Usr
% type Tutor

\pentry{等式与不等式 \nref{nod_HsEquN}}{nod_1bc6}

\begin{issues}
\issueDraft
\end{issues}
在\enref{等式与不等式}{HsEquN}中已经介绍过等式和不等式的概念，本文将专注处理恒成立的等式和不等式。恒成立指的是在给定的变量取值范围中，不论取哪个值，等式（或不等式）均成立。

在解题时

\subsection{恒等式}

恒成立的等式称作\textbf{恒等式（identities）}。区分恒等式和公式（formula）。

一些常见的恒等式：
\begin{itemize}
\item 平方和：$(a\pm b)^2=a^2\pm2ab+b^2$
\item 平方差：$a^2-b^2=(a+b)(a-b)$
\item 立方和：$(a\pm b)^2=a^3\pm 3a^2b+3ab^2\pm b^2$
\item 立方差：$a^3\pm b^3=(a\pm b)(a^2\mp ab+b)$
\item \enref{三角恒等式}{HsAnTf}
\end{itemize}

恒等式意味着任何点上的行为都是完全相同的，因此恒等式两侧进行求导、积分等运算均仍能保持恒等关系。
当说两个函数相等时，由于相等中包含定义域、对应关系和值域，因此，这时所说的相等是指恒等。

\subsection{不等式恒成立的条件}

与等式的情况相同，存在某些不等式对任意变量值都成立，此时称\textbf{不等式恒成立}。下面介绍一些恒成立的不等式。

\subsubsection{最值}

$\max f(x),\min f(x)$

\subsubsection{不等式恒成立条件}

若给定集合$A$，在$A$上函数满足：
\begin{equation}
\displaystyle\max_{x\in A} f(x)\leq 0\qquad\text{或}\qquad\min_{x\in A} f(x)\geq 0~.
\end{equation}
，则称$f(x)\leq 0$或$f(x)\geq 0$在$A$上恒成立。

$f(x)\leq g(x)$或$f(x)\geq g(x)$成立的充要条件是函数$F(x)=f(x)-g(x)$满足之前的恒成立条件。如果想要各自考虑$f(x),g(x)$，而不是上面的方法。那么$\max f(x)\leq\min g(x)$或$\min f(x)\geq\max g(x)$对于恒成立而言是充分不必要条件。以第一个为例，成立的原因是$f(x)\leq\max f(x)\leq\min g(x)\leq g(x)$，这是一种严格的成立，就像二者中间有一个区域，谁都不越雷池一步。
\addTODO{说明图，一个是彼此交错但不超过，一个是中间严格不大于。}

这里容易搞混符号，注意，$\min f(x)\leq\min g(x)$或$\max f(x)\geq\max g(x)$对于恒成立而言既不充分也不必要。根本上还是要记住原理。

另外如果$g(x)=c$是常数，则之前的成立条件也可认为是：若在$A$上函数满足：
\begin{equation}
\displaystyle\max_{x\in A} f(x)\leq a\qquad\text{或}\qquad\min_{x\in A} f(x)\geq b~.
\end{equation}
，则称$f(x)\leq a$或$f(x)\geq b$在$A$上恒成立。

一般出现在题目中时，往往会给出一个含参的函数，如$f(x;a,b,c)=ax^2+bx+c$等。这时需要根据题目的条件，利用上面的成立条件来推导。下面给出一些常用的不同的函数或运算满足的恒成立的不等式，请在使用时注意他们成立的前提条件和取等条件：
\begin{itemize}
\item $\forall x\in\mathbb{R},|x|\geq0$
\item $\forall x\in\mathbb{R},x^{2n}\geq0\quad (n\in\mathbb{Z})$
\item $\forall x\in[0,+\infty),x^{1\over2n}\geq0\quad (n\in\mathbb{Z})$
\item $\forall x\in\mathbb{R},ax^2+bx+c\geq0\quad(b^2-4ac\leq0\text{且}a>0)$，大部分情况下也可以由$c>0$来代替$a>0$进行判定。
\item $\forall x\in\mathbb{R},ax^2+bx+c\leq0\quad(b^2-4ac\leq0,a<0)$，大部分情况下也可以由$c<0$来代替$a<0$进行判定。
\item $\forall x\in\mathbb{R},a^x>0\quad (a\in\mathbb{R}^+)$
\item $\forall x\in\mathbb{R},0\leq|\sin x|\leq 1,0\leq|\cos x|\leq 1$
\item $\forall x\in[-{3\pi\over4}+2k\pi,{\pi\over4}+2k\pi],\sin x\leq\cos x,\quad k\in\mathbb{Z}$
\item $\forall x\in[{\pi\over4}+2k\pi,{5\pi\over4}+2k\pi],\sin x\geq\cos x,\quad k\in\mathbb{Z}$
\item $\forall x\in[0,{\pi\over2}),\sin x\leq x\leq\tan x$
\end{itemize}

还有一种常见的情况，选取$g(x)$为$f(x)$的某条切线，此时，切点往往成为取等的临界条件。比如$\forall x\in\mathbb{R},e^x\geq x+1$当且仅当$x=0$时成立，又如$\forall x\in\mathbb{R}^+,\ln x\leq x-1$当且仅当$x=1$时成立。

\subsection{基本不等式}

\textbf{基本不等式}是基于$(a-b)^2\geq0$得到的一组不等关系。由于$(a-b)^2\geq0$恒成立，因此由此推广得到的不等式也是恒成立的。推广的过程是通过向$a,b$赋值实现的，而推广后由于不等号两边的表达式均为某种均值的形式，因此基本不等式也称为\textbf{均值不等式}或\textbf{均值定理}，而由于存在多种均值，也有人称其为\textbf{（均值）不等式链}。

\subsubsection{基本不等式的简易形式}

下面给出的是高中要求的常见形式：

\begin{theorem}{基本不等式（简易）}
\begin{equation}
{a^2+b^2\over2}\geq ab\qquad\text{或}\qquad{a+b\over2}\geq \sqrt{ab}~.
\end{equation}
当且仅当$a=b$时取等。
\end{theorem}
证明过程是显然的，将$(a-b)^2\geq0$打开并移项就可以得到，或后的写法也只是将$a,b$替换成了$\sqrt{a},\sqrt{b}$。但他背后的意义是深远的，一般称$\displaystyle a+b\over2$为算术平均数，也就是通常生活中提到平均值时所指的数，称$\sqrt{ab}$为几何平均数。几何平均数通常在计算增长率时使用，比如投资某个项目，第一年的收益率是$4\%$，第二年是$10\%$，则两年的平均收益率并非$\displaystyle {4\%+10\%\over2}=7\%$，而是$\sqrt{1.04\times1.10}-1=6.96\%$。根据基本不等式，如果直接计算算术平均数，则总会高估实际的收益率。

同时,根据$a^2+b^2\geq2ab$可以得到$2a^2+2b^2\geq a^2+2ab+b^2=(a+b)^2$，两侧同时开方则可得到
\begin{equation}
\sqrt{a^2+b^2\over2}\geq{a+b\over2}~.
\end{equation}
而将$a^2+b^2\geq2ab$中的$a,b$替换成$\displaystyle\sqrt{1\over a},\sqrt{1\over b}$，则有$\displaystyle{1\over a}+{1\over b}\geq{2\over\sqrt{ab}}$，即：
\begin{equation}
{2\over\displaystyle{1\over a}+\displaystyle{1\over b}}\leq\sqrt{ab}~.
\end{equation}
其中，$\displaystyle \sqrt{a^2+b^2\over2}$称为平方平均数，它的特点是越大的值影响越大，或者说给予较大的值更高的权重。通常用在一些$0$附近的数上，来反映波动程度。$\displaystyle{2\over\displaystyle{1\over a}+\displaystyle{1\over b}}$称为调和平均数，通常用来计算等量变化时的速率或比率，比如一段路一半以$60{\rm km/h}$的速度运动，另一半以$30{\rm km/h}$的速度运动，那么平均速度是$\displaystyle \frac{2}{\displaystyle\frac{1}{60} + \frac{1}{30}} = 40{\rm km/h}$，而非$\displaystyle{60+30\over2}=45{\rm km/h}$。

注意，本节出现的$a,b$都是变量，因此可以给其赋予某个数或某种函数，例如取$\displaystyle a=x,b={1\over x}$，此时有：$\displaystyle x+{1\over x}\geq2,\quad(x>0)$


\subsubsection{不等式链}
这四种均值都有广泛的应用\footnote{此处只给出这四种，其实有很多种均值的定义，它们也都可纳入下面的均值定理中。}。事实上，上面的四种平均数都可以扩展至多个数，对于一列数$a_1,a_2,\cdots,a_n$，称
\begin{equation}
\begin{array}{c} 
\displaystyle Q = \sqrt{\frac{a_1^2 + a_2^2 + \cdots + a_n^2}{n}}\\\\
\displaystyle A = \frac{a_1 + a_2 + \cdots + a_n}{n}\\\\
\displaystyle G = \sqrt[n]{a_1 \cdot a_2 \cdot \cdots \cdot a_n}\\\\
\displaystyle H = \frac{n}{\frac{1}{a_1} + \frac{1}{a_2} + \cdots + \frac{1}{a_n}}
\end{array}~.
\end{equation}
分别为：
\begin{itemize}
\item $Q$——\textbf{平方平均数（Quadratic mean，或平方均值）}，又称\textbf{均方根（root mean square，RMS）}，可以看作是$\displaystyle \sum_{i=1}^nQ^2= \sum_{i=1}^na_i^2$
\item $A$——\textbf{算术平均数（Arithmetic mean，或算数均值）}，可以看作是$\displaystyle \sum_{i=1}^nA= \sum_{i=1}^n{a_i}$
\item $G$——\textbf{几何平均数（Geometric mean，或几何均值）}，可以看作是$\displaystyle \prod_{i=1}^nG= \prod_{i=1}^n{a_i}$
\item $H$——\textbf{调和平均数（Harmonic mean，或调和均值）}，可以看作是$\displaystyle \sum_{i=1}^n\frac{1}{H}= \sum_{i=1}^n\frac{1}{a_i}$
\end{itemize}

\begin{theorem}{均值不等式}
对于一列数$a_1,a_2,\cdots,a_n$，有
\begin{equation}
Q\geq A\geq G\geq H~.
\end{equation}
即
\begin{equation}
\displaystyle\sqrt{\frac{\displaystyle\sum_{i=1}^na_i^2}{n}}\geq \frac{\displaystyle\sum_{i=1}^na_i}{n}\geq \sqrt[n]{\prod_{i=1}^na_i}\geq \frac{n}{\displaystyle\sum_{i=1}^n\frac{1}{a_i}}~.
\end{equation}
当且仅当$\forall 0\leq i,j\leq n,a_i=a_j$时取等。
\end{theorem}


\subsection{*柯西不等式}

柯西不等式（Cauchy-Schwarz Inequality）为两个向量或数列的内积与它们的模长之间建立了不等关系。

高中常用的二维模式如下：

\begin{equation}
\left( a^2 + b^2\right) \left(c^2 + d^2 \right) \geq \left( ac+bd \right)^2~.
\end{equation}

多维模式如下：

\begin{equation}
\left( \sum_{i=1}^{n} a_i^2 \right) \left( \sum_{i=1}^{n} b_i^2 \right) \geq \left( \sum_{i=1}^{n} a_i b_i \right)^2~.
\end{equation}

证明：在几何上，柯西不等式可以通过向量内积和向量模的关系得到解释。设 $\mathbf{a}$ 和 $\mathbf{b}$ 是两个向量，则它们的内积可以表示为：

$$\mathbf{a} \cdot \mathbf{b} = \|\mathbf{a}\| \|\mathbf{b}\| \cos \theta~.$$

其中 $\theta$ 是两个向量之间的夹角。根据 $\cos \theta$ 的取值范围，显然有：

$$|\mathbf{a} \cdot \mathbf{b}| \leq \|\mathbf{a}\| \|\mathbf{b}\|~.$$

这就是柯西不等式的向量形式。等号成立的条件是当 $\theta = 0$ 或 $\theta = \pi$ 时，即两个向量平行。

\subsection{*排序不等式}

假设有两列数字$a_1,a_2,\cdots,a_n;b_1,b_2,\cdots,b_n$。若$\forall 1\leq i<j\leq n,a_i\leq a_j\land b_i\leq b_j$则称二者为顺序排列，也就是两个序列的增长方向相同。若$\forall 1\leq i<j\leq n,a_i\leq a_j\land b_i\geq b_j$，则称二者为逆序排列，也就是两个序列的增长方向相反。其他排列方式称为乱序排列。排序不等式表示：逆序和$\leq$乱序和$\leq$顺序和，规范表述如下：

\begin{theorem}{排序不等式}
设两列数字 $a_1, a_2, \cdots, a_n$ 和 $b_1, b_2, \cdots, b_n$，两列数分别满足 $a_1 \leq a_2 \leq \cdots \leq a_n$ 和 $b_1 \leq b_2 \leq \cdots \leq b_n$。那么有如下不等式：
\begin{equation}
\sum_{i=1}^n a_i b_i \geq \sum_{i=1}^n a_i b_{\sigma(i)} \geq \sum_{i=1}^n a_i b_{n+1-i}~,
\end{equation}
其中 $\sigma$ 表示对 ${1, 2, \cdots, n}$ 的非顺序、逆序的任意排列，当且仅当$\forall 1\leq i,j\leq n,a_i=a_j$或$\forall 1\leq i,j\leq n,b_i=b_j$时，等号成立。
\end{theorem}

排序不等式可以证明基本不等式、柯西不等式、切比雪夫不等式等其他恒成立的不等式。

\begin{lemma}{若$a\geq b,m\geq n$，则$am+bn\geq an+bm$}\label{lem_HsEquN_1}
证明：

取$a=b+k,m=n+p$，则$k,p\geq0$，代入有：
\begin{equation}
\begin{split}
am+bn&= (b+k)m+(a-k)n \\ 
&= bm+an+kp \\
&\geq an+bm
\end{split}~.
\end{equation}
或者由$a\geq b,m\geq n$有$a-b\geq 0,m- n\geq0$，从而$(a-b)(m- n)\geq0$，打开整理即可得到结论。上面两种方法都可以知道，原不等式当且仅当$a=b$或$m=n$时取等。
\end{lemma}

下面使用数学归纳法证明排序不等式中顺序和不小于乱序和，逆序部分同理：

1. 当$n=1$时显然成立；

2. 假设当$n$时，任意乱序$\sigma(i),(1\leq i\leq n)$时不等式均成立。当取$n+1$时，$\forall 1\leq i\leq n$有$a_{n+1}>a_i,b_{n+1}>b_i$，从而代入假设有：

\begin{equation}
\begin{split}
\sum_{i=1}^{n+1} a_i b_i&=\sum_{i=1}^n a_i b_i+a_{n+1}b_{n+1}\\
&\overset{\mathrm{1}}{\geq} \sum_{i=1}^n a_i b_{\sigma(i)} +a_{n+1}b_{n+1} \\ 
&\overset{\mathrm{2}}{\geq} \sum_{i=1}^{n+1} a_i b_{\sigma(i)} \\
\end{split}~.
\end{equation}
其中：第一个$\geq$根据假设，成立，对应$1$种乱序的情况；第二个$\geq$是交换了某个$b_{\sigma(i)}$和$b_{n+1}$，此时根据\autoref{lem_HsEquN_1} 可知，必有$a_i b_{\sigma(i)}+a_{n+1}b_{n+1}\geq a_ib_{n+1} +a_{n+1}b_{\sigma(i)}$，分别对应$n$个乱序的情况。综上，对某个$\sigma(i)$乱序的前提下，添加$a_{n+1}b_{n+1}$后新生成的$n+1$种乱序情况均成立。由于假设任意乱序$\sigma(i),(1\leq i\leq n)$均成立，因此对任意的新乱序$\sigma(i),(1\leq i\leq n+1)$不等式均成立。

由数学归纳法，排序不等式恒成立。

证毕。

