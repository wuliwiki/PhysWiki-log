% 协变和逆变
% keys 协变|逆变|共变|反变|指标|指标升降|上标|下标|上下标|上下指标
% license Xiao
% type Tutor

\pentry{过渡矩阵\nref{nod_TransM}，爱因斯坦求和约定\nref{nod_EinSum}}{nod_d996}

本节在解释张量的协变和逆变的概念之外，也解释了“$(r, s)$型”张量的含义。

协变和逆变的概念在物理学中极为普遍，它描述的是物理量随着参考系变化等变换而变换的特点。在现代物理学语言中，常常使用各种各样的线性空间来描述物理系统，其中一个向量表示一种状态，一组基底表示一种看待此系统的视角，比如参考系、表象等等，而向量的坐标则意味着在给定视角（基底）下的物理量。因此，协变和逆变实际上描述的是各种向量的坐标随着基底变换的变换特征。

简单来说，协变就是指坐标的变换矩阵和基底变换的过渡矩阵相同，而逆变就是指坐标的变换矩阵和过渡矩阵互逆。

\subsection{对偶基下的张量坐标变换}

在\enref{张量}{Tensor}文章中我们知道了，定义张量的时候只需要一系列和某一线性空间 $V$ 同构的线性空间就可以，并没有对这些线性空间的基有特殊要求。但是张量的具体表示依赖于各基的选取，所以我们现在制定一下基的选取规则。

首先，我们\textbf{不使用任意的向量空间}，那样范围过于广。从现在开始，定义张量时所涉及的一系列向量空间，不管是作为定义域的一部分还是值域的一部分，都\textbf{只能从}一个给定的向量空间 $V$ \textbf{和} 它的对偶空间 $V^*$ \textbf{中选取}。所有的 $V$ 用同一组基，所有的 $V^*$ 则用对应的对偶基。对偶基的定义请参考\enref{对偶空间}{DualSp}文章。

这样一来，我们只需要确定一组 $V$ 的基，就相当于给出了所有 $V$ 和 $V^*$ 的基，从而确定了任何涉及 $V$ 和 $V^*$ 的张量的坐标。



协变和逆变的概念来自张量坐标变换的方式。我们先观察一个最为简单的例子，来直观感受一下什么是变换的方式。

\begin{example}{}
考虑一维实线性空间（也就是实数域本身）$\mathbb{R}$，其对偶空间 $\mathbb{R}^*$ 就是全体实系数一次函数的集合 $\{f:\mathbb{R}\rightarrow\mathbb{R}|f(x)=ax\}$。为了方便表示，我们把函数 $ax$ 记为 $f_a(x)$。

现在取定 $\mathbb{R}$ 上的一组基。由于 $\mathbb{R}$ 是一维的，基只需要一个基向量，通常取实数 $1$，但也可以取任何别的实数。如果 $\mathbb{R}$ 的基是 $\{a\}$，那么 $\mathbb{R}^*$ 的基就是 $f_{\frac{1}{a}}$，这样才满足对偶基的要求：$f_{\frac{1}{a}}(a)=\frac{1}{a}a=1$。

现在给出任意一个函数 $f_b\in\mathbb{R}^*$，由于 $f_b(x)=bx=ab(\frac{1}{a}x)=abf_{\frac{1}{a}}(x)$，故在如上给定的基和对偶基下，$f_b$ 的坐标为 $(ab)$。如果给出任意一个实数 $y\in\mathbb{R}$，那么也可以计算出 $y$ 的坐标是 $(y/a)$。到这一步，你可能已经大致看出来协变和逆变的关系了。

如果我们换一组 $\mathbb{R}$ 的基，比如说换成 $a'$，那么过渡矩阵就是 $(a'/a)$。在新基下，$f_b$ 的坐标为 $a'b$，$y$ 的坐标为 $y/a'$，也就是说他们的坐标分别是原来的坐标乘以矩阵 $(a'/a)$ 和 $(a/a')$。这两个变换矩阵，第一个是过渡矩阵本身，第二个是过渡矩阵的逆；所以我们说，$f_b$ 的坐标关于 $\mathbb{R}$ 的坐标变换是一致的，或者说是\textbf{共变（covariant）}的，也叫\textbf{协变}的；反过来，$y$ 的坐标变换就是\textbf{反变（contravariant）}的，也叫\textbf{逆变}的。

作为简单总结，我们可以说，如果 $\mathbb{R}$ 的基向量变成原来的 $2$ 倍，那么 $f_b$ 的坐标变为原来的 $2$ 倍，$y$ 的坐标变为原来的 $1/2$ 倍。
\end{example}

当基变化时，向量的坐标变换都是过渡矩阵的逆。对偶基的定义，使得它的过渡矩阵总是原空间基的过渡矩阵的逆。这就是为什么 $f_b$ 反而协变的。

因此，对于一般的情况，我们把协变和逆变的概念定义如下：

\begin{definition}{协变和逆变向量}
给定线性空间 $V$，则 $\bvec{v}\in V$ 称为其\textbf{逆变向量}，$\bvec{w}\in V^*$ 称为其\textbf{协变向量}。
\end{definition}

一定要分清楚对偶向量和向量，虽然都叫向量，但它们并不在一个空间里。


\begin{example}{速度和梯度}

考虑闵可夫斯基空间中的两种向量场：速度场和梯度场。注意这里的速度是时空流形上的切向量，因此指的是物理上所说的四速度，见\enref{时空的四维表示}{SR4Rep}。

当进行$x$方向速度为$v$的参考系变换时，过渡矩阵\footnote{注意，此处洛伦兹变换矩阵应该是$L=T^{-1}$，即过渡矩阵的逆。因为洛伦兹变换矩阵表达的是时空点的坐标变换，过渡矩阵是基向量的变换。\enref{斜坐标系表示洛伦兹变换}{SROb}可以作为可视化的理解辅助。}为
\begin{equation}
T=
\pmat{
    \frac{1}{\sqrt{1-v^2}}&\frac{v}{\sqrt{1-v^2}}&0&0\\
    \frac{v}{\sqrt{1-v^2}}&\frac{1}{\sqrt{1-v^2}}&0&0\\
    0&0&1&0\\
    0&0&0&1
}~.
\end{equation}
如果一个时空点在初始参考系中的坐标为$(t, x, y, z)\Tr$，那么它在变换后的参考系中坐标为$(t', x', y', z')\Tr=T^{-1}(t, x, y, z)\Tr$。


由\textbf{时空的四维表示}的\autoref{sub_SR4Rep_1}~\upref{SR4Rep}可知，速度变换的矩阵为
\begin{equation}
\pmat{
    \frac{1}{\sqrt{1-v^2}}&\frac{-v}{\sqrt{1-v^2}}&0&0\\
    \frac{-v}{\sqrt{1-v^2}}&\frac{1}{\sqrt{1-v^2}}&0&0\\
    0&0&1&0\\
    0&0&0&1
}
=T^{-1}~,
\end{equation}
因此速度场是逆变的。

取初始参考系下的$x$坐标场$\phi$（即$\phi(t, x, y, z)=x$），据此构造一个梯度场$\partial_\mu \phi$，在初始参考系中的坐标为$(0, 1, 0, 0)$。

在变换后的坐标系中
\begin{equation}
\phi(t', x', y', z')=x=\frac{x'+vt'}{\sqrt{1-v^2}}~.
\end{equation}
因此
\begin{equation}
\partial_\mu\phi = \frac{v}{\sqrt{1-v^2}}\partial_\mu t' + \frac{1}{\sqrt{1-v^2}}\partial_\mu x'~,
\end{equation}
故$\partial_\mu \phi$在新基下的坐标是$(0, 1, 0, 0)T$，因此是协变的。

一般地，任取一个标量场$\phi$，其梯度场$\partial_\mu\phi$都是协变的，这我们已经讨论过了。

\end{example}


\subsection{上下指标}
向量和对偶向量都可以看成一阶张量，前者把一个对偶向量映射为一个标量，后者把一个向量映射为一个标量。我们已经知道，如果原空间 $V$ 的过渡矩阵写为 $a^i_j$，其中第 $i$ 行 $j$ 列的元素是 $a^i_j$，那么原空间的向量坐标变换矩阵\upref{TrTnsr}就是其逆矩阵 $(a^i_j)^{-1}$，而对偶空间的向量坐标变换矩阵是 $a^i_j$ 本身。

爱因斯坦求和约定里规定了上下标之间的关系，但是那只是一种形式，并未说明上下标到底指代什么对象。我们现在就来定义上下标的含义。

\begin{definition}{}
给定线性空间 $V$，将其向量的坐标表示为带上标的数，对偶向量的坐标表示为带下标的数。这样，对于向量或者说一阶张量，上下标是在告诉读者，这个向量是 $V$ 中的还是 $V^*$ 中的。
\end{definition}

在线性代数的范围里，给定线性空间 $V$ 的基后，我们通常把 $V$ 的向量坐标表示为列矩阵，而把 $V^*$ 的向量坐标表示为行矩阵。因此上标 $i$ 表示“第 $i$ 个列矩阵的元素”，也就是“行数”，类似地下标就表示“列数”。按照矩阵的乘法规则，即“行乘以列再求和”，我们就得到了爱因斯坦求和约定的上下标规则：求和的两个指标必须一上一下。

爱因斯坦求和约定的好处是，可以把“行数”、“列数”的含义推广到高维矩阵上，也就是推广到高阶张量上，相当于把高维矩阵的各个指标分为两类，一类是“行”，一类是“列”。

\subsubsection{升降指标}

如果给定了一个向量 $\bvec{v}$，其在某基下的坐标是 $v^a$，那么这个向量的对偶向量 $\bvec{v}^*$ 在对偶基下的坐标就表示为 $v_a$。这样，一个向量变成其对偶向量的过程中坐标的变化\footnote{就是指坐标从列矩阵变成行矩阵}，各元素也发生变化，就叫做\textbf{指标的下降}。反过来，把一个对偶向量变成原向量，就叫做\textbf{指标的提升}。

由于对偶空间之间是平等的，指标的上下、升降就决定于“选择哪个作为原空间”，也就是说是相对的概念。

向量指标的升降也可以推广到一般的张量指标的升降，规则和对偶向量是一样的：升降后的张量和原张量相乘，结果是 $1$。

需要补充的是，以上讨论实际上是默认“度量张量为 $\delta^i_j$\footnote{当且仅当 $i=j$ 时，$\delta^i_j=\delta^{ij}=\delta_{ij}=1$。}的情况。如果用度量张量来定义内积，或者用伪度量张量来定义伪内积\footnote{最常见的就是闵可夫斯基度规，在相对论中随处可见。}，那么升降指标的规则应该推广为：升降后的张量和原张量再乘以度量张量后，结果是 $1$。这就是我们在进行指标升降的时候会乘以一个度量张量的原因。

\subsubsection{张量的协变和逆变}

给定线性空间 $V$，则每个逆变向量都可以看成 $V^*\rightarrow \mathbb{F}$\footnote{$\mathbb{F}$ 是任意的域，一般是实数域 $\mathbb{R}$ 或复数域 $\mathbb{C}$。}的一个一阶张量；反过来，每个协变向量也都是 $V\rightarrow \mathbb{F}$ 的一阶张量。

一般地，如果一个张量 $T$ 涉及 $n$ 个 $V$ 和 $m$ 个 $V^*$\footnote{参见\enref{张量}{Tensor}的小节“张量的阶数”。}，那么我们可以把它记为 $T^{b_1b_2\cdots b_m}_{a_1a_2\cdots a_n}$，这样就可以用爱因斯坦求和约定来计算它对各向量的作用。我们用二阶张量来举一个例子，请对照\enref{张量}{Tensor}文章教的理解方式和技巧来看。

\begin{example}{}
给定线性空间 $V$，设 $T^b_a$ 是涉及一个 $V$ 和一个 $V^*$ 的张量。

对于逆变向量 $v^a\in V$，这个张量把它映射为一个逆变向量（也即 $1$-线性函数）$w^b=v^aT^b_a$。

对于逆变向量 $v^a\in V$ 和协变向量 $w_b$，这个张量把它们俩映射为一个数字 $v^aw_bT^a_b$。
\end{example}

根据\enref{张量的坐标变换}{TrTnsr}给的变换规则，对于 $V$ 上的张量 $T^{b_1b_2\cdots b_m}_{a_1a_2\cdots a_n}$，当我们给定 $V$ 的过渡矩阵 $a^{ij}$ 的时候，每个 $V^*$ 的过渡矩阵都是 $a_{ij}$，其中 $a^{ij}$ 和 $a_{ij}$ 互为逆矩阵，即 $a^{ik}a_{kj}=\delta^i_j$\footnote{$\delta^i_j=1$ 当且仅当 $i=j$；否则，$\delta^i_j=0$。按照我们规定的，上标表示行数，下标表示列数，可知它表示单位矩阵。}。这样一来，整个张量的坐标变换就成了 $m$ 个 $a_{i_\alpha k\alpha}$ 和 $n$ 个 $a^{k_\beta j_\beta}$ 的乘积，虽然它们并不会互相抵消，但是它们的行列式可以互相抵消，从而使得张量坐标在变换前后行列式不变。


\begin{issues}
需要补充一个二阶张量的变换例子。
\end{issues}


\subsection{$(r, s)$型张量}


尽管张量是多个任意的线性空间 $V$ 之间的多重线性映射，我们通常只考虑用 $V$ 和其对偶空间 $V^*$ 定义的张量，这样只需要定义一个空间的基就可以得到所有空间的基了。

回忆\enref{张量}{Tensor}文章中所教的判断张量阶数的方法：看一共有多少线性空间参与映射，不过是作为自变量的一部分还是像的一部分。现在有了即分为 $V$ 和 $V^*$的分类，就可以进一步把张量分出类型来，比单纯的阶数更细致一些。

% \begin{definition}{}
% 一个 $(r, s)$ 型张量是涉及了 $s$ 个逆变向量和 $r$ 个协变向量的 $(r+s)$ 阶张量。
% \end{definition}

\begin{definition}{}
一个$(r, s)$型张量是将$s$个逆变向量和$r$个协变向量映射为一个数字的张量。
\end{definition}

一个 $(r, s)$ 型张量可以把 $s$ 个逆变向量和 $r$ 个协变向量映射为一个数字，也可以是映射成低阶张量。比如说，如果 $h^{ab}_c$ 是一个 $(2, 1)$ 型张量，那么它乘以一个逆变向量 $v^c$，就得到一个 $(2, 0)$ 型张量 $g^{ab}=v^ch^{ab}_c$；同样，它乘以两个协变向量后就得到一个 $(0, 1)$ 型张量，也就是一个协变向量。









%\subsection{协变向量和逆变向量}

% 协变和逆变的区分，最朴素的理解可以是这样的：如果把线性空间的基向量都变成原来的两倍长，结果 $\bvec{v}$ 的坐标分量都变成了原来的一般，那么 $\bvec{v}$ 就是一个逆变的向量；如果 $\bvec{v}$ 的坐标分量都变成了原来的两倍长，那么 $\bvec{v}$ 就是一个协变的向量。由过渡矩阵\upref{TransM}的结论可知，同一个线性空间中的向量，其坐标总是按照过渡矩阵的逆矩阵变换，也就是说，总是逆变的。因此，协变和逆变的区分只有在多个不同的空间之间才有意义，这是容易混淆的点，要注意理解区别。

% 学生常常下意识地把同构的不同线性空间看成是同一个空间，这造成了对不同空间的数学本质的理解困难。比如说，位移和速度实际上是两个同构但不相同的空间，它们的基底确实可以进行一一对应，但这种对应也是人为设定的，并没有天然的对应逻辑。

% \begin{definition}{向量的协变和逆变}
% 给定两个同构的线性空间 $V_1$ 和 $V_2$，它们的基底相互对应，对应方式根据实际情况来定。当 $V_1$ 的基底按照过渡矩阵 $T$ 变换时，其中的元素坐标也按照 $T$ 变换。如果在某种关联下，$V_2$ 中元素的坐标也按照 $T$ 变换，那么我们称 $V_2$ 中的元素对于 $V_1$ 的变换是\textbf{协变（covariant）}的，有的地方也译作\textbf{共变}；如果 $V_2$ 中元素的坐标按照 $T^{-1}$ 变换，那么我们称 $V_2$ 中的元素对于 $V_1$ 的变换是\textbf{逆变（contravariant）}的，有的地方也译作\textbf{反变}。
% \end{definition}

% \begin{example}{协变的例子}
% 如果 $V_1$ 和 $V_2$ 的\textbf{基底}始终\textbf{协变}，就是说当 $V_1$ 的过渡矩阵是 $T$ 时，$V_2$ 的过渡矩阵也是 $T$，那么 $V_2$ 的\textbf{向量}对于 $V_1$ 是\textbf{协变}的。
% \begin{itemize}
% \item 任何线性空间 $V$ 自身的向量，对于 $V$ 本身是协变的。
% \item 设 $V_1$ 是一维位移空间，$V_2$ 是一维速度空间，它们的基底之间的关联是：$x \Si{m}$ 永远对应 $x \Si{m/s}$，那么对 $V_1$ 的基底进行任何变换，$V_2$ 的过渡矩阵总和它一致，即 $V_2$ 的基底和 $V_1$ 的基底协变；因此 $V_2$ 中的向量对于 $V_1$ 是协变的。
% \end{itemize}
% \end{example}

% \begin{example}{逆变的例子}\label{ex_CoCon_1}
% 如果 $V_1$ 和 $V_2$ 的\textbf{基底}始终\textbf{逆变}，就是说当 $V_1$ 的过渡矩阵是 $T$ 时，$V_2$ 的过渡矩阵是 $T^{-1}$，那么 $V_2$ 的\textbf{向量}对于 $V_1$ 是\textbf{逆变}的。
% \begin{itemize}
% \item 设 $V_1$ 的对偶空间是 $V_2$，其基底的关联是：$V_1$ 的基向量 $\bvec{e}_i$ 对应于 $V_2$ 的基向量 $f_i$，其中 $f_i(\bvec{e}_i)=\delta_{ij}$。此时 $V_2$ 的基底关于 $V_1$ 的基底是逆变的，因此 $V_2$ 的向量对于 $V_1$ 是协变的。
% \end{itemize}
% \end{example}

% 我们简单讨论一下对偶空间的例子，以加深体会。

% 考虑一个一维的实线性空间 $V_1$，其对偶空间是 $V_2$。对偶空间的每个元素都是一个正比例函数，因此可以画成一个 $x-y$ 平面上过原点的直线，其中 $x$ 轴代表 $V_1$，$y$ 轴则代表实数轴\footnote{在这个例子里，$V_1$ 本身也是实数轴；但当 $V_1$ 的维度大于 $1$ 的时候，就不再是实数轴了，因此我们在这里不将 $V_1$ 和实数轴等同起来；使用一维空间只是为了举例简单。}。对于实数 $a, b$，如果 $f\in V_2$ 的斜率是 $a$，那么 $bf$ 的斜率就是 $ba$。

% \begin{figure}[ht]
% \centering
% \includegraphics[width=8cm]{./figures/CoCon_1.pdf}
% \caption{$V_1$ 和其偶空间 $V_2$ 的基底关联示意图。蓝色和红色的箭头分别表示 $x$ 轴上的两个向量，作为 $V_1$ 的两个不同的基；蓝色和红色的实线代表两个不同的正比例函数，作为 $V_2$ 的两个不同的基。两个空间的基的关联规则是，$V_1$ 的基被 $V_2$ 的基映射到 $1$ 上。可见，红色箭头比蓝色箭头长，但是红色函数的斜率比蓝色函数小，函数斜率和箭头长度呈现“逆变”关系。} \label{fig_CoCon_1}
% \end{figure}

% 现在，按照本节\autoref{ex_CoCon_1} 中对偶空间的例子所定义的基底的关联，如果 $V_1$ 的基向量是 $\bvec{e}_1$，那么其所关联的 $V_2$ 的基向量就是 $f_1$，其中 $f_1{\bvec{e}_1}=1$。$\bvec{e}_1$ 的选择是任意的，但 $f_1$ 的选择要按照这个关联来确定；当然也可以反过来，任意选择 $f_1$ 后再按照关联确定 $\bvec{e}_1$。如果现在换用新的 $V_1$ 的基向量 $\bvec{e}_1'$，其中 $\bvec{e}_1'=c\bvec{e}_1$，那么其所对应的 $f_1'=f_1/c$。也就是说，$V_1$ 的基向量长度变为原先的 $c$ 倍后，$V_2$ 的基向量长度（函数的斜率）变为原来的 $1/c$ 倍。这样一来，$V_1$ 中每个元素的坐标都变为原来的 $1/c$ 倍，而 $V_2$ 中每个函数的斜率都变为原来的 $c$ 倍。因此对偶空间彼此呈现\textbf{逆变}的关系。

% 将以上讨论的一维线性空间及其对偶的情况，推广到 $n$ 维线性空间及其对偶，将数字 $c$ 和 $1/c$ 用矩阵 $\bvec{Q}$ 和 $\bvec{Q}^{-1}$ 代替，那么就得到一般情况下的线性空间及其对偶的逆变关系。

% \subsection{张量的协变和逆变}
% \pentry{张量的坐标变换\nref{nod_TrTnsr}}{nod_ee19}

% 为了不失一般性，张量的定义极为抽象，只要求它是多个同构的线性空间上的多重线性映射。这些线性空间尽管彼此同构，其基底的选择却是彼此独立的。



%待续。睡觉去了。











