% 求和符号（高中）
% license Usr
% type Tutor

\begin{issues}
\issueDraft
\end{issues}

\pentry{数列\nref{nod_HsSeFu}}{nod_571f}

想象一下这样一个场景，老师要求你计算从1到100的所有自然数的和，这时，你旁边的一个名叫高斯的同学脱口而出5050。当然，这个故事里，你不是高斯，而是他旁边那个看起来笨笨的同学。你和其他的同学一样，从$1$开始一个一个往上加。当然，这篇文章的内容不是介绍如何快速的计算这个和的，否则你就应该附身到高斯身上了。

时过境迁，对于计算机随处可见的现在，这样的操作不再像当时那样看起来笨笨的，计算机每天都在进行着类似的操作。不仅如此，通过对这个过程抽象得到的求和符号，不仅能只用一个比较简短的记号就描述之前你的求和过程，在理论上提供了强大的表达能力，还能够推广到远比高斯当时使用的方法广泛的场景中，展现了高效和便捷的特性。

当然，这个符号与之前学习过的其他符号（$+,\times,!$等）相比都复杂一些，但了解熟练之后，相信你再看到它，也会像看到老朋友那样自然。

\subsection{初次接触求和符号}

假设有人给了你一项任务，他希望你求出一些数字的和是多少（这个过程的名字叫\textbf{累加}），想一想这个过程，你会需要他给你哪些信息呢？

你需要知道第一个数是多少，并且要他依次把这些数字给你，而且最终需要有一个停止的条件，即这些数字会最终停止在某一个数字上。对于已经接触过数列的同学一定意识到了，这些数字可以构成一个数列。第一个数就是首项，最后一个数就是末项。下面假设这个数列是$\{a_n\}$，它的第一项是$a_1$，末项是$a_n$。于是这个求和结果就是：

\begin{equation}
a_1+a_2+\cdots+a_{n-1}+a_{n}.~
\end{equation}

为了避免每次都要写一堆点来表达这个求和过程，通常会设这个数列的所有项的和是$S$，即：

\begin{equation}
S=a_1+a_2+\cdots+a_{n-1}+a_{n}.~
\end{equation}

但是，尽管使用$S$避免了写一堆点，但却带来了一些其他的问题：
\begin{enumerate}
\item 如果涉及到很多个数列或者很多个求和过程，光是设这些变量，就要花掉很大篇幅，就像上面做的：需要构造一个数列，给这个数列一个符号，然后给这个数列的和一个符号。
\item $S$这个符号太泛用了，在使用的时候也会因为记不清之前都用了哪些符号造成阅读上的困难。
\item $S$这个符号本身并没有包含其他的信息，他只是给这个过程起了一个名字而已，从这个字符没有办法反映出求和过程的性质，任何记号都可以替代它，毕竟只是个名字。
\end{enumerate}

由于累加过于常用，上面的三个问题就显得尤为突出，因此，迫切需要一个新的手段来避免出现这些问题，数学家们使用求和符号来表现累加的过程：

\begin{equation}\label{eq_SumSym_1}
\sum_{i=1}^n a_i:=a_1+a_2+\cdots+a_{n-1}+a_{n}~.
\end{equation}

下面大概的解释一下求和符号在做什么：
\begin{enumerate}
\item 求和符号的下面表示求和过程的\textbf{指标}（index，也译为索引）和指标起始点，通过指标你就可以像看目录一样，找到对应的那一项是哪个。
\item 求和符号的上面表示指标终止点，由于指标只要指明一次就可以了，所以上面就不再重新写一遍指标号是什么。
\item 求和符号的右侧代表了这些数字的通项，它通常需要包含指标（这里包含在下标中）。
\item 求和的过程分成两步：第一步是“得到指标集”，通过自增，即指标从起始点开始，不断加$1$（递增），直到终止点，得到所有的指标（也即确定所有指标构成的集合，称作\textbf{指标集}）；第二步是“求和”，根据指标集找到每一个需要求和的数字，并把他们加起来。
\end{enumerate}

对照着刚才的那些问题，可以发现，用它来代替$S$不仅避免了写“$\cdots$”，也完全解决了$S$带来的问题。随着使用的深入，人们还发现，求和符号带来了一些其他的便利。不过我们先停一停，好好研究一下这个符号的几种使用方式。

\subsection{求和符号的几种使用方式}

在实际使用时，为了让求和符号能在在不同的情况下表示累加的概念，发明了一些其他的表达方法\footnote{在印刷排版中，行内的求和符号也经常写成 $\sum_{i=1}^n a_i$，为了保持行高。小时百科仍然会尽量使用 $\sum\limits_{i=1}^n a_i$。}。标题中带*的内容只做拓展视野使用，在高中阶段不涉及。

\subsubsection{更换指标}

\autoref{eq_SumSym_1} 是最常用的一种表示方法。但事实上不论是指标，还是它的起始点或是终止点都可以根据实际情况有其他的选择。

\begin{equation}
\sum_{k=p}^q a_k := a_p + a_{p+1} + \dots +a_{q-1}+ a_q~.
\end{equation}
其中 $k$ 是指标，$p,q$分别为起始点和终止点。

指标通常会使用 $i,j,k$ 等字母。若求和过程涉及多个指标为免歧义会使用多个字母。

关于起始点和终止点，与刚才相同，不一定会从$1$开始，也不一定到$n$终止，因此在使用时需要注意这两个条件，尤其是起始点，很多错误就在下意识地以$1$为开始中产生。

注意，求和符号所代表的累加过程一共有$q-p+1$项。

\subsubsection{使用表达式}

如果$a_i$的表达式是$f(i)$，即$a_i=f(i)$，则求和符号可以直接写作：

\begin{equation}
\sum_{i=1}^n f(i) .~
\end{equation}

这样做的好处是彻底脱离了之前提到的“给这个数列一个符号”的操作，直接用一个具体的表达式就可以写出来了，这样的表达方法使用最广泛。

\begin{example}{用求和符号表达从1开始的10个奇数的和}
第一个数是$1$，设指标为$n$，指标从1开始，则这些奇数的表达式是：$2n-1$。一共有$10$个数，因此，这个和是：
$$\sum_{n=1}^{10}(2n-1).~$$
\end{example}

\begin{example}{用求和符号表达从4开始的6个偶数的和}
第一个数是$4$，设指标为$k$，指标从$2$开始，则这些偶数的表达式是：$2n$。一共有$6$个数，因此，这个和是：
$$\sum_{k=2}^{7}{2k} .~$$
\end{example}

通过上面的例题可以看到，如果求和的表达式如果是一个单项式的话，直接写出即可，但如果是一个多项式的话，那么在书写时必须要用括号把它扩起来，以免引发歧义。

\subsubsection{*无穷情况}

有时会出现，起始点位置为$-\infty$，终止点位置为$+\infty$等情况，比如级数等情况。这种情况并非实指去到对应点，而是指取相应极限，即：

\begin{equation}
\sum_{i=-\infty}^n a_i:= \lim_{a\to-\infty}\sum_{i=a}^n a_i.~
\end{equation}

\begin{equation}
\sum_{i=0}^{+\infty} a_i:= \lim_{a\to+\infty}\sum_{i=0}^a a_i.~
\end{equation}

特殊地：
\begin{equation}
\sum_{i=-\infty}^{+\infty} a_i:= \lim_{a\to+\infty\atop b\to-\infty}\sum_{i=b}^a a_i.~
\end{equation}

\begin{example}{设等比级数通项$a_n=a_1q^{n-1}$，用求和符号表示等比级数和}
$$
\sum_{i=1}^{+\infty} a_i=
\begin{cases}
{a_1\over 1-q}\qquad, |q|<1\\  
\text{发散}\qquad, |q|\geq1
\end{cases} ~.
$$
\end{example}

\subsubsection{*指标集记法}

上面介绍的求和过程，指标集都是$\mathbb{Z}$与某个区间的交集（这样可以保证自增），对于某些不需要自增或无法使用自增的场合，可以直接给定指标集，求和过程记作：

\begin{equation}
\sum_{i\in I} a_i~.
\end{equation}
其中，$I$为指标集。

同时，若通过上下文可以明确指标集$I$或只为表述记号的运算特点而不强调指标集时，在不引起歧义的情况下，为了方便可以直接记作：

\begin{equation}\label{eq_SumSym_2}
\sum_i a_i.~
\end{equation}

这样使用时通常不会涉及指标的运算。

综上，\autoref{eq_SumSym_1} 到\autoref{eq_SumSym_2} 介绍了常用的几种求和符号的使用方法，它们各有特点，具体使用时需要根据情况进行选择，需要做到能认能写。

\subsection{运算技巧}

\subsubsection{乘法}
\begin{equation}
\sum_i C a_i = C\sum_i a_i~.
\end{equation}

\begin{equation}
\qty(\sum_i a_i) \qty(\sum_j b_j) = \sum_{i,j} a_i b_j = \sum_i \qty(a_i \sum_j b_j) = \sum_j \qty(b_j \sum_i a_i)~.
\end{equation}
其中 $\sum\limits_{i,j}$ 表示把所有不同的 $i,j$ 的组合都遍历一次，顺序任意。

\begin{equation}
\qty(\sum_i a_i)^2 = \sum_{i,j} a_i a_j = \sum_i a_i^2 + 2\sum_{i<j} a_i a_j~.
\end{equation}
可见在求和的相乘中，区分求和指标很重要，如果写成 $\sum\limits_{i,i} a_i a_i$ 将产生混乱。


\subsubsection{指标换元}

例如要把指标替换为 $j=i+1$，则
\begin{equation}
\sum_{i=m}^n a_i = \sum_{j=m+1}^{n+1} a_{j-1} ~.
\end{equation}
计算方法是，先用 $j$ 表示 $i$ 得 $i=j-1$， 然后求和号内部的 $i$ 可以全部代入 $j-1$。 对于上下标，也可以直接把 $j-1$ 代入并移项，例如下标代入后得 $j-1=m$，即 $j=m+1$。


总结一下，求和符号有下面几点明确的好处：

\begin{enumerate}
\item 提高表达的简洁性：使用求和符号可以大幅减少公式的长度和复杂度，便于书写和理解。
\item 注重通项公式的表达：求和符号通过明确的通项公式，着眼于求和这个过程更本质的内容，方便直观地理解和分析求和过程。
\item 适用范围广泛：求和符号不仅可以表达连续自然数的求和，还适用于包括等差数列、等比数列等在内的各种数列的求和情况，它甚至可以推广到无穷级数。
\item 快速化简：在熟练掌握求和符号的性质和技巧后，可以快速地对求和过程进行变形。
\item 便于计算机实现：求和符号与编程语言中的循环语句的条件一一对应，这使得计算过程可以容易转换为程序并通过计算机完成。
\item 与定积分的紧密联系：求和符号与定积分有着密切的关系，特别是在离散与连续的彼此转换中，它们之间可以快速相互转化。
\end{enumerate}

相信认真阅读完本页内容的你，已经感受到了前三点。其他的内容或许对高中的你而言会觉得不知所谓，但相信随着学习的深入，你会一点一点感受到这些好处，并受用终身。