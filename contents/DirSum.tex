% 直和（线性空间）
% keys 向量空间|子空间|直和空间|直和|补空间
% license Xiao
% type Tutor

\begin{issues}
\issueTODO
\issueOther{应当分为内直和和外直和}
\end{issues}

\pentry{子空间\upref{SubSpc}}{nod_6564}
\begin{definition}{直和}\label{def_DirSum_1}
令域 $\mathbb F$ 上的向量空间 $V_1$ 和 $V_2$ 为 $V$ 的两个子空间\upref{SubSpc}， 满足
\begin{equation}
V_1 \cap V_2 = \qty{0}~.
\end{equation}
且任意 ${v} \in V$ 都能表示为 $V_1$ 和 $V_2$ 中向量的线性组合， 即
\begin{equation}\label{eq_DirSum_2}
{v} = c_1 {v_1} + c_2 {v_2}
\qquad
({v_1} \in V_1,\ {v_2} \in V_2,\ c_1, c_2 \in \mathbb F)~,
\end{equation}
那么空间 $V$ 就是 $V_1$ 和 $V_2$ 的\textbf{直和空间}， 用\textbf{直和（direct sum）}运算记为
\begin{equation}
V = V_1 \oplus V_2~.
\end{equation}
我们把这两个子空间叫做\textbf{互补的}， 即 $V_2$ 是 $V_1$ 在 $V$ 中的\textbf{补空间（complement space）}， 反之亦然。
\end{definition}

事实上， 定义中\autoref{eq_DirSum_2} 也可以改为
\begin{equation}
{v} = {v_1} + {v_2} \qquad
({v_1} \in V_1,\ {v_2} \in V_2)~.
\end{equation}
即 “任意 ${v} \in V$ 都能表示为 $V_1$ 和 $V_2$ 中向量之和”。 这是因为 $c_1 v_1 \in V_1$， $c_2 v_2 \in V_2$。

直和空间 $V_1 \oplus V_2$ 中的所有向量可以分为三组， 分别是 $V_1$ 中的向量， $V_2$ 的向量， 以及只能表示为 $V_1$ 和 $V_2$ 中非零向量之和的向量。

\subsection{多个子空间的直和}
同理， 也可以把向量空间 $V$ 表示为多个子空间的直和
\begin{equation}
V = V_1 \oplus \dots \oplus V_n~.
\end{equation}
这可以理解为先把 $V_1, V_2$ 做直和， 再把所得空间与 $V_3$ 做直和， 等。 事实上， 根据向量加法的结合律， 容易证明直和也满足结合律， 即
\begin{equation}
(V_1 \oplus V_2) \oplus V_3 = V_1 \oplus (V_2 \oplus V_3)~,
\end{equation}
所以多个空间的直和也无需添加括号。

以下讨论为了方便只使用两个子空间， 但对多个子空间同样适用。

\subsection{直和空间的基底}
从基底的角度来看， 若 $V_1$ 和 $V_2$ 中分别有一组基底 ${\alpha_i}$ $(i = 1, \dots, N_1)$ 和 ${\beta_i}$ $(i = 1, \dots, N_2)$， 那么直和空间中 $V$ 的任意向量可以表示为
\begin{equation}\label{eq_DirSum_1}
{v} = \sum_i a_i {\alpha_i} + \sum_j b_j {\beta_j} \qquad (v\in V, a_i, b_i \in \mathbb F)~.
\end{equation}
\begin{theorem}{}\label{the_DirSum_1}
把 $V_1$ 的一组基底和 $V_2$ 的一组基底按任意顺序排列， 可以得到 $V_1 \oplus V_2$ 的一组基底。
\end{theorem}

证明： 由于已经有\autoref{eq_DirSum_1}， 我们只需要证明 $\alpha_1, \dots, \alpha_{N_1}, \beta_1, \dots, \beta_{N_2}$ 是线性无关的。 使用反证法， 若有不全为零的系数使
\begin{equation}
\sum_i a_i {\alpha_i} + \sum_j b_j {\beta_j} = 0~,
\end{equation}
令
\begin{equation}
u = \sum_i a_i {\alpha_i} = -\sum_j b_j {\beta_j}~,
\end{equation}
那么 $u \ne 0$ 且 $u \in V_1$ 且 $u \in V_2$。 这违反了\autoref{def_DirSum_1}。 证毕。

\begin{corollary}{}\label{cor_DirSum_1}
直和空间 $V = V_1 \oplus V_2$ 的维数等于向量空间 $V_1, V_2$ 的维数之和。
\end{corollary}
证明： \autoref{the_DirSum_1} 中的基底有 $N_1 + N_2$ 个。 证毕。

注意 $N_1, N_2$ 可以等于零， 零维线性空间仅由零向量一个元素构成。

\begin{example}{}\label{ex_DirSum_1}
若三维空间中有两个不共线的几何向量 $\bvec{v_1}, \bvec{v_2}$， 它们张成一个平面， 或二维子空间。 另有一个向量 $\bvec{v_3}$， 独自张成一条直线， 即一维空间。

若 $\bvec{v_3}$ 落在 $\bvec{v_1}, \bvec{v_2}$ 张成的平面内， 则三个向量的所有线性组合仍然在该平面内， 所以直和空间仍然是该平面。

若 $\bvec{v_3}$ 落在平面外， 则三个向量将会张成整个三维空间， 所以直和就是三维空间。 此时两个子空间在该三维空间中互补。
\end{example}

\begin{theorem}{唯一分解}
直和空间 $V = V_1 \oplus V_2$ 中， 对任意 $v \in V$ 都存在唯一的 $v_1 \in V_1$ 和 $v_2 \in V_2$ 使得
\begin{equation}\label{eq_DirSum_3}
v = v_1 + v_2~.
\end{equation}
\end{theorem}
证明： 根据\autoref{the_DirSum_1}， \autoref{eq_DirSum_1} 的分解中每个系数（坐标） $a_i, b_i$ 都是唯一的， 右边的两个求和就分别是\autoref{eq_DirSum_3} 的 $v_1$ 和 $v_2$， 所以 $v_1, v_2$ 也是唯一的。

\begin{exercise}{}
把以上定理和推论拓展到多个子空间的情况并证明。
\end{exercise}

\addTODO{补是不唯一的（\autoref{ex_DirSum_1}）}
\addTODO{给出一个空间和子空间， 如何求一个补空间？}
