% 直和与补空间（线性代数）
% keys 向量空间|子空间|直和空间|直和|补空间
% license Xiao
% type Tutor

\begin{issues}
\issueTODO
\end{issues}

\pentry{基底（线性代数）\nref{nod_VecSpn}}{nod_6564}

\enref{子空间的和}{SubSpc}是包含这些子空间的最小向量空间，但是，这种和的形式的表示方法是不唯一的。例如：设 $U_1=\langle e_1,e_2\rangle,U_2=\langle e_1,e_3\rangle, U=U_1+U_2$ ，则 $x=e_2\in U$ 可以表示为 $x=u_1+v_1$，其中 $u_1=e_2+e_1\in U_1,v_1=-e_1\in U_2$，也可以表示为 $x=u_2+v_2$，其中 $u_2=e_2\in U_1,v_2=0\in U_2$。 

于是就有这样的问题出现：是否存在子空间 $U_1,\cdots,U_m$ ，使得它们的和 $U=U_1+\cdots+U_m$ 的每一元素都有唯一的表示？即若 $u\in U$，那么 $u=\sum_{i}^m U_i,x_i\in U_i$ 是唯一的。 满足这一条件的子空间的和便被称为直和。

\addTODO{向量子空间的线性相关/无关：三种等价定义——0的唯一表示、向量的唯一分解、交集为0}



\begin{definition}{子空间的直和}\label{def_DirSum_1}
在域 $\mathbb F$ 上的向量空间 $V$ 上取 两个\enref{子空间}{SubSpc} $V_1$ 和 $V_2$， 满足
\begin{equation}
V_1 \cap V_2 = \qty{0}~.
\end{equation}
我们就说它们的张成子空间 $\opn{span} (V_1 \cup V_2)$ 记做 $V_1 \oplus V_2$

且任意 ${v} \in V$ 都能表示为 $V_1$ 和 $V_2$ 中向量的之和， 即
\begin{equation}\label{eq_DirSum_2}
v = v_1 + v_2
\qquad
(v_1 \in V_1,\ v_2 \in V_2)~,
\end{equation}
那么空间 $V$ 就是 $V_1$ 和 $V_2$ 的\textbf{直和空间}， 用\textbf{直和（direct sum）}运算记为
\begin{equation}
V = V_1 \oplus V_2~.
\end{equation}
我们把这两个子空间叫做\textbf{互补的}， 即 $V_2$ 是 $V_1$ 在 $V$ 中的\textbf{补空间（complement space）}， 反之亦然。
\end{definition}

子空间的直和也被称为内直和，而外直和指的是乘积空间（\autoref{sub_lnal06_1}）。

% Giacomo：已经修定义
% 事实上， 定义中\autoref{eq_DirSum_2} 也可以改为
% \begin{equation}
% {v} = {v_1} + {v_2} \qquad
% ({v_1} \in V_1,\ {v_2} \in V_2)~.
% \end{equation}
% 即 “任意 ${v} \in V$ 都能表示为 $V_1$ 和 $V_2$ 中向量之和”。 这是因为 $c_1 v_1 \in V_1$， $c_2 v_2 \in V_2$。

注意：$V_1 \oplus V_2 \neq V_1 \cup V_2$；直和空间 $V_1 \oplus V_2$ 中的非零向量可以分为三组， 分别是 $V_1$ 中的向量（$v_1 + 0_{V_2}$）， $V_2$ 的向量（$0_{V_1} + v_2$）， 以及只能表示为 $V_1$ 和 $V_2$ 中非零向量之和的向量。

一般来说补空间是不唯一的（\autoref{ex_DirSum_1}），除非 $V_1 = V$ 或者 $V_1 = \{0\}$。

\begin{example}{}\label{ex_DirSum_1}
若三维空间中有两个不共线的几何向量 $\bvec{v_1}, \bvec{v_2}$， 它们张成一个平面， 或二维子空间。 另有一个向量 $\bvec{v_3}$， 独自张成一条直线， 即一维空间。

若 $\bvec{v_3}$ 落在 $\bvec{v_1}, \bvec{v_2}$ 张成的平面内， 则三个向量的所有线性组合仍然在该平面内， 所以直和空间仍然是该平面。

若 $\bvec{v_3}$ 落在平面外， 则三个向量将会张成整个三维空间， 所以直和就是三维空间。 此时两个子空间在该三维空间中互补。由于 $\bvec{v_3}$ 有无限多种线性无关的取法，$\bvec{v_1}, \bvec{v_2}$ 张成的平面也有无限多个补空间。
\end{example}

\subsection{多个子空间的直和}

同理， 也可以把向量空间 $V$ 表示为有限多个子空间的直和
\begin{equation}
V = V_1 \oplus \dots \oplus V_n~.
\end{equation}
这可以理解为先把 $V_1, V_2$ 做直和， 再把所得空间与 $V_3$ 做直和，以此类推。 事实上， 根据向量加法的结合律， 容易证明直和也满足结合律， 即
\begin{equation}
(V_1 \oplus V_2) \oplus V_3 = V_1 \oplus (V_2 \oplus V_3)~,
\end{equation}
所以多个空间的直和也无需添加括号。

以下讨论为了方便只使用两个子空间， 但对多个子空间同样适用。

\subsection{直和空间的基底}

从基底的角度来看， 若 $V_1$ 和 $V_2$ 中分别有一组基底 $\{\alpha_i\}_i$ 和 $\{\beta_j\}_j$， 那么直和空间中 $V$ 的任意向量可以表示为

\begin{equation}\label{eq_DirSum_1}
{v} = \sum_i a_i {\alpha_i} + \sum_j b_j {\beta_j} \qquad (v\in V, a_i, b_i \in \mathbb F)~.
\end{equation}
\begin{theorem}{}\label{the_DirSum_1}
把 $V_1$ 的一组基底和 $V_2$ 的一组基底取并集， 可以得到 $V_1 \oplus V_2$ 的一组基底。
\end{theorem}

证明： 由于已经有\autoref{eq_DirSum_1}， 我们只需要证明 $\alpha_1, \dots, \alpha_{N_1}, \beta_1, \dots, \beta_{N_2}$ 是线性无关的。 使用反证法， 若有不全为零的系数使
\begin{equation}
\sum_i a_i {\alpha_i} + \sum_j b_j {\beta_j} = 0~,
\end{equation}
令
\begin{equation}
u = \sum_i a_i {\alpha_i} = -\sum_j b_j {\beta_j}~,
\end{equation}
那么 $u \ne 0$ 且 $u \in V_1$ 且 $u \in V_2$。 这违反了\autoref{def_DirSum_1}。 证毕。

\begin{corollary}{}\label{cor_DirSum_1}
如果 $V_1, V_2$ 是有限维度的，直和空间 $V_1 \oplus V_2$ 的维数等于 $V_1, V_2$ 的维数之和。
\end{corollary}
证明： \autoref{the_DirSum_1} 中的基底有 $N_1 + N_2$ 个。 证毕。

注意 $N_1, N_2$ 可以等于零， 零维线性空间仅由零向量一个元素构成。

\begin{theorem}{唯一分解}
直和空间 $V = V_1 \oplus V_2$ 中， 对任意 $v \in V$ 都存在唯一的 $v_1 \in V_1$ 和 $v_2 \in V_2$ 使得
\begin{equation}\label{eq_DirSum_3}
v = v_1 + v_2~.
\end{equation}
\end{theorem}
证明： 根据\autoref{the_DirSum_1}， \autoref{eq_DirSum_1} 的分解中每个系数（坐标） $a_i, b_i$ 都是唯一的， 右边的两个求和就分别是\autoref{eq_DirSum_3} 的 $v_1$ 和 $v_2$， 所以 $v_1, v_2$ 也是唯一的。

\begin{exercise}{}
把以上定理和推论拓展到多个子空间的情况并证明。
\end{exercise}

\addTODO{给出一个空间和子空间， 如何求一个补空间？参考商空间一文}

