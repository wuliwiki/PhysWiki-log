% 群的自由积
\pentry{自由群\upref{FreGrp}}

将自由群的概念推广，即可得到两个群之间的自由积的概念。

\subsection{自由积的构造}

给定两个群 $G$ 和 $H$，取集合 $G\cup H$ 上的自由群 $F(G\cup H)$，则 $F(G\cup H)$ 的元素形如 $x_1x_2\cdots x_k$ 的有限长字符串，其中 $k$ 是某个正整数，各 $x_i$ 都是 $G\cup H$ 的元素。

在 $F(G\cup H)$ 上定义一个等价关系：如果字符串 $g_1g_2\cdots g_k$ 中各 $g_i\in G$，那么令 $g_1g_2\cdots g_k\sim g_1\cdot g_2\cdot\cdots\cdot g_k$，即把该字符串等同于各字母在群 $G$ 中运算的结果；同样地把字母都是 $H$ 中元素的字符串等同于这些元素在群 $H$ 中的运算结果；把 $G$ 和 $H$ 的单位元等同于空词。比如说，在整数加法群 $\mathbb{Z}$ 中，把字符串 $123$ 等同于数字 $1+2+3$ 所代表的字符串，即只有一个字母 $6$ 的字符串。

这样一来，商群 $F(G\cup H)/\sim$ 中的字符串就形如 $g_1h_1g_2h_2\cdots g_kh_k$、$g_1h_1g_2h_2\cdots g_k$、$h_1g_1h_2g_2\cdots h_kg_k$ 或 $h_1g_1h_2g_2\cdots h_k$ 的字符串，或者简单来说，有限长的 $g$ 和 $h$ 的交替字符串，其中 $g, g_i\in G$，$h, h_i\in H$。

称商群 $F(G\cup H)/\sim$ 为群 $G$ 和群 $H$ 的\textbf{自由积（free product）}，记为 $G*H$。

\subsection{共合积}
\begin{definition}{共合积}
设有三个群 $F, G, H$，且有群同态 $\phi:F\rightarrow G$ 和 $\varphi:F\rightarrow H$，那么可以定义 $G$ 和 $H$ 关于 $F$ 的\textbf{共合积} $G*_FH$ 如下：

$G*_FH$ 是 $G*H$ 的商集，$G*H/\sim$，其中等价关系为：$\forall f\in F, \phi(f)\sim\varphi(f)$。
\end{definition}

简单来说，$G*_FH$ 的元素依然是 $H$ 和 $G$ 中元素交替排列的字符串，但是在给定同态 $\phi:F\rightarrow G$ 和 $\varphi:F\rightarrow H$ 时，把所有 $\phi(f)\sim\varphi(f)$ 都看成等价元素。




既然是自由群上规定等价关系得来的，共合积也可以用描述为自由群的商群。




\begin{theorem}{}

给定互不相交的群$G$和$H$，再给定群$F$和\textbf{群同态}$\varphi:F\to G$和$\phi: F\to H$。

令$S$为$G*H$上全体形如$A\varphi(x)\phi(x^{-1})A^{-1}$和$A\phi(x)\varphi(x^{-1})A^{-1}$的元素构成的集合，其中$A\in G*H$，$x\in F$，则由$S$生成的$G*H$的子群$\langle S \rangle$是$G*H$的\textbf{正规子群}。

进一步有$G*_FH=G*H/\langle S \rangle$。

\end{theorem}




\textbf{证明}：

$\langle S \rangle \lhd G*H$很好证，从形式上就可以，此处只举一例权作证明思路：对于$A\varphi(x)\phi(x^{-1})A^{-1}B\phi(y)\varphi(y^{-1})B^{-1}\in \langle S \rangle$，任取$C\in G*H$，则
\begin{equation}
\begin{aligned}
    &CA\varphi(x)\phi(x^{-1})A^{-1}B\phi(y)\varphi(y^{-1})B^{-1}C^{-1} \\
    ={}& 
    CAC^{-1}C\varphi(x)\phi(x^{-1})C^{-1}CA^{-1}C^{-1}CBC^{-1}C\phi(y)\varphi(y^{-1})C^{-1}CB^{-1}C^{-1}\\
    ={}& 
    (CAC^{-1}C)\varphi(x)\phi(x^{-1})(CAC^{-1}C)^{-1}(CBC^{-1}C)\phi(y)\varphi(y^{-1})(CBC^{-1}C)^{-1}\\
    \in{}& \langle S \rangle~.
\end{aligned}
\end{equation}

下证$G*H/\langle S \rangle \cong G*_F H$。

定义满同态$\sigma:G*H\to G*_FH$，使得$\sigma$限制在$G$或$H$上都是恒等映射。

取$G*H\subseteq G*H*F$中的一个已化简的词$W$，则$\sigma(W)$等价于把$W$中能替换为$F$中元素的字母都替换了。替换后，如果有来自$F$的字母相邻，将它们进行$F$的群运算，再把所得新词中来自$F$的字母都替换回$G$或$H$中，化简，所得结果依然等价于\footnote{比如令$W=g_1h_1g_2h_2g_3$，替换后可能得到$g_1h_1x_1x_2g_3$，如果$x_1x_2=x_3$，则$W$还等价于$g_1h_1x_3g_3$，这时候我们再把$x_3$替换为$\varphi(x_3)$或者$\phi(x_3)$，将它和$g_3$或者$h_1$运算后得到剩下的词。}
$W$。$G*H$中任何等价于$W$的词都可以按这个程序得出。

如果$W$中没有任何字母可以替换，那么$W$无法化简为空字。

于是，如果$\sigma(W)=1$，则$W$中必有可以替换进$F$的字母。挑其中一个这样的字母如$a=\varphi(x)$，则可将其补充为$a\phi(x^{-1})\phi(x)$，使得$W$作为自由积$G*H$不变。补充后，保持$a\phi(x^{-1})$部分不动，剩下部分按\textbf{自由积}的定义化简。接下来，在剩下的可替换进$F$的字母中挑一个，重复上述\textbf{补充、化简的程序}
\footnote{举例而言，设$f_i\in F$，令$\varphi(f_i)=a_i, \phi(f_i)=b_i$，而$W=\cdots a_1b_2a_3 \cdots$。先对$a_1$进行程序，所得结果为$\cdots a_1b_1^{-1}b_1b_2a_3 \cdots $，注意此时$b_1b_2$是一个元素。接下来对$b_1b_2$进行程序，得到$\cdots a_1b_1^{-1}b_1b_2a_2^{-1}a_1^{-1}a_1a_2a_3 \cdots $；再对$a_1a_2a_3$进行程序，得到$\cdots a_1b_1^{-1}b_1b_2a_2^{-1}a_1^{-1}a_1a_2a_3b_3^{-1}b_2^{-1}b_1^{-1}b_1b_2b_3 \cdots $。最后这一步的最后三个字母$b_1b_2b_3$要乘进后面的省略号里，该省略号的第一个字母确实是$H$的元素。
}。

可替换字母乘以一个不可替换字母，结果一定是不可替换的\footnote{原因是子群中的元素乘以子群外的元素一定在子群外，这可由消去律得。这里的子群就是$\varphi(F)$和$\phi(F)$。}。

将上述步骤最后所得的词按\textbf{共合积}的定义化简，即先将所有形如$\varphi(x)\phi(x^{-1})$和$\phi(x)\varphi(x^{-1})$的元素化为$1$，然后将所得结果按\textbf{自由积}的定义化简。此时如果所得结果是$1$，那么$W$确实是$S$中的元素相乘而得；如果不是，那么它已经不可再施行上述\textbf{补充、化简的程序}，从而$W$不可能等价为$1$。

综上，$\opn{ker}\sigma\subseteq \langle S \rangle $

又显然有$\langle S \rangle \subseteq \opn{ker}\sigma$，从而$\opn{ker}\sigma=\langle S \rangle$。由\textbf{群同态基本定理}即可得证。

\textbf{证毕}。




$\langle S \rangle$实际上是$G*H$中包含形如$\varphi(x)\phi(x^{-1})$和$\phi(x)\varphi(x^{-1})$的元素的最小正规子群。你可能会疑问，如果包含这些元素的最小正规子群是$N$，那么任取$A, B\in G*H$，应有
\begin{equation}
\begin{aligned}
&\varphi(x)\phi(x^{-1}), \varphi(y)\phi(y^{-1})\in N \\
\implies{}& A\varphi(x)\phi(x^{-1})A^{-1}\in N\\
\implies{}& \varphi(y)\phi(y^{-1})A\varphi(x)\phi(x^{-1})A^{-1}\in N\\
\implies{}& B\varphi(y)\phi(y^{-1})A\varphi(x)\phi(x^{-1})A^{-1}B^{-1}\in N
\end{aligned}
~.
\end{equation}
最右端这个词似乎不是直接由$S$的元素相乘而得的，但它其实是的：
\begin{equation}
\begin{aligned}
&B\varphi(y)\phi(y^{-1})A\varphi(x)\phi(x^{-1})A^{-1}B^{-1} \\
={}& \qty(B\varphi(y)\phi(y^{-1})B^{-1})\qty(BA\varphi(x)\phi(x^{-1})A^{-1}B^{-1})
\end{aligned}
~.
\end{equation}















