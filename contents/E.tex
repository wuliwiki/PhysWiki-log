% 自然对数底（简明微积分）
% 微积分|自然对数|自然对数底|e

\pentry{函数的极限\upref{FunLim}， 对数函数}
微积分中有一个重要的极限，极限值是一个无理数，叫做\textbf{自然对数底}，记为\footnote{为了与其他变量区分， 本书使用正体字母表示自然对数底。} $\E$。 它是一个无限不循环小数
\begin{equation}\label{E_eq1}
\E \equiv \lim_{n \to +\infty} \left(1 + \frac{1}{n}\right)^n = 2.7182818284590452\dots
\end{equation}
% 注意这里没有指定 $x\to 0$ 的方向， 即无论 $x$ 正数或负数该式都成立。
% Giacomo: 没有人会用这么复杂的方法定义e的

$\E$ 也可以用无穷级数定义为
\begin{equation}\label{E_eq2}
\E \equiv \sum_{n=0}^\infty \frac{1}{n!} = 1 + 1 + \frac{1}{2} + \frac{1}{6} + \frac{1}{24} +\dots
\end{equation}
我们把以 $\E$ 为底的对数函数 $\log_e x$ 叫做\textbf{自然对数函数}， 记为 $\ln(x)$ 或者直接用 $\log(x)$。 以后会证明以上两种定义是等效的。
\addTODO{链接}

令 $k$ 为常数， 可以把\autoref{E_eq1} 拓展得
\begin{equation}\label{E_eq4}
\lim_{n \to +\infty} \left(1 + \frac{k}{n}\right)^{\frac{n}{k}} = \E
\qquad \Longrightarrow\qquad
\lim_{n \to +\infty} \left(1 + \frac{k}{n}\right)^n = \E^k
\end{equation}
当 $k = -1$ 时得
\begin{equation}\label{E_eq3}
\lim_{n \to +\infty} \left(1 - \frac{1}{n}\right)^n = \frac{1}{\E} = 0.36787944117144232\dots
\end{equation}

\subsection{数值验证}
等价的，我们可以取$n = \frac{1}{x}$，得到
\begin{equation}\label{E_eq5}
\lim_{x \to 0} \left(1 + x\right)^{\frac{1}{x}} = \E
\end{equation}
这么做的好处是考虑$0$点\footnote{注意这里没有指定 $x\to 0$ 的方向， 实际上无论 $x$ 正数或负数该式都成立。}而不是$+\infty$处的定义，而且可以定义在整个实数轴上（$x \neq -1$），方便作图；坏处是用到了“开$x$次方”这种只能使用计算机计算的复杂运算。

这里可以用数值的方法验证\autoref{E_eq5}， 首先我们可以画出 $(1+x)^{1/x}$ 在原点附近的函数图， 注意当 $x = -1$ 时， 该函数无定义， 但这并不妨碍极限的存在。 可以看到， 无论 $x$ 从左边还是右边趋近于原点（即左极限和右极限）， 结果都相等。
\begin{figure}[ht]
\centering
\includegraphics[width=8cm]{./figures/E_1.pdf}
\caption{$(1+x)^{1/x}$ 的函数图} \label{E_fig1}
\end{figure}

\autoref{E_tab1} 用数值计算验证\autoref{E_eq1} 的右极限。
\begin{table}[ht]
\centering
\caption{极限 $\E$ 数值验证（保留 6 位有效数字）}\label{E_tab1}
\begin{tabular}{|c|c|c|c|c|c|c|}
\hline
$x$ & $10^{-1}$ & $10^{-2}$ & $10^{-3}$ & $10^{-4}$ & $10^{-5}$ & $10^{-6}$ \\
\hline
$(1 + x)^{1/x}$ & $2.59374$ & $2.70481$ & $2.71692$ & $2.71815$ & $2.71827$ & $2.71828$ \\
\hline
\end{tabular}
\end{table}

为什么说自然对数底是 “自然” 的呢？ 我们来看一个例子：

\begin{example}{银行复利}
如果一笔数量为 $x$ 的钱存入某银行后， 银行的年利率是 $\lambda$， 那么一年后取出来连本带利共得 $(1+\lambda)x$。 假设银行规定， 在 $t$ 年时（$t$ 取任意正实数） 取出来， 则利率按照 $\lambda t$ 来计算。 例如半年取出共得 $(1+\lambda/2)x$， 若取出立刻存入， 再过半年连本带利为
\begin{equation}
(1+\lambda/2)^2 x = (1 + \lambda + \lambda^2/4)x > (1 + \lambda) x
\end{equation}
比直接存一年要多。 可以证明， 存取越频繁， 一年的总利息就越多， 简单来说这是因为充分地进行了 “利滚利”， 也就是复利。

如果不停地存取， 且每次存取间隔时间取极限 $\Delta t \to 0$， 那么 $t$ 年后连本带利的极限是多少呢（$t$ 取 $\Delta t$ 的整数倍）？ 首先 $t$ 年后存取的次数为 $t/\Delta t$， 利用\autoref{E_eq4} 得
\begin{equation}
x_t = \lim_{\Delta t\to 0}(1 + \lambda \Delta t)^{t/\Delta t} x
= \qty[\lim_{\Delta t\to 0}(1 + \lambda \Delta t)^{1/(\lambda \Delta t)}]^{\lambda t} x
= \E^{\lambda t} x
\end{equation}
这样自然对数底就 “自然” 地出现了。

现实中， 活期利息几乎都是按照 $\E^{\lambda t}$ 来计算的， 这就可以避免不必要的存取。 注意这时的实际年利率（$t = 1$）就是 $\E^\lambda - 1$ 而不是 $\lambda$。 在泰勒展开\upref{Taylor}中， 有
\begin{equation}
\E^\lambda - 1 = \lambda + \frac{\lambda^2}{2!} + \frac{\lambda^3}{3!} + \dots
\end{equation}
且当 $\lambda$ 很小时， $\E^\lambda - 1 \approx \lambda$。
\end{example}

另一个彩票的例子见\autoref{RandF_ex1}~\upref{RandF}。
