% 直积和半直积（群）
% keys 群|直积|笛卡尔积|直和|半直和
% license Xiao
% type Tutor

\pentry{正规子群\nref{nod_NormSG}}{nod_28ef}

\addTODO{群的直积和半直积都应该分为“内”（子群间的运算）和“外”（两个群间的运算）}

\subsection{直积}

群的直积，是在群作为集合的\enref{笛卡尔积}{CartPr}上，由群运算自然导出的一个群。

\begin{definition}{两个群的直积}
给定群 $G$ 和 $H$，群运算的符号省略。在集合 $G\times H$ 上定义运算：对于任意 $(g_i, h_i)\in G\times H$，有 $(g_1, h_1)(g_2, h_2)=(g_1g_2, h_1h_2)$。集合 $G\times H$ 配合以上定义的运算，构成一个群，称为群 $G$ 和 $H$ 的\textbf{直积（direct product）}。
\end{definition}

容易看出，两个群直积的单位元是 $(e, e)$——注意这里的两个 $e$ 分属不同的群，通常是不同的元素。

这个定义分割开了参与直积的不同群的运算，因此可以很方便地直接推广到任意多个群的直积：

\begin{definition}{任意多个群的直积}
给定任意多个群 $\{H_i\}$，在这些群作为集合的笛卡尔积上，各分量运算分别进行运算，且遵循各自所属群的运算规则。该笛卡尔积配合该运算规则构成一个群，称为这些群的\textbf{直积（direct product）}，记为 $\bigotimes_iH_i$ 或 $\prod_iH_i$。
\end{definition}

% 在群论中还有一个和直积很类似的概念，常使人混淆，这就是群的\textbf{直和}。直和实际上是直积的一个特例：任意给定群，都可以使用这些群来构造直积，但是直和指的是已经给定了一个群，使用它的特定子群来生成它。% 没有听说过这种说法，更常见的说法应该是，内直积和外直积

\begin{definition}{群的直和}
当 $G$ 和 $H$ 都是交换群时，我们也称 $G\times H$ 为这两个群的\textbf{直和（direct sum）}，此时也可以把它表示为 $G+H$。另外，任意个交换群的直积 $\bigotimes_iH_i$ 也可以表示为 $\bigoplus_iH_i$ 或 $\sum_iH_i$。
\end{definition}

直和这一术语的来源不难理解：交换群的群运算通常被称为“加法”。

\begin{theorem}{商群的直积}\label{the_GrpPrd_1}
任意给定群 $G$ 和 $K$，并分别给出它们的一个正规子群 $H\triangleleft G$ 和 $J\triangleleft K$。那么 $(G\times K)/(H\times J)\cong G/H\times K/J$。
\end{theorem}

\autoref{the_GrpPrd_1} 的证明用一个示意图即可直观地展示出来。

\begin{figure}[ht]
\centering
\includegraphics[width=14cm]{./figures/7576f29d8bc51df2.pdf}
\caption{\autoref{the_GrpPrd_1} 的示意图。群 $G$ 和 $K$ 被表示为两条相互垂直的虚线，$G\times K$ 就是它们生成的平面。$H$ 和 $J$ 被表示为两条线段，$H\times J$ 就是作图中间那个方形区域。右图用垂直的虚线把 $G$ 区分成若干区域，就是 $G/H$ 的元素；同理，水平虚线划分出了 $K/J$ 的元素。从图示可以很容易看出，$(G\times K)/(H\times J)$ 的元素就是虚线划分出来的矩形区域们，而这些矩形区域正好是线段的笛卡尔积，也就是 $G/H\times K/J$。} \label{fig_GrpPrd_1}
\end{figure}
\subsection{内直积与外直积}
在引入内直积的概念之前，我们先看一个例子。

设$G=G_1\times G_2$，对于任意$g_i\in G_1,h_i\in G_2$，可以验证$N_1=(g_i,e_2)\vartriangleleft G_1,N_2=(e_1,h_i)\vartriangleleft G_2$，其中$e_1,e_2$分别是$G_1,G_2$的单位元。易见$N_1\cap N_2=\{e\}$，且从运算角度上看$G=N_1N_2$，因此称$N_1N_2$是$G$的内直积，所选取的元素为$G$的“分解”表示。

又比如三维线性空间$V$，任意向量都可以分解为基矢组的线性表示，以$\{\bvec i,\bvec j,\bvec k\}$为基矢组，则三个正规子群分别为$(x,0,0),(0,y,0)$和$(0,0,z)$。
\begin{definition}{}
设$N_i(i=1,2...k)$是群$G$的\textbf{正规子群},且满足
\begin{itemize}
\item $G=N_1N_2...N_k$；
\item $N_i\cap N_1N_2...N_{i-1}N_{i+1}..N_k=\{e\}$对一切$i=1,2...k$都成立；
\end{itemize}
则称$G$是$N_i(i=1,2...k)$的内直积。
\end{definition}
在满足题设和条件一的前提下，\textbf{条件二}分别等价于下面两种情况：
\begin{enumerate}
\item \textbf{$G$的单位元有唯一分解表示}，即若存在$g_i\in N_i$且$g_1g_2...g_k=e$，则$g_i=e_i$。
\item \textbf{$G$的任意群元都有唯一表示}，即若$g_1g_2...g_k=h_1h_2...h_k$则$g_i=h_i$对任意$g_i,h_i\in N_i$恒成立。
\end{enumerate}
我们来尝试证明这一点。

首先证明条件二能推出情况一。
由于对于$i\neq j$有$N_i\cap N_j\subset N_j\cap N_1N_2...N_{j-1}N_j...N_k=\{e\}$，则任意两个不同的正规子群其交集只有单位元，且有$g_ig_j=g_jg_i$\footnote{根据消去律只需要证明$g_ig_jg_i^{-1}g_j^{-1}=e$，而左边元素属于$N_i\cap N_j$，得证。}。因此若$g_1g_2...g_k=e$，我们有
\begin{equation}
g_1=g_k^{-1}g_{k-1}^{-1}...g_2^{-1}=N_1\cap N_2N_3...N_k=e~,
\end{equation}
，其余元素同理可证。在这个证明里，我们可以看到关键利用的是元素可交换性。

然后证明情况一能推出情况二。设$i\neq j,g\in N_i\cap N_j=g'_i=g'_j$，其中$g'_i\in N_i,g'_j\in N_j$，则$g_ig_j^{-1}=e$，填充该等式后我们有$e...g_i...g_j^{-1}...e=e$，则由单位元的分解唯一性得$g_i=g_j=e$，即$N_i\cap N_j=e$，于是$g_ig_j=g_jg_i$。


若$g_1g_2...g_k=h_1h_2...h_k$，我们有
\begin{equation}
(g_1h_1^{-1})(h_2g_2^{-1})(h_3g_3^{-1})...h_kg_k^{-1}=e~,
\end{equation}
由分解唯一性得$g_i=h_i$。

然后我们来证明情况二能推出条件二。设$g=N_i\cap N_1N_2...N_{i-1}N_{i+1}...N_k$，则设存在一系列群元使得$g=g_i=g_1g_2...g_{i-1}g_{i+1}...g_k$。左右填充单位元后，利用表示的唯一性可得：任意群元都为单位元，于是条件二得证。


实际上，\textbf{内直积与外直积在同构意义上是相同的，}内直积实际上是构建了以若干不相交子群为正规子群的群。
\begin{theorem}{}
若$N_i\triangleleft G(i=1,2...k)$，且$G$是$N_i$的内直积，则$G\cong N_1\times N_2...N_k$。
\end{theorem}
\textbf{证明：}
依旧设$g_i\in N_i$，由于$G=N_1N_2...N_k$，我们可以构建映射使得$f(g_1g_2...g_k)=(g_1,g_2,...,g_k)$，易见这是一个满射。由内直积的定义可知，对于$i\neq j$，有$g_ig_j=g_jg_i$。因而，$(g_1g_2...g_k)(h_1h_2...h_k)=(g_1h_1)(g_2h_2)...(g_nh_n)$，所以
\begin{equation}
\begin{aligned}
f\qty((g_1g_2...g_k)(h_1h_2...h_k))&=f((g_1h_1)(g_2h_2)...(g_nh_n))\\
&=(g_1h_1,g_2h_2,...,g_nh_n)\\
&=f(g_1g_2...g_k)f(h_1h_2...h_k)~.
\end{aligned}
\end{equation}
，因此$f$确实是同态映射。由单位元的分解唯一性可知$\opn{ker}f=\{e\}$，因此$f$是单射。综上所述，$f$是同构映射，定理得证。


\subsection{半直积}

群的直积可以推广为以下概念：

\begin{definition}{半直积}
给定群 $G$，如果有 $G$ 的一个\textbf{正规子群}$N$ 和一个\textbf{子群}$H$，使得 $G = N H$\footnote{就是说，集合 $G= \{n h \mid n \in N, h\in H\}$。}，并且 $N \cap H = \{e\}$，那么我们称 $G$ 是 $N$ 和 $H$ 的\textbf{半直积（semi-direct product）}，记为 $G = N \rtimes H$。
\end{definition}

可以注意到，直积是半直积的一种，只要把 $\{(g, e)\}$ 和 $\{g\}$ 等同、把 $\{(e, h)\}$ 和 $\{h\}$ 等同即可。这样，尽管本节中直积是用“运算的笛卡尔积”来定义的，而半直积是用“已有的群运算”来定义的，这两个在特定情况下是等价的。

半直积不一定是内直积，这是因为定义中我们只要求参与运算的两个群中的一个为正规子群，而如果两个群 $G$ 和 $H$ 进行直积，那么容易证明它们俩都是群 $G\times H$ 的正规子群。从这也可以看出来为什么此处半直积的定义要先给出 $G$，而不是像直积的定义一样直接用两个群的乘积得到 $G\times H$。

事实上，我们也可以用以上定义半直积的语言来描述直积：给定群 $G$，如果有 $G$ 的两个正规子群 $H$ 和 $N$，满足 $H\cap N=\{e\}$，并且 $G=NH$，那么称 $G$ 是 $N$ 和 $H$ 的直积，记为 $G=N\times H$。

半直积的定义也可以不依赖于预先给定的 $G$，只是这样会稍显复杂一些：

\begin{definition}{半直积}
给定群 $N$ 和 $H$，并且有同态：$f:H\rightarrow \opn{Aut}N$。在笛卡尔积集合 $N\times H$ 上定义运算：对于 $n_i\in N, h_i\in H$，有 $(n_1, h_1)\cdot(n_2, h_2)=(n_1\cdot f_{h_1}(n_2), h_1\cdot h_2)$。集合 $N\times H$ 配合这个运算可以得到一个群，称为\textbf{群}$N$\textbf{和群}$H$\textbf{关于同态}$f$\textbf{的半直积}，记为 $N\rtimes_fH$。
\end{definition}

我们梳理一下这个定义。为了定义半直积，我们要用到三个部分，即两个群 $N$ 和 $H$，再加上一个同态 $f$。要注意，$f$ 不是 $H$ 到 $N$ 的同态，而是到 $\opn{Aut} N$ 的，后者是 $N$ 的\textbf{自同构群}。也就是说，每个 $f(h)$ 表示一个 $N\rightarrow N$ 的自同构映射，为了方便，简写为 $f_h$。

\addTODO{如何理解两个 半直积 之间的一致性？}












