% 指标与求和约定
% keys 赝指标|伪指标|pseudo index|真指标|real index|矩阵|指标|爱因斯坦求和|线性代数|求和符号|下标|上标|指标表示|index notation|Einstein Summation Convention
% license Xiao
% type Tutor

% \begin{issues}
% \end{issues}


\pentry{矩阵\nref{nod_Mat}}{nod_6ee9}



\subsection{引入的动机}


\textbf{指标表示}和\textbf{爱因斯坦求和约定}是传统\textbf{矩阵}和\textbf{矩阵乘法运算}的替代表示。

矩阵本质上是对线性性质\footnote{所谓线性性质，可以简单理解为给定的“乘法”和“加法”的“分配性”。比如
考虑实数的乘法和加法，那么实函数$f(x)=kx$就具有线性性，因为对于任何实数$a, b, x, y$都有$f(ax+by)=af(x)+bf(y)$。但$g(x)=kx+1$和$h(x)=x^2$就不具有线性性。}的表示，而凡能用到矩阵和矩阵乘法的地方都可以应用爱因斯坦求和约定，不仅能大大简化几乎所有表达，而且也易于推广到在传统矩阵表示法看来非常复杂的情况。

本节仅讨论矩阵及其指标表示，并不讨论各矩阵会被赋予什么意义（用于表示向量的坐标、线性变换的坐标、内积的坐标等）。在不同的语境下，矩阵可能用来表示向量的坐标，线性映射的坐标，内积的坐标，乃至更多情况，具体问题应具体分析。


%在线性代数中，我们通常研究的是向量、对偶向量和线性映射等对象，也就是最多涉及二阶及以下的张量。在这种情况下，纸面上可以很方便地写出低阶张量的矩阵形式，毕竟零阶张量的坐标就是一个 $1\times 1$ 矩阵、一阶张量的坐标就是一个 $1\times n$ 或 $n\times 1$ 矩阵，二阶张量的坐标就是一个 $n\times n$ 矩阵。

%在张量代数和一切需要大量应用张量的理论，如微分几何中，我们不可避免地要经常涉及高阶的张量，它们的坐标就没法用矩阵表示。我们当然可以把矩阵拓展为立体阵等概念，但随着阶数上升，这种表示法的复杂程度几何级增加；我们也可以使用\textbf{张量}\upref{Tensor}文章中所提过的向量矩阵的方法，比起立体阵要清楚一些，但套娃式的表达方式也对理解一个张量的性质造成了障碍。

%爱因斯坦求和约定正是为了简洁地表达高阶张量的坐标运算而存在的。

\subsection{矩阵的指标表示法}


\textbf{指标（index）表示法}用于表示\textbf{矩阵}。具体来说，对于二维的矩阵，\textbf{上标表示行数}，\textbf{下标表示列数}，比如 $a^1_2$ 就表示“第 $1$ 行第 $2$ 列的$a$”。进一步，我们也可以直接用指标\textbf{不定}的 $a^i_j$ 来表示一个二维矩阵。类似地，$a^i$是列矩阵，$a_i$是行矩阵。

$a^i_j$中，矩阵元素是各不同的$a$。任何东西都可以用作矩阵元素，包括矩阵本身。因此，$a^{i}_{\phantom{1}j}$表示以$a^i$作矩阵元构成的行矩阵，而$a^i$本身是一个列矩阵——也就是说$a^i_{\phantom{1}j}$是一个“列矩阵的行矩阵”。同理，$a^{\phantom{1}i}_j$是一个“行矩阵的列矩阵”。谁套谁取决于指标的先后顺序。不过，在不至于混淆的情况下，可以把$a^i_j, a^i_{\phantom{1}j}, a^{\phantom{1}i}_j$都视为等价，即无视上下指标之间的先后顺序；但是这种情况下通常也要区分上指标之间或者下指标之间的先后顺序，比如$T_{ijk}$中，$i$就是最靠前的下指标。

在 “张量\upref{Tensor}” 文章的\autoref{eq_Tensor_3} 中我们引入了“行矩阵的行矩阵”这一类\textbf{套娃}概念来描述二阶张量，而指标表示法可以极为简洁地表达“套娃矩阵”——比如说，一个“列矩阵的列矩阵”就可以表示为 $a^{ij}$，各 $a^{ij}$ 就表示这个矩阵中“第 $i$\textbf{列}的矩阵的第 $j$\textbf{列}的元素”。

由此可见，张量\upref{Tensor}文章中想方设法进行的复杂表示，都可以简洁地用上下指标来描述。“行矩阵的行矩阵”这样套娃的表达，用指标来表示其实就是 $m_{ij}$，两个下标。在这里，$m_{ij}$ 中的 $i$ 表示第 $i$ 个行矩阵，而 $j$ 表示这个行矩阵里的第 $j$ 个元素——由此可见，两个下标的地位是不一样的，先后次序很重要。因此在现代数学和物理的文献中，为了减少歧义，也通常明确地写出两个坐标的次序，比如 $m^{i\phantom{1}k}_{\phantom{1}j}$ 就表示三个指标的优先顺序分别是 $i$、$j$、$k$。




\subsection{矩阵乘法与求和约定}




为了把矩阵乘法的规则推广到上下指标的描述法，我们有了爱因斯坦求和约定。


设有两个矩阵$\bvec{A}=A^i_j$和$\bvec{B}=B^i_j$，如果$\bvec{AB}=\bvec{C}=C^i_j$，那么$C^i_j$应该等于多少？按照指标表示法的定义，$C^i_j$就是$\bvec{C}$的第$i$行、第$j$列的元素；按照矩阵乘法的定义，它是$\bvec{A}$的第$i$行和$\bvec{B}$的第$j$列的元素对应相乘再求和的结果，也就是
\begin{equation}
C^i_j = \sum_k A^i_k B^k_j~. 
\end{equation}
反过来，如果$\bvec{BA}=\bvec{D}=D^i_j$，那么应有
\begin{equation}
D^i_j = \sum_k B^i_k A^k_j~. 
\end{equation}


我们发现，计算矩阵乘法的时候，总是有一个指标\textbf{出现了两次}，并且\textbf{总是}一次出现在\textbf{上标}、一次出现在\textbf{下标}，而这个重复出现的指标要求和，导致\textbf{没有出现在最终结果里}。

由此，我们引入爱因斯坦求和约定：就是：\textbf{当式子中任何一个指标出现了两次，并且一次是上标、一次是下标时，那么该式表示的实际上是对这个角标一切可能值的求和}。换言之，如果角标 $i$ 作为上标和下标各出现了一次，那么式子相当于添加了一个关于 $i$ 的求和符号 $\sum_i$。


同时，由于重复的指标没有出现在最终结果里，它不承担“表达行数、列数”的功能，因此被称为\textbf{赝指标（pseudo index）}或\textbf{哑指标（dummy index）}\footnote{对于$A^i_k$，$k$确实表达了“第$k$列”的含义，但是对于$A^i_kB^k_j$，$k$并没有表达这个对象的行数或列数。因此对于$A^i_k$，$k$是真指标；对于$A^i_kB^k_j$，$k$是赝指标。}，也可以叫\textbf{伪指标}、\textbf{假指标}等。相对应地，没有重复求和的指标表达了列数或行数，因此被称为\textbf{真指标（real index）}。



伪指标可以用任意字母代替，如$A^i_kB^k_j$也可以写作$A^i_sB^s_j$，但真指标不能随意替换，如$A^i_k$和$A^i_s$就是不同的对象，前者表达的是“第$i$行第$k$列的元素”，后者则表达了“第$i$行第$s$列的元素”。

求和的伪指标不一定是遍历 $1, 2, 3$，也可能是对更多或者更少的指标求和，甚至是无穷集合。指标的范围要根据具体情境来决定。

%\begin{example}{线性函数}
%从张量\upref{Tensor}中我们知道，一个 $1$-线性函数可以表示为一个向量，这样的向量常被称为\textbf{余向量}、\textbf{补向量}或者\textbf{$1$-形式}。通常，我们用下标来表示一个余向量的各分量：$\bvec{\alpha}=(\alpha_1, \alpha_2, \alpha_3)$；而用上标来表示一个通常的几何向量：$\bvec{v}=(v^1, v^2, v^3)$。注意，上标不是乘方。

%$\bvec\alpha$ 和 $\bvec v$ 的内积是$$\sum\limits_{i=1, 2, 3}\alpha_i v^i~.$$
%用爱因斯坦求和约定，$\bvec\alpha$ 和 $\bvec v$ 的内积就可以写为 $\alpha_i v^i$。
%\end{example}

\begin{example}{矩阵运算}
对于矩阵 $\bvec{A}$，我们把其第 $i$ 行第 $j$ 列的元素表示为 $A^i_j$。
\begin{itemize}
\item 矩阵乘法表示为：如果 $\bvec{A}=\bvec{B}\bvec{C}$，那么 $A^i_j=B^i_k C^k_j$。
\item 矩阵 $\bvec{A}$ 的迹为 $A^i_i$。

\end{itemize}
\end{example}



\begin{example}{内积}

在欧几里得空间中，我们常把向量写作矩阵，而两个矩阵$v^i$和$u^i$所表示的向量之间的内积常写作$\sum_i v^iu^i$。看起来，这不符合求和约定，因为重复指标都是上标了；但实际上这是因为我们漏写了内积的坐标矩阵。

上述表达中，我们默认使用了直角坐标系，或者说选择的基是标准正交基。但如果采用斜坐标系，或者非标准正交的基，那么两个向量的内积就不再是$\sum_i v^iu^i$，而是$\sum_{i, j} v^iu^j g_{ij}$，其中$g_{ij}$由内积决定，随着选择的基变化而变化，因此被称为内积的坐标。

在直角坐标系中，或者说标准正交基下，
\begin{equation}
g_{ij}=
\left\{
    \begin{aligned}
    &1, \quad i=j;\\
    &0, \quad i\not= j. 
    \end{aligned}
\right. ~
\end{equation}
此时恰好有$\sum_{i, j} v^iu^j g_{ij}=\sum_i v^iu^i$，仅此而已。

\end{example}



爱因斯坦求和约定的表示方法脱胎于矩阵乘法的要求，但是却不依赖于矩阵行和列的形式，转而关注指标间的配合，相比传统的矩阵表达，能更方便地推广到高阶张量的情形中。


\subsection{若干约定俗成的表示}
\begin{itemize}
\item 向量的坐标分量用上标表示，对偶向量的坐标分量用下标表示，这对应于对偶空间\upref{DualSp}文章中说的“向量坐标表示为列矩阵，对偶向量坐标表示为行矩阵”。用物理学中更常用的术语来说，逆变向量分量用上标表示，协变向量分量用下标表示。

\item 在闵可夫斯基时空中，$x^0$ 表示时间坐标 $t$，而 $x^1$，$x^2$ 和 $x^3$ 分别表示空间坐标 $x$，$y$ 和 $z$。有时候还会使用 $x^4$ 来表示虚时间分量\footnote{给时间分量加虚数单位，是因为所用的度规是$+2$度规，但这个度规作为实代数不同于真正的时空代数$\mathcal{Cl}(1, 3)$，而给时间分量加上虚数单位以后就相当于讨论的是$\mathcal{Cl}(4, 0)$，这个代数恰好同构于时空代数。} $\I t$。注意这里取了光速 $c=1$。




\end{itemize}







\subsection{抽象指标}

在涉及微分几何时我们常使用抽象指标，这是爱因斯坦求和约定的延伸，请参见\textbf{抽象指标}\upref{AbsInd}文章。


\addTODO{如有约定俗成的补充，请继续添加。}


