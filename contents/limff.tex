% 函数极限的性质
% 函数极限|序列极限|上下极限

\pentry{函数的极限\upref{limfx}}

我们先列举几个函数极限的基本性质，由于它们的几何直观非常明显，这里不予证明。读者可以根据函数极限的定义尝试进行证明，练习用 $\epsilon$-$\delta$ 语言证明函数极限的性质。
\begin{theorem}{函数极限的唯一性}
  若函数 $f(x)$ 在 $x_0$ 处极限存在，则在 $x_0$ 处极限唯一。
\end{theorem}
\begin{theorem}{局部保序性}
设函数 $f(x),g(x)$ 在 $x_0$ 处极限存在，若 $f(x)\le g(x)$ 对任意的 $x\in U_0(x_0,\delta_0)$ 成立，那么 $\lim\limits_{x\rightarrow x_0} f(x)\le \lim\limits_{x\rightarrow x_0}g(x)$。
\end{theorem}
\begin{theorem}{局部保号性}
设函数 $f(x)$，若 $\lim\limits_{x\rightarrow x_0}f(x)=A>0$，那么存在 $x_0$ 的一个去心邻域 $U_0(x_0,\delta)$，满足对任意 $x\in U_0(x_0,\delta)$，都有 $f(x)>0$。
\end{theorem}
\begin{theorem}{局部有界性}
设函数 $f(x)$，$\lim\limits_{x\rightarrow x_0}f(x)$ 存在（不为无穷大量），那么存在 $x_0$ 的一个去心邻域  $U_0(x_0,\delta)$，满足存在 $M>0$，对任意 $x\in U_0(x_0,\delta)$，都有 $|f(x)|<M$，即 $f(x)$ 在 $U_0(x_0,\delta)$ 上有界。
\end{theorem}
\subsection{函数极限的四则运算}
设函数 $f(x),g(x)$，分别对于六种自变量的变化情况
\begin{equation}
  x\rightarrow x_0;\ x\rightarrow x_0^+;\ x\rightarrow x_0^{-};\ x\rightarrow \infty;\ x\rightarrow +\infty;\ x\rightarrow -\infty
\end{equation}
  若 $f(x)\rightarrow A,\ g(x)\rightarrow B$，那么可以证明
\begin{equation}
  \begin{aligned}
  &h_1(x)=f(x)+g(x)\rightarrow A+B\\
  &h_2(x)=f(x)-g(x)\rightarrow A-B\\
  &h_3(x)=f(x)\cdot g(x)\rightarrow A\cdot B\ (A\neq 0,B\neq 0)\\
  &h_4(x)=f(x)/ g(x)\rightarrow A/B\ (B\neq 0)
  \end{aligned}
\end{equation}
  若广义极限 $A,B$ 为无穷大量，则可以规定一些特殊的四则运算，例如 $(+\infty)+(+\infty)=+\infty,\ 
  (+\infty)\cdot (+\infty)=+\infty$ 等等。
\begin{exercise}{}
\begin{enumerate}
\item  设函数 $f(x)$，若 $\lim\limits_{x\rightarrow x_0}f(x)=A$，证明：对于任意 $r<A$，存在 $x_0$ 的一个去心邻域 $U_0(x_0,\delta)$，满足对任意的 $x\in U_0(x_0,\delta)$，都有 $f(x)>r$。（特别地，当 $r=0$ 时为局部保号性）
\item 求 $\lim\limits_{x\rightarrow +\infty}(x^2+1)/(1-2x^2)$。
\item 设函数 $f(x),g(x)$，若 $f(x)$ 在 $x_0=0$ 处极限为 $0$，而 $h(x)=f(x)/g(x)$ 在 $x_0=0$ 处极限为 $1$，证明 $g(x)$ 在 $x_0=0$ 处极限存在且也为 $0$。
\end{enumerate}

\end{exercise}

\subsection{函数极限与序列极限的相似性}

类似于序列极限，函数极限也有夹逼收敛原理：
\begin{theorem}{夹逼收敛原理}

  设函数 $f(x),h(x),g(x)$，

  若 $f(x)\le h(x)\le g(x),\ \forall x\in U_0(x_0,\delta_0)$，且 $\lim\limits_{x\rightarrow x_0}f(x)=\lim\limits_{x\rightarrow x_0} g(x)=A$，那么 $\lim\limits_{x\rightarrow x_0}h(x)=A$。
\end{theorem}
夹逼收敛定理可以根据函数极限的定义证明，读者可以尝试用 $\epsilon$-$\delta$ 语言进行叙述。


\textbf{回顾函数极限的定义}：设函数 $f(x)$ 在 $U_0(x_0,\delta_0)$ 内有定义。\textbf{函数极限存在的定义是}：存在 $A$，使得对任意 $\epsilon >0$, 存在 $\delta>0$，当 $x\in U_0(x_0,\delta)$ 时有 $|f(x)-A|<\epsilon$。\textbf{函数极限不存在的定义}：对任意 $A$， 都存在 $\epsilon>0$，使得对任意 $\delta>0$，都存在 $x\in U_0(x_0,\delta)$ 满足 $|f(x)-A|\ge \epsilon$。

从定义上看，函数极限与序列极限存在某种联系，它们都有“对任意……存在……当……满足”这样的句式。两者的联系由以下的定理体现：

\begin{theorem}{}
设 $f(x)$ 在 $U_0(x_0,\delta_0)(\delta_0>0)$ 上有定义，则 $\lim\limits_{x\rightarrow x_0}f(x)=A$ 成立的充要条件是：对于 $U_0(x_0,\delta_0)$ 内任意收敛于 $x_0$ 的序列 $\{x_n\}$，都有 $\lim\limits_{n\rightarrow \infty}f(x_n)=A$。

对于左右极限以及自变量趋向于无穷大的极限，也有类似的定理。
\end{theorem}

对于有特殊性质的函数，例如在 $x_0$ 的右去心邻域上单调递增，就容易猜测它在 $x_0$ 处的右极限（排除负无穷的情况）为这个右去心邻域上函数值的下确界。于是我们有以下定理：
\begin{theorem}{}
设 $f(x)$ 在 $U_0^+(x_0,\delta_0)(\delta_0>0)$ 上有定义，若 $f(x)$ 在  $U_0^+(x_0,\delta_0)$ 上单调递增，则
\begin{equation}
  \lim\limits_{x\rightarrow x_0^+}f(x)=\inf\{f(x):x\in U_0^+(x_0,\delta_0)\}
\end{equation}
\textbf{若}上式等号右边\textbf{下确界不存在}，则 $f(x)$ 在 $x_0$ 的右极限为 $-\infty$。

若 $f(x)$ 在  $U_0^+(x_0,\delta_0)$ 上单调递减，则
\begin{equation}
\lim\limits_{x\rightarrow x_0^+}f(x)=\sup\{f(x):x\in U_0^+(x_0,\delta_0)\}
\end{equation}
\textbf{若}上式等号右边\textbf{上确界不存在}，则 $f(x)$ 在 $x_0$ 的右极限为 $+\infty$。

对于左极限与左去心邻域也有类似的定理。对广义极限该定理也成立。
\end{theorem}

序列收敛的判定定理有柯西收敛准则；而对于函数极限，也可以类似地写出这样的定理。
\begin{theorem}{}
设 $f(x)$ 在 $U_0(x_0,\delta_0)$ 内有定义，则 $\lim\limits_{x\rightarrow x_0}f(x)$ 存在的充要条件是： $\forall \epsilon>0,\exists\delta>0$，当 $x',x''\in U_0(x_0,\delta)$ 时，有 $|f(x')-f(x'')|<\epsilon$。

对于左极限与右极限，也有类似的定理。
\end{theorem}

\begin{exercise}{}
\begin{enumerate}
\item 证明极限 $\lim\limits_{x\rightarrow +\infty} \frac{x-1}{x+1}\cos 2\pi x$ 不存在。

\item $f(x)=\sin(1/x)$，证明 $f(x)$ 在 $x_0=0$ 处极限不存在，在 $x_0\neq 0$ 处极限存在。

\item 构造函数 $f(x)$ ，满足定义域为 $\mathbb{R}$，在 $x_0=0$ 处极限存在，而在  $x_0\neq 0$ 处极限不存在。

\item 函数 $f(x)$ 在 $U(a,\delta_0)$ 上有定义，序列 $\{x_n\}$ 收敛于 $a$，则什么情况下 $\lim\limits_{n\rightarrow \infty}f(x_n)=f(a)$ 成立？
\end{enumerate}
\end{exercise}


\subsection{复合函数的极限（初步思考与探索）}
\begin{exercise}{}
思考：函数 $f(x)$ 在 $U(a,\delta_0)$ 上有定义，序列 $\{x_n\}$ 收敛于 $a$，则什么情况下 $\lim\limits_{n\rightarrow \infty}f(x_n)=f(a)$ 成立？
\end{exercise}
设 $f(x)=1/x,\ g(x)=x^2$

  容易证明 $\lim\limits_{x\rightarrow 4}f(x)=1/4,\lim\limits_{x\rightarrow 2}g(x)=4$。

  那么是否 $\lim\limits_{x\rightarrow 2}f(g(x))=f(\lim\limits_{x\rightarrow 2}g(x))=f(4)=1/4$ 呢？经验证是成立的。

  我们自然地就想到，是否对于任何函数 $f(x),g(x)$，都满足 $\lim\limits_{x\rightarrow a}f(g(x))=f(\lim\limits_{x\rightarrow a}g(x))$。然而答案是否定的。这种复合函数的极限运算需要满足一些限制条件。
\begin{exercise}{}
$f(x)=[x],g(x)=1-x^2$，判断 $\lim\limits_{x\rightarrow 0}f(g(x)) $ 与 $f(\lim\limits_{x\rightarrow 0}g(x))$ 是否相等。
\end{exercise}

具体地，我们有以下定理：
\begin{theorem}{复合函数的极限}\label{limff_the1}
定理： $\lim\limits_{x\rightarrow x_0}g(x)=u_0$，$\lim\limits_{u\rightarrow u_0}f(u)=L$，并且存在 $x_0$ 一个去心邻域 $U_0(x_0,\delta)$，使得对任意 $x\in U_0(x_0,\delta)$，有 $g(x)\neq u_0$。那么 $\lim\limits_{x\rightarrow x_0}f(g(x))=\lim\limits_{u\rightarrow u_0}f(u)=L$。
\end{theorem}

\subsection{几个重要极限}
\begin{exercise}{}
证明 $\lim\limits_{x\rightarrow a}\cos x=\cos a$，$\lim\limits_{x\rightarrow a}\sin x=\sin a$。（如果你学了函数的连续性\upref{contin}，那么这个命题说的就是 $\sin x,\cos x$ 是连续函数。但为了严谨地说明这件事，我们不得不回归函数极限的定义。）
\end{exercise}

\textbf{第一个重要极限：}
\begin{equation}
\lim\limits_{x\rightarrow 0}\frac{\sin x}{x}=1
\end{equation}

\textbf{提示：}先证不等式 $\cos x<\frac{\sin x}{x}<1$，用夹逼收敛原理。

\textbf{第二个重要极限：}

\begin{equation}
\lim\limits_{x\rightarrow \infty} \qty(1+\frac{1}{x})^x=e
\end{equation}

\textbf{提示}：利用序列极限的结果\autoref{exp_eq2}~\upref{exp}和夹逼收敛原理。

利用以上两个结果，我们可以求更复杂的极限，例如：
\begin{equation}
\lim\limits_{x\rightarrow 0}\frac{\sin(\sin x)}{x},\ \lim\limits_{x\rightarrow 0}(1-2x)^{\frac{1}{x}}
\end{equation}
伍胜健《数学分析》上的证明利用了换元的操作：
\begin{equation}
\begin{aligned}
\lim\limits_{x\rightarrow 0}\frac{\sin(\sin x)}{x}&=\lim\limits_{x\rightarrow 0}\frac{\sin(\sin x)}{\sin x}\cdot \lim\limits_{x\rightarrow 0}\frac{\sin x}{x}\\
&=\lim\limits_{y\rightarrow 0}\frac{\sin y}{y}\cdot \lim\limits_{x\rightarrow 0}\frac{\sin x}{x}=1\\
\lim\limits_{x\rightarrow 0}(1-2x)^{\frac{1}{x}}&=\lim\limits_{x\rightarrow 0}\qty(1-\frac{1}{1/2x})^{(-1/2x)\cdot (-2)}\\&=\qty(\lim\limits_{x\rightarrow 0}\qty(1-\frac{1}{1/2x})^{(-1/2x)})^{-2}
\\&=\left(\lim\limits_{y\rightarrow \infty}\qty(1+\frac{1}{y})^{y}\right)^{-2}=e^{-2}
\end{aligned}
\end{equation}
上面的证明中，有将 $\sin x$ 替换为了 $y$，再对 $y\rightarrow 0$ 取函数极限；有将 $1/2x$ 替换为 $y$，再对 $y\rightarrow \infty$ 取函数极限。我们称这种方法为\textbf{换元}。然而为什么能够换元呢？

这本质上是利用了\textbf{复合函数的极限}的性质\autoref{limff_the1} 。

\subsection{函数的上下极限}
可以模仿序列的上下极限给出函数上下极限的定义：

设函数 $f(x)$ 在 $U_0(x_0,\delta_0)$ 处有定义。对任意 $0<\delta<\delta_0$，设
$$
l(\delta)=\inf\{f(x):x\in U_0(x_0,\delta)\},\\
h(\delta)=\sup\{f(x):x\in U_0(x_0,\delta)\},
$$
那么令 $l=\lim\limits_{\delta\rightarrow 0}l(\delta), h=\lim\limits_{\delta\rightarrow 0}h(\delta)$，

称 $l$ 为下极限 $\opn{\underline\lim}\limits_{x\rightarrow x_0}f(x)$，$h$ 为上极限 $\opn{\overline\lim}\limits_{x\rightarrow x_0}f(x)$。

可以证明 $l=\sup\{l(\delta):0<\delta<\delta_0\},h=\inf\{h(\delta):0<\delta<\delta_0\}$。

可以利用函数的上下极限描述\textbf{函数极限存在的充要条件}。
\begin{theorem}{}
设函数 $f(x)$ 在 $U_0(x_0,\delta_0)$ 内有定义，则 $\lim\limits_{x\rightarrow x_0}f(x)$ 存在的充要条件为 $\opn{\underline \lim}\limits_{x\rightarrow x_0}f(x)=\opn{\overline\lim}\limits_{x\rightarrow x_0}f(x)$ 。
\end{theorem}
