% 矩阵与线性映射
% 矩阵|矢量空间|旋转矩阵|映射|线性映射

\pentry{线性映射\upref{LinMap}}

% 未完成： 添加算符的概念
% 线性算符将矢量空间 $X$ 中的矢量线性映射到 $Y$ 中。 如果 $X$

我们已经知道 $M\times N$ 的矩阵\upref{Mat}可以表示一个 $N$ 维列矢量的线性组合， 得到一个 $M$ 维列矢量（\autoref{eq_Mat_4}~\upref{Mat}）。
\begin{equation}\label{eq_MatLS_1}
\bvec y = \mat A \bvec x
\end{equation}
我们可以把这个 $\bvec x$ 看做任意一个 $N$ 维矢量空间\upref{LSpace} $X$ 中某矢量关于某组基底 $\{\bvec x_i\}$ 的坐标， 而把 $\bvec y$ 看做任意一个 $M$ 维矢量空间（以下称为 $Y$ 空间）中某矢量关于某组基底 $\{\bvec y_i\}$ 的坐标\footnote{要再次强调列矢量 $\bvec x, \bvec y$ 并不是矢量本身， 而是矢量关于选定基底的坐标}。 当基底的选取不同， 同一个矩阵表示的映射也不同。

这样， 我们就通过矩阵 $\mat A$ 建立了从 $X$ 空间到 $Y$ 空间的一个映射\upref{map} $A:X\to Y$。 即 $X$ 空间的任意矢量 $\bvec x$， 都可以映射到 $Y$ 空间中唯一矢量 $\bvec y$。 注意该映射既不一定是单射也不一定是满射， 而是要取决于 $\mat A$ 的具体性质。

特殊地， 当矩阵 $\mat A$ 为方阵时， 矩阵 $\mat A$ 可以用于表示 $X$ 空间到自身的自映射 $A:X\to X$， 即 $\bvec x$ 和 $\bvec y$ 都是 $X$ 空间中的矢量的坐标， 但 $\{\bvec x_i\}$ 和 $\{\bvec y_i\}$ 仍然可以是 $X$ 空间中两组不同的基底。 同样， 自映射也未必是单射或满射。

由矩阵与列矢量乘法的分配律（\autoref{eq_Mat_17}~\upref{Mat}）可知 $X$ 空间中若干个矢量做任意线性组合然后映射到 $Y$ 空间， 等于这些矢量先分别映射到 $Y$ 空间再做同样的线性组合， 即
\begin{equation}
\mat A \qty(\sum_i c_i \bvec x_i) = \sum_i c_i \qty(\mat A \bvec x_i)~,
\end{equation}
这说明， \textbf{任何矩阵 $\mat A$ 表示的映射 $A:X\to Y$ 必定是线性映射\upref{LinMap}}。

作为一个简单的例子， 我们来看平面旋转矩阵\upref{Rot2D}
\begin{equation}
\mat R_2 = \begin{pmatrix}
\cos\theta & - \sin\theta\\
\sin\theta &\cos\theta   
\end{pmatrix}
\end{equation}
这是一个方阵， 对应二维矢量空间（例如二维几何矢量构成的空间）的自映射。 对于这个矩阵我们有“主动” 和“被动” 两种理解， 前者假设基底不变而矢量旋转， 后者假设矢量不变而基底旋转\footnote{注意“主动” 和“被动” 并不是两种唯一的理解， 例如我们可以选择让基底顺时针旋转 $\theta/2$， 矢量逆时针旋转 $\theta/2$。}。 这个映射中， 映射前后的矢量有一一对应\upref{map}关系。

我们还可能有\textbf{多对一}映射， 即多个矢量映射后可能得到同一个矢量（\autoref{ex_MatLS_1}）。 来看一个例子。

\begin{example}{投影矩阵}\label{ex_MatLS_1}
我们考虑一个投影变换： 将平面上任意几何矢量投影到 $\uvec x + \uvec y$ 方向上得到该方向的矢量。 已知该变换是线性的， 写出变换矩阵（变换前后使用同一组正交归一基底 $\uvec x_1, \uvec x_2$）

解： 与“平面旋转矩阵\upref{Rot2D}” 中的方法同理， 先考虑各基底的投影变换。 $\uvec x_1 = (1, 0)\Tr$ 投影后变为 $(1, 1)\Tr /\sqrt2$， $\uvec x_2$ 投影后同样变为 $(1, 1)\Tr /\sqrt2$， 所以投影变换矩阵即使两个列矢量组成的矩阵
\begin{equation}
\mat P = \frac{1}{\sqrt{2}} \pmat{1 && 1\\ 1 && 1}~.
\end{equation}

注意该变换中虽然每个矢量都映射到同一空间的唯一的矢量， 但不同的矢量有可能映射到同一个矢量。 所以这是一个多对一映射。
\end{example}

\subsection{定义域和值域}
\pentry{子空间\upref{SubSpc}}
\autoref{eq_MatLS_1} 表示的线性映射中， \textbf{定义域（domain）}是 $X$ 空间中的任意矢量， 而\textbf{值域（range）}却不一定是整个 $Y$ 空间， 也可能是 $Y$ 的一个子空间。 任何情况下， \textbf{线性映射的值域必定是一个矢量空间}。 例如\autoref{ex_MatLS_1} 中投影变换的值域就是沿 $\uvec x_1 + \uvec x_2$ 方向的任意矢量（包括零矢量）构成的一维矢量空间， 是二维矢量空间中的一个子空间。


\subsection{矩阵的列}
我们先来看第一空间的基底 $\bvec \alpha_1$ 如何映射到第二空间。 $\bvec\alpha_1$ 对应的列矢量是 $(1, 0, \dots)\Tr$， 作为 $\bvec x$ 输入矩阵 $\mat A$ 得 $\bvec y$ 等于 $\mat A$ 的第一列。 同理， 矩阵的第 $i$ 列就是 $\bvec\alpha_i$ 映射到第二个空间的矢量在基底 $\{\bvec \beta_i\}$ 上的坐标。
\addTODO{未完成}

% 那么， 我们应该如何确定值域呢？ 为什么值域必定是一个子空间？
% 未完成：
% 值域空间就是自定义空间中任意一组基底线性变换后张成的空间。
% 值域空间的维度只可能小于或等于定义域空间的维度
% 如果值域空间的维度和定义域空间的维度相同， 那么映射就是一一映射。
% 如果值域空间的维度小于定义域空间的维度， 那么映射就是多对一映射， 且值域中的每个矢量都有无穷多个定义域中的矢量与之对应

\subsection{矩阵元}
线性算符 $A:X\to Y$ 的矩阵记为 $\mat A$， 矩阵元记为 $A_{i,j}$， 如果有一组 $X$ 的正交归一基底 $\xi_j$ 和 $Y$ 的正交归一基底 $\eta_i$， 那么矩阵元为
\begin{equation}
A_{i,j} = \mel{\eta_i}{A}{\xi_j}~,
\end{equation}
这里我们使用了狄拉克符号\upref{braket} 表示点乘。 若 $\xi_j, \eta_i$ 的列矢量为 $\bvec \xi_j, \bvec {\eta_i}$， 那么也可以记为
\begin{equation}
A_{i,j} = \bvec {\eta_i}\Her {\mat A} \bvec {\xi_j}~.
\end{equation}

证明： 把\autoref{eq_braket_1} 代入即可：
\begin{equation}\label{eq_MatLS_2}
\begin{aligned}
\mel{\eta_i}{A}{\xi_j} &= \mel*{\eta_i}{\qty(\sum_{i',j'} A_{i',j'} \ket{\eta_{i'}}\bra{\xi_{j'}})}{\xi_j}
= \sum_{i',j'} A_{i',j'} \braket{\eta_i}{\eta_{i'}}\braket{\xi_{j'}}{\xi_j}\\
&= \sum_{i',j'} A_{i',j'} \delta_{i,i'}\delta_{j,j'}
= A_{i,j}~,
\end{aligned}
\end{equation}
证毕。
