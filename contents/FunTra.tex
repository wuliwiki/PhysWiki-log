% 函数的变换（高中）
% keys 函数|变换|平移|旋转|缩放|
% license Usr
% type Tutor

\begin{issues}
\issueDraft
\end{issues}

\pentry{函数\nref{nod_functi}}{nod_79ae}

在生活中，变换的概念随处可见。调整照片大小、改变音乐速度，甚至在地图应用中缩放或旋转视图，都与函数变换的原理密切相关。当函数改变形式时，函数的图像和性质也会发生相应变化，就像镜子里的影像随手势而动，这使得理解和处理函数时，可以采用更灵活的方式。

函数变换本质上是空间的变换，即函数的本质未变，改变的是空间。就像远去的汽车，从你的视角是汽车在远离，但从汽车的视角则是你在远去。尽管这与我们现实生活中的经验不太一样，毕竟我们想要移动一个画框在墙上的位置一般不会把整面墙移动走，但采用“变换的本质是变换坐标系”这个视角去看待函数的变换问题，不仅比较容易理解，而且在处理时也不用去记一些口诀，也更不容易出错。

高中涉及到的函数变换全部都是针对的是函数图象而言的，也称为\textbf{几何变换（geometric transformation）}。

\subsection{平移}\label{sub_FunTra_1}

函数图像的\textbf{平移（Translation）}变换是我们经常用到的一种操作。简单来说，就是将一个函数的图像按照某个方向进行移动，但不改变它的形状。尽管初中时就已经接触到了，或者说平时在生活中我们经常移动某个物品。为了更细致地理解这个过程，下面的内容可以拿两张纸自己比划一下试试，这个例子尽管简单，但对后面的其他变换的理解有好处。

\begin{example}{观察如何“向右平移函数”}
\begin{enumerate}
\item 你有两张纸——上面一张纸代表函数的图像，而下面一张纸代表坐标系。
\item 把上面的纸放在下面的纸上，这时候两张纸是对齐的，图像在坐标系的“原位置”。严格来讲，可以认为两张纸的左下角是原点。
\item 现在，如果想把函数图象向右移动，就需要把上面那张代表图像的纸向右移动（记得不要旋转或改变纸的形状），你会发现图像虽然位置变了，但它本身没有改变——形状还是一样的，只是相对于坐标系的位置发生了移动。
\item 此时，我们可以认为上面的那张纸代表的是原本的坐标系，而下面那张纸代表的是移动后的坐标系。于是，移动后的那张纸的原点出现在了在原本坐标系那张纸的原点的左侧，也就是说，图象向右移动，相当于坐标系向左移动。
\end{enumerate}
\end{example}

同理，如果想要向左、上、下平移函数图像，就需要把坐标系向右、下、上移动。如果要斜着移动，可以把移动的过程拆解成先水平方向移动，再垂直方向移动，也就是移动两次。

理解了“图像与坐标系相对移动”的关系后，接下来看看如何在函数表达式上反映出这种平移变换。

\begin{example}{用表达式描述“函数向右平移$c$个单位”}

假设$(X_0,Y_0)$和$(X_1,Y_1)$分别代表原坐标系和变换后坐标系上的某一点。根据上面的观察，移动后的原点在移动前的原点左侧$c(c>0)$个单位。也就是说，旧的坐标原点的坐标，从$(0,0)$变成了$(c,0)$。而由于整张纸上的所有点的移动与原点一致，因此他们都符合这个关系，即$(X_0,Y_0)$变成了$(X_0+c,Y_0)$，而$(X_1,Y_1)$代表的就是移动后的点，于是：
\begin{equation}
\begin{cases}
X_1=X_0+c\\
Y_1=Y_0
\end{cases}\iff
\begin{cases}
X_0=X_1-c\\
Y_0=Y_1
\end{cases}~.
\end{equation}

现在假设原坐标系上的点  $(X_0, Y_0)$  在函数图像上，也就是说  $Y_0 = f(X_0)$ 。将  $X_0$  和  $Y_0$  的表达式带入平移后的关系式中，可以得到  $Y_1 = f(X_1 - c)$ 。这正好就是移动后的函数图像上对应的点。因此，我们得知，函数向右平移$c$个单位的表达式描述为：
\begin{equation}
y=f(x)\Rightarrow y=f(x-c)~.
\end{equation}
\end{example}

推荐你自己试一试，根据相同的方法可以得到其他情况下函数平移的表达式描述：
\begin{itemize}
\item 函数向左$c(c>0)$个单位为：$y=f(x)\Rightarrow y=f(x+c)$
\item 函数向上$b(b>0)$个单位为：$y=f(x)\Rightarrow y-b=f(x)\Rightarrow y=f(x)+b$
\item 函数向下$b(b>0)$个单位为：$y=f(x)\Rightarrow y+b=f(x)\Rightarrow y=f(x)-b$
\end{itemize}

很多人会称上面的变换规律为“左加右减，上加下减”，这句话是在函数视角下的描述。一般情况下看似没有问题，但涉及到与伸缩及旋转等复合时，便可能引起错误。在坐标系视角下，应为“左加右减，下加上减”，水平方向上，对$x$进行操作，而垂直方向上，则对$y$进行操作。当然，如果掌握原理，随时可以列出变化前后的关系，然后再代入到表达式中推导。

同时，可以观察到，如果认为$c$或$b$可以取负值，那么取负值时则意味着相反方向平移绝对值单位长度，这也与学习负数时的概念一致。

\subsection{伸缩}\label{sub_FunTra_2}

在了解了平移变换之后，\textbf{伸缩（Scaling）}变换的推导就信手拈来了。

以“把函数的图像在$y$方向拉伸$A(A>1)$倍”为例，这意味着每个点的$y$值都要扩大$A$倍。如果平移对应的是原点的变化，这里则意味着原来$1$单位的长度，变化为$A$个单位长度。

也就是这时有关系：
\begin{equation}
\begin{cases}
X_1=X_0\\
Y_1=AY_0
\end{cases}\iff
\begin{cases}
X_0=X_1\\
\displaystyle Y_0={Y_1\over A}
\end{cases}~.
\end{equation}

将  $X_0$  和  $Y_0$  的表达式带入平移后的关系式中，可以得到  $\displaystyle{Y_1\over A} = f(X_1 )$ ，即：

\begin{equation}
y_1=Af(x_1)~.
\end{equation}

根据相同的方法可以得到其他情况下函数伸缩的表达式描述，这里请忽略“压缩$A$倍”之类的语病，事实上一般会表述为压缩为$\displaystyle{1\over A}(A>1)$，需要在实际使用时区分：

\begin{itemize}
\item 函数在$y$方向压缩$A(A>1)$倍为：$\displaystyle y=f(x)\Rightarrow y={1\over A}f(x)$
\item 函数在$x$方向拉伸$B(B>1)$倍为：$y=f(x)\Rightarrow y=f(Bx)$
\item 函数在$x$方向压缩$B(B>1)$倍为：$\displaystyle y=f(x)\Rightarrow y=f({x\over B})$
\end{itemize}

与平移类似，可以观察到，如果认为$A$或$B$为任意正数，那么取倒数时则意味着伸缩关系的互换，即拉伸$A$倍意味着压缩$\displaystyle 1\over A$倍。这也与学习倒数时的概念一致。也可记为“拉乘压除”。

需要注意，与平移不同的是，伸缩变换前后，原本在$y$方向上距离为$d$的两个点，现在会变为$Ad$。也就是说，伸缩前后两个点的距离会变化。平移和伸缩，就像初中证明时全等与相似的关系。

\subsection{*旋转}

\pentry{三角恒等式\nref{nod_TriEqv}，函数的性质\nref{nod_HsFunC}}{nod_b895}

下面在使用三角恒等式时，可以作为已知条件来理解，如果觉得难以理解也可以先跳过这部分内容。这部分内容本身也不是高中学习要求的，但难度不高，建议学习。

其实有了之前的经验，求解\textbf{旋转（Rotation）}变换的操作仍然是一样的，表示出原本的点和变换后的点的关系，然后代入就可以了。下面研究绕原点旋转的变换，此时保持不变的是平面上所有点到原点的距离。

假设$(X_0,Y_0)$和$(X_1,Y_1)$分别代表原坐标系和变换后坐标系上的某一点。由于变换的前后，点到原点的距离相同，于是都设为$r$。假设$(X_0,Y_0)$和$(X_1,Y_1)$都在第一象限，这样假设只是为了方便画图，事实上根据三角函数的性质，在任何象限都可以。

\addTODO{示意图}

假设逆时针旋转$\theta$角，而$(X_0,Y_0)$与$x$轴的夹角为$\alpha$，于是有\footnote{这实际上是点的极坐标表示，但即使没学过，仍然可写出。}：
\begin{equation}
\begin{cases}
X_0&=r\cos\alpha\\
Y_0&=r\sin\alpha\\
X_1&=r\cos(\alpha+\theta)\\
Y_1&=r\sin(\alpha+\theta)\\
\end{cases}\implies
\begin{cases}
X_1&=X_0 \cos \theta - Y_0 \sin \theta\\
Y_1&=Y_0 \cos \theta + X_0 \sin \theta\\
\end{cases}\iff
\begin{cases}
X_0&=X_1 \cos \theta + Y_1 \sin \theta\\
Y_0&=Y_1 \cos \theta - X_1 \sin \theta\\
\end{cases}~.
\end{equation}

这里需要使用三角恒等式：
\begin{itemize}
\item $\sin(\alpha + \theta)= \sin \alpha \cos \theta + \cos \alpha \sin \theta$
\item $\cos(\alpha + \theta)=\cos \alpha \cos \theta - \sin \alpha \sin \theta$
\end{itemize}

直接代入原本的函数表达式，会得到：

\begin{equation}
y  ={1\over\cos \theta}f(x \cos \theta + y \sin \theta)+x \tan \theta~.
\end{equation}

可以注意到，右侧的$f$内部出现了$y$，这和习惯的函数表达式不太相同。事实上，除了\aref{单调}{sub_FunTra_2}函数可能在小角度旋转后保持仍是函数，根据这个表达式，一般而言函数在旋转后都不再是函数。因此，一般也不会写成这样的表达式，而是在\enref{解析几何}{JXJH}的范畴内直接做代换。

\subsection{复合变换}

就像复合函数可以多个函数一层层复合一样，这些变换也可以依次加在同一个函数上，最终会得到一个新的表达式。在处理时，如果不太熟悉可以把每一步独立考虑，最后再整理就可以了。唯一需要注意的点，是在每一步的时候都注意是对已经完成的结果进行变换，而非在最开始的变量上进行变换。下面试一试。

\begin{exercise}{把函数$y=f(x)$先在$x$方向上向右平移$a$个单位，再在$y$方向上向下平$b$个单位，先在$x$方向上压缩为原来的$1\over5$，求得到的新函数的表达式。}
答：

根据变换规则
$$\displaystyle y=f(x)\Rightarrow y=f(x-c)\Rightarrow y=f(x-c)-b\Rightarrow y=f({{x-c}\over 5})-b~.$$

因此最后结果为：
$$y=f({x\over 5}-{c\over5})-b~.$$

注意，这样的变换过程是错误的：
$$\displaystyle y=f(x)\Rightarrow y=f(x-c)\Rightarrow y=f(x-c)-b\Rightarrow y=f({x\over 5}-c)-b~.$$

错误的原因是在最后一步时，压缩的变换是针对平移的结果，因此，平移的单位长度相较于原本的函数也变化了。不理解的话，可以就一步步来做，也没问题。
$$\displaystyle y=f(x)\Rightarrow y_1=f(x_1-c)~.$$
$$\displaystyle y_1=f(x_1)\Rightarrow y_2=f(x_2)-b~.$$
$$\displaystyle y_2=f(x_2)\Rightarrow y_3=f({{x_3}\over 5})~.$$

最后整理一下，就可以发现在第二步，括号内的内容没变，也就是第一步是$x-c$，在第二步也应该代$x-c$，而第三步是内部的整体除以$5$，因此也就是$\displaystyle x-c\over5$

\end{exercise}

通过复合变换，可以得到一些复杂的变换。比如如果不绕原点进行，需要先平移，将旋转中心平移到原点处，再旋转，再将旋转中心平移回来。

\subsection{几何变换总结}

上面接触了平移、缩放、旋转三种几何变换。其实根据它们各自的特点，有一个统一的分类方式。

旋转和平移统称为\textbf{欧式变换（Euclidean Transformation，或刚体变换，Rigid Transformation）}，它是一种保持几何对象的形状和大小的变换，也就是点之间的距离和角度都保持不变。在欧式变换的基础上再加上伸缩，称为\textbf{相似变换（Similarity Transformation）}。相似变换只保持角度保持不变，而距离可以成比例变化。也就是保留了图形比例关系，因此也认为它保留了物体的形状。在代数的视角，相似变换包含的这三类统称为\textbf{线性变换（Liner Transformation）}\footnote{之所以这么称呼是因为它们符合线性变换的定义要求，但这在高中阶段完全不接触。}。

另外，高中不太会接触到的\textbf{仿射变换（Affine Transformation）}保留了直线的性质和平行的关系，但角度和长度不再保持不变；\textbf{摄影变换（Projective Transformation）}则只保留了直线的性质，甚至允许平行线在变换后不再平行。每一类变换都是对前一类的扩展，加入了更多的几何操作自由度。摄影变换是最广泛的，允许最自由的变换；欧式变换则是最保守的，严格保持几何形状和大小。

下面给出一些生活中这些变换的实例，方便你理解，注意由于前面的变换本质上都是后面变换的特例，因此后面的每一项都只会给出前面一项不包含的例子：

\begin{itemize}
\item 欧式变换：将手机图标在屏幕上拖动到另一个位置、旋转手机屏幕中的图片。
\item 相似变换：缩放地图应用中的视图。
\item 仿射变换：把一个字变成斜体。
\item 摄影变换：改变物体的远近感，让近的物体看起来更大，远的物体更小。建筑的高层部分会显得比底层更窄，也就是说一个矩形会看成梯形。
\end{itemize}

当然，既然称作几何变换，事实上哪怕不符合函数定义的几何图形，即在\enref{解析几何}{JXJH}的领域，也都是可以进行上述变换的。

其实函数的变换包含的范畴非常广泛：除了上面提到的用于分析和操作几何图形及其在空间中的关系的几何变换；频域分析方面，傅里叶变换、拉普拉斯变换、Z变换等变换可以将问题从时域转换到频域，从而揭示出信号和系统中隐藏的特征。当然现在主要先研究高中涉及的部分；学有余力的话，也可以了解几何变换的其他部分，这对理解解析几何的内容会很有帮助；而频域分析的部分在大学阶段才可能会接触到。
