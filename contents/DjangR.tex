% 用 Python Django REST 搭建网站 API 笔记

\begin{issues}
\issueDraft
\end{issues}

\begin{itemize}
\item 用 django 做一个简单的 web form 见\href{https://www.geeksforgeeks.org/how-to-create-a-form-using-django-forms/}{这里}．
\item \href{https://www.django-rest-framework.org/}{Django REST 主页}
\item \href{https://www.django-rest-framework.org/tutorial/quickstart/}{Django REST quick start tutorial}． 下面我们按照这个教程来做．
\item 创建文件夹 \verb|tutorial| 并进入．
\item 创建虚拟环境\upref{PyVenv} \verb|env|， 然后 \verb|source env/bin/activate| 开启虚拟环境
\item 在虚拟环境中 \verb|pip install django djangorestframework|
\item 创建新的 django project \verb|django-admin startproject tutorial .| 名为 tutorial， 该命令会创建同名文件夹
\item 运行 \verb|cd tutorial; django-admin startapp quickstart; cd ..|．
\begin{figure}[ht]
\centering
\includegraphics[width=6cm]{./figures/DjangR_1.png}
\caption{tutorial 的目录结构} \label{DjangR_fig1}
\end{figure}
\item \verb|python manage.py migrate|
\item \verb|python manage.py createsuperuser --email admin@example.com --username admin|
\item 创建文件 \verb|tutorial/quickstart/serializers.py|， 插入代码…
\item 替换文件 \verb|tutorial/quickstart/views.py| 的代码…
\item 替换文件 \verb|tutorial/urls.py| 的代码…
\item 在文件 \verb|vim tutorial/settings.py| 最后插入代码… 并在 \verb|INSTALLED_APPS| 列表的最后插入一行…
\item 现在启动 api \verb|python manage.py runserver|． 将在 localhost 端口运行．
\item 现在就可以用 curl 测试我们的 web api 了： \verb|curl -H 'Accept: application/json; indent=4' -u admin:password123 http://127.0.0.1:8000/admin/ -o ret.html|
\end{itemize}
