% 球坐标的旋转变换
% license Xiao
% type Tutor

\begin{issues}
\issueDraft
\end{issues}

\pentry{球坐标与直角坐标的转换\nref{nod_SphCar}， 三维旋转矩阵\nref{nod_Rot3D}}{nod_4b11}
做球坐标的旋转变换时， 常使用 $z$-$y$-$z$ 欧拉角表示旋转， 即先绕 $z$ 轴旋转 $\alpha$， 再绕 $y$ 轴旋转 $\beta$， 最后绕 $z$ 轴旋转 $\gamma$。 其中绕 $z$ 轴旋转只需要给 $\phi$ 加上 $\alpha$ 或 $\gamma$ 即可。 绕 $y$ 轴右手定则旋转 $\beta$， 得
\begin{align}\label{eq_SphRot_1}
\leftgroup{
&\theta' = \arccos(-\sin\beta \sin\theta \cos\phi + \cos\beta \cos\theta)\\
&\phi' = \Arctan(\sin\theta \sin\phi, \cos\beta\sin\theta\cos\phi + \sin\beta\cos\theta)
}~.\end{align}

\subsubsection{推导}

旋转前后的直角坐标矢量分别为
\begin{equation}
\bvec r = \pmat{\sin\theta\cos\phi\\ \sin\theta \sin\phi\\ \cos\theta}~,
\qquad
\bvec r' = \pmat{\sin\theta'\cos\phi'\\ \sin\theta' \sin\phi'\\ \cos\theta'}~.
\end{equation}
绕 $y$ 轴旋转矩阵为
\addTODO{引用 “三维旋转矩阵\upref{Rot3D}” 中相关例题，例题未完成}
\begin{equation}
\mat R_y(\beta) = \pmat{\cos\beta & 0 & \sin\beta\\ 0 & 1 & 0\\ -\sin\beta & 0 & \cos\beta}~.
\end{equation}
\begin{equation}
\bvec r' = \mat R_y(\beta) \bvec r~.
\end{equation}
对比各分量可得\autoref{eq_SphRot_1}。
