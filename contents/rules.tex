% 小时百科编写规范
% keys 小时百科|文章|编写|编辑器
% license Xiao
% type Tutor

\subsection{离线编辑器}

原则上百科编辑必须使用在线编辑器。 但这里仍然给出规范以及设置。

\subsubsection{TeXworks}

\textbf{设置}： 菜单中的 Edit > Preference 设置默认字体为 Microsoft YaHei UI（11pt）， 默认编译器为 XeLaTeX，编码选择 UTF-8。

\textbf{快捷键}：
编辑器中 Ctrl+T 编译， 
Ctrl+单击跳转到对应的 pdf 或代码， 
在 pdf 中 Alt+左箭头返回上一个位置， 
代码中 \verb|\beq|+Tab 生成公式环境，\verb|\sub|+Tab 生成 subsection， Ctrl+G 查找下一个。

\subsubsection{TeXstudio}
\textbf{设置}： 安装 TeXlive 再安装 texstudio 即可使用， 无需任何配置。
general 中设置界面字体为 9。
build 中设置默认编译器为 XeLaTeX。
editor 中设置字体为 Microsoft YaHei， 大小 11。
Inline Checking 关掉。

\textbf{快捷键}：
F5 编译并预览 pdf， 若没有 pdf 预览， 或者右键 go to pdf 即可显示 pdf， Ctrl + 单击可以跳转到 pdf 或者代码。

\subsection{其他软件使用规范}
小时百科的 pdf 使用 TeXLive 软件中的 XeLaTeX 进行编译（目前使用 2019 版）。如果 Windows 中编译卡在 eu1lmr.fd 上的时间较长，说明 font config 有问题，在 Windows 的命令行运行 \verb|fc-cache -fv|， 重启 TeXLive，多试几次即可。

搜索文件夹内所有文档的内容用 FileSeek 软件，搜索空格用 “\verb|\ 空格|”，搜索 “\$” 用 “\verb|\$|”，以此类推。

画图用 Adobe Illustrator， 用知乎的公式编辑器在图中添加公式（把编辑器中的公式另存为 svg 然后在 Illustrator 中打开）\footnote{不推荐的老方法是使用 MathType 添加公式，希腊字母粗体正体矢量用从 Symbol 字体中插入（勾选 bold），更简单的方法是，先输入希腊字母，选中，然后在 Style 里面选 Vector-Matrix}。 图片中的文字必须是 12 号， 如果字太小， 就把图片缩小而不是字放大。 图片中的线条尽量用 1pt 粗细。 图片插入书中后， 图中的字体应比书中的略小。 要画箭头， 先画一条直线， 然后选画笔图标， 在左下角的菜单中选 Arrows > Arrow\_Standard， 选 1.23 号箭头， 再把粗细改成 0.3155pt （相当于 1pt 粗的直线）。

\subsection{文件版本管理}
使用 GitHub Desktop， 用 MacroUniverse/PhysWiki 项目管理所有文件， 每次 commit 必须完成以下步骤。
\begin{itemize}
\item 与 GitHub 同步（fetch/pull）
\item 检查变化的内容
\item 用 FileSeek 查找所有文档中的空心句号并替换
\item 确保所有文档可以顺利编译
\item 用 PhysWikiScan 更新 wuli.wiki
\item commit 以后检查 history 无误后 push 到 GitHub
\end{itemize}
每次 commit 的标题尽量使用下列之一
\begin{itemize}
\item 常规更新：包括完善文章，新文章等。
\item 模板更新：模板有更新。
\item 批量修改：在多个文件中修改某一格式规范， 这种修改比较危险， 需要谨慎。
\end{itemize}
定期检查的内容
\begin{itemize}
\item 解决编译产生的 warning
\item 把 ManicTime 记录的写作时间记录到“timer.xls”
\end{itemize}

GitHub 会忽略 “.gitignore” 文件指定的文件类型： *.toc， *.aux， *.log， *.out， *synctex.gz。

\subsection{文章编写规范}

每篇文章的 tex 文件必须有一个独一无二的标签， 文章标签必须限制在 6 个字符内，必须在 \verb|main.tex| 和文章文件名中一致。 文章的中文名必须在主文件和文章文件的第一行注释中一致。 中文名中空格用 “\textbackslash 空格” 实现， 不能出现公式环境（尽量用英文单词代替比如 gamma 代替 $\Gamma$）。 文章文件一般放在 contents 目录下， 并在主文件中用 \verb|\entry{文章名}{文章标签}| 命令输入中文名和标签。 该命令大致等效于

\begin{lstlisting}[language=latex]
\section{文章名}\label{文章标签}\input{./contents/文章标签}
\end{lstlisting}

主文件有 \verb|main.tex| 和 \verb|Debug.tex| 两个， 它们共用一个模板。 \verb|Debug.tex| 用于离线编辑时缩短编译时间。 离线编辑时新文章必须现在 \verb|Debug.tex| 中编辑， 完成后再从中删除并将 \verb|\entry| 插入到 \verb|main.tex|。 \verb|Debug.tex| 中的 entry 命令的后面可以用 \verb|\newpage| 命令强制换页， 但不允许在其他文件中这么做。

引用文章用 \verb|\upref| 命令， “预备知识”用 \verb|\pentry| 命令。

\subsection{错别字替换}
可以时常搜索替换： “一下”（以下）， “这是” （这时）， “收到”（受到）， “库伦”（库仑）， “符号”（负号）， “带入”（代入， 公式没有说 “带入” 的）， “震动”（振动）， “酋” （酉）， “原件”（元件）， “基地”（基底）， “这时一个”（这是一个）， “贝赛尔”（贝塞尔）, “不记”（不计）， “自选”（自旋），“幅角”（辐角）。

为避免编辑器的符号替换 bug 也可以搜一下常用替换符号 \verb|α Α ∵ ⊥ β ⋂ ◯ ⋃ • ∩ ∪ ∘ χ Δ δ ϵ ∃ Ε ≡ ⊓ ⊔ ⊏ ⊐ ⋆ η Η ∀ Γ γ ⩾ ≥ ≫ ⋙ ∠ ≈ ℏ ⟺ ∈ ∫ ∬ ∭ ∞ ι κ Λ λ ⩽ ⟸ ⟹ ≤ ⇐ ← ⇇ ↔ ≪ ⋘ ↦ ∡ ∓ μ ≠ ∋ ∉ ⊈ ⊙ ∮ ω Ω ⊕ ⊗ ∥ ∂ ⟂ ∝ Φ φ π Π ± Ψ ψ ρ ⇉ ⇒ σ Σ ∼ ≃ ⊂ ⊆ ⊃ ⊇ ∑ τ ∴ θ Θ → ⊤ ◁ ▷ ↕ ⇕ ⇈ ⇑ ↑ ≐ ↓ ⇊ † ‡ ⋱ ⇓ υ ε ∅ ϰ ϕ ς ϖ ϱ ϑ ∨ ∧ Ξ ξ Ζ ζ ▽ Ο ο ⊖| 以及 \verb|·|
% 无法显示： ⋄ □

角度符号 \verb|°| 在 texlive 里面可能显示乱码， 时常搜索一下， 放到公式环境用 \verb|^\circ| 即可。

\subsection{autoref 的空格}
\begin{itemize}
\item \verb|\autoref{}| 后面如果是中文必须要先加一个空格， 具体规则可以根据 PhysWikiScan 的 warning 来判断。
\item \verb|\autoref{}~\upref{}| 之间必须有一个 \verb|~|， 如果没有， 编译会出错。
\end{itemize}
