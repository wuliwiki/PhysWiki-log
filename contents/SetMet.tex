% 集合的测度（实变函数）
% 测度|实变函数|measure|集合|广义函数|泛函|可测集|Borel集

\pentry{集合\upref{Set}，微积分或数学分析}

%放在实变函数还是广义函数里？或者广义函数本身作为实变函数的一个部分？

本节为实变函数的一部分，因此讨论中涉及的集合均为实数集合$\mathbb{R}^n$或者其子集．


\subsection{从Riemann积分到Lebesgue积分}

\pentry{黎曼积分与勒贝格积分\upref{Rieman}}

在微积分或数学分析中，介绍积分的时候通常都是指Riemann积分．Riemann积分的思路是\textbf{对定义域作分划}，在每个分划区间里取一个代表的函数值作为“高度”，分划区间作为“底部”，构成许多“柱子”，计算这些柱子的“体积”并求和．这种思路的好处是逻辑上容易处理，只需要有极限的概念就能讨论清楚怎么积分．但是它有很多局限性，比如严重依赖函数的连续性，导致理论不完备，无法处理很多例外情况．比较典型的例子有Riemman函数和Dirichlet函数．

Lebesgue积分就是换了一种积分的思路，反过来\textbf{对值域作分划}，计算各函数值对应的自变量集合的“面积”，以此来计算“柱子体积”并求和．上面提到的Riemann积分处理不了的病态函数，就可以用Lebesgue积分来处理，并且对于Riemann积分能处理的函数，两种积分算出来的结果是一样的．

考虑Riemann函数，函数值为整数$q$的点是$[0, 1]$上的全体形如$p/q$的既约真分数，记它们构成的集合为$A_q$．现在知道柱子的高度是$q$了，计算柱子的体积还需要底面积，也就是$A_q$的“面积”．从这里就能看出Lebesgue积分的特别之处，即需要考虑非开区间的集合的“面积”．

集合的“面积”，被称为“\textbf{测度（measure）}”．本节我们就来讨论测度的概念．



\subsection{点集的外测度}

\subsubsection{开集的体积}

\begin{definition}{“开方块”的体积}\label{SetMet_def1}

设$I=I_1\times I_2\times I_3\times\cdots\times I_n$是$\mathbb{R}^n$上\textbf{开区间}的笛卡尔积，其中$I_i=(x_i, y_i)$，那么定义$I$的体积为$\abs{I} = \prod_{i=1}^n \abs{y_i-x_i}$．

\end{definition}

$\mathbb{R}^n$的任意开集都能表示为形如\autoref{SetMet_def1} 中$I$的“开方块”的\textbf{不交并}，因此开集的体积就可以直接定义为这些开方块的体积之和．

\begin{theorem}{}\label{SetMet_the2}
开集的体积具有如下性质：

\begin{enumerate}
\item \textbf{正定性}：对于任意\textbf{开集}$U$有$\abs{U}\geq 0$，且等号只在$U=\varnothing$时成立；\\
\item \textbf{单调性}：如果两个\textbf{开集}满足$U_1\subseteq U_2$，那么$\abs{U_1}\leq \abs{U_2}$；\\
\item \textbf{可数次可加性}：对于任意可数多个\textbf{开集}$U_i$，有$\abs{U_1\cup U_2\cup U_3\cup \cdots}\leq \abs{U_1}+\abs{U_2}+\abs{U_3}+\cdots$；\\
\item \textbf{完全可加性}：对于至多可数个\textbf{两两不交}的\textbf{开集}$U_n$，有$\abs{\bigcup U_n}=\sum\abs{U_n}$．
\end{enumerate}
\end{theorem}




\subsubsection{任意点集的外测度}

有了开集的体积概念，我们就可以定义一种测度了．

\begin{definition}{外测度}
设$A$是$\mathbb{R}^n$上的\textbf{任意点集}，定义$\opn{m^*}(A)=\inf\{\abs{U}: U\text{是}\mathbb{R}^n\text{的开集}\}$为$A$的\textbf{外测度}，有时候也表示为$\opn{m^*}A$．
\end{definition}

外测度可以这样理解：要测量一个物体的体积，就用不同形状和大小的容器去容纳它，整理出所有能容纳它的容器，那这些容器的体积的\textbf{下确界}就是该物体的体积．

这就是为什么我们要先定义开集的测度，因为它最直观，最容易理解，用开集来做容器再合适不过．

可以类比，如果先定义闭集的体积，就可以定义任意点集的\textbf{内测度}，即反过来用给定的任意点集做容器，看它能容纳的闭集体积的上确界是什么．使用闭集建立内测度理论稍麻烦些，我们这里只用外测度．

\subsubsection{外测度的性质}

\begin{theorem}{}\label{SetMet_the1}
开集的外测度，就是开集的体积．
\end{theorem}

利用开集体积的性质和外测度的定义，很容易证明该定理，故在此省略证明．用简练的数学语言，可以把\autoref{SetMet_the1} 写成：$\opn{m^*}(U)=\abs{U}$，其中$U$是一个$\mathbb{R}^n$上的开集．

显然，外测度是体积的推广，也继承了体积的一些性质：

\begin{theorem}{}\label{SetMet_the3}
\begin{enumerate}
\item \textbf{非负性}：对于任意\textbf{集合}$E$有$\opn{m^*}{E}\geq 0$，且$\opn{m^*}\varnothing=0$\footnote{注意，这不是正定性，即非空集合的测度也可以为零，比如只有一个点的集合．}；\\
\item \textbf{单调性}：如果两个\textbf{集合}满足$E_1\subseteq E_2$，那么$\opn{m^*}{E_1}\leq \opn{m^*}{E_2}$；\\
\item \textbf{可数次可加性}：对于任意可数多个\textbf{集合}$E_i$，有$\opn{m^*}({E_1\cup E_2\cup E_3\cup \cdots})\leq \opn{m^*}{E_1}+\opn{m^*}{E_2}+\opn{m^*}{E_3}$；\\
\item \textbf{分离条件下的可数可加性}：对于至多可数个\textbf{集合}$E_i$，如果存在对应的开集$U_i$，使得$E_i\subseteq U_i$，且各$U_i$两两不相交，那么就有$\opn{m^*}{\bigcup U_n}=\sum\opn{m^*}{U_n}$．
\end{enumerate}
\end{theorem}

注意比较\autoref{SetMet_the2} 和\autoref{SetMet_the1} 的异同．\autoref{SetMet_the3} 的第1和第2条很容易证明，留作习题．下面证明后两条．

\textbf{证明}：

\textbf{可数次可加性}：

应用开集体积的可数次可加性以及外测度的定义即可．任取开集$U_i$使得各$E_i\subseteq U_i$，那么有

\begin{equation}
E_1\cup E_2\cup E_3\cup \cdots \subseteq U_1\cup U_2\cup U_3\cup \cdots
\end{equation}

又因为
\begin{equation}\label{SetMet_eq1}
\abs{U_1\cup U_2\cup U_3\cup \cdots} \leq \abs{U_1}+\abs{U_2}+\abs{U_3}\cdots
\end{equation}

任何能容纳$E_1\cup E_2\cup E_3\cup \cdots $的开集，总可以写成$U_1\cup U_2\cup U_3\cup \cdots$的形式，其中$U_i$是任取的能容纳$E_i$的开集．因此由\autoref{SetMet_eq1} 可得，能容纳$E_1\cup E_2\cup E_3\cup \cdots $的开集的体积，小于等于能容纳各$E_i$的开集的体积之和——换句话说，即可数可加性．

\textbf{分离条件下的可数可加性}：

应用开集体积的完全可加性以及外测度的定义即可．

取开集$V_i$使得$E_i\subseteq V_i\subseteq U_i$，那么由开集体积的完全可加性，$\abs{V_1\cup V_2\cup V_3\cup \cdots}=\abs{V_1}+\abs{V_2}+\abs{V_3}+\cdots$．因此，每个能容纳$E_1\cup E_2\cup E_3\cup\cdots$的开集的体积，都等于一组能容纳各$E_i$的开集的体积之和——换句话说，即$\opn{m^*}(E_1\cup E_2\cup E_3)\geq\opn{m^*}E_1+\opn{m^*}E_2+\opn{m^*}E_3+\cdots$．

再结合$\opn{m^*}({E_1\cup E_2\cup E_3\cup \cdots})\leq \opn{m^*}{E_1}+\opn{m^*}{E_2}+\opn{m^*}{E_3}$，可知
\begin{equation}
\opn{m^*}({E_1\cup E_2\cup E_3\cup \cdots})\leq \opn{m^*}{E_1}+\opn{m^*}{E_2}+\opn{m^*}{E_3}
\end{equation}
得证．

\textbf{证毕}．

\subsection{可加性与可测性}

可加性是定义Lebesgue积分时极为基础的性质，它是说，任取两个不相交的集合，则它们的并集的测度等于各自测度的和．如果这个性质成立，那么Lebesgue积分就可以很自然地定义了．但是很可惜的是，它并不成立，我们用以下反例来说明：

\begin{example}{不具有可加性的集合}\label{SetMet_ex1}

取区间$(0, 1)$上的任意一点$x$，定义与该点相关的集合$Q_x=\{r\in(0, 1)|r-x\in\mathbb{Q}\}$．由于有理数相加减仍是有理数，故$Q_x$可以看作对$(0, 1)$区间进行的等价划分，即各$Q_x$两两不相交．

从各$Q_x$中分别取一个元素，构成一个新的集合，记为$S$．把区间$(-1, 1)$中的有理数进行排列（编号）\footnote{注意，不是按大小顺序编号（这是不可能做到的），而是用任意的编号方式．其中一种方式可以参见康托尔的三角编号法．给有理数编号而不是直接说取有理数，是为了方便之后构造并集．}：
\begin{equation}
q_1, q_2, q_3, \cdots 
\end{equation}

构造集合$S_i=\{s+q_i|s\in S\}$\footnote{即$S_i$是$S$平移的结果．使用区间$(-1, 1)$是为了保证全体$S_i$的并能包含$(0, 1)$．}．显然，各$S_i$互不相交．并且由于都是$S$平移的结果，各$S_i$的外测度也相等．

对于任意$Q_x$，从中取任何一个元素$y$，都有$Q_y=Q_x$，且全体$Q_x$的并集就是$(0, 1)$．因此，$\bigcup_{i=1}^\infty S_i\supseteq (0, 1)$．同时，又易证$\bigcup_{i=1}^\infty S_i\subseteq (-1, 2)$．综合这两个属于关系，可以得到
\begin{equation}\label{SetMet_eq2}
1\leq\opn{m^*}(\bigcup_{i=1}^\infty S_i)\leq 3
\end{equation}

可见，我们构造出了一类集合$S_i$，它们各自的测度都相等，彼此不相交，但是可数无穷多个它们的并集，测度却是个非负的有限数．有了这些信息就很容易得到不具有可加性的集合了：

假设对于\textbf{任意}编号$k$，都有$\opn{m^*}(\bigcup_{i=1}^{k+1} S_i)=\opn{m^*}(\bigcup_{i=1}^k S_i)+\opn{m^*}S_{k+1}$，那么应有$\opn{m^*}(\bigcup_{i=1}^{k} S_i)=k\opn{m^*}(S_0)$．问题是这样一来，要么$\opn{m^*}(S_0)=0$，使得$\opn{m^*}(\bigcup_{i=1}^\infty S_i)=0$；要么$\opn{m^*}(S_0)>0$，使得$\opn{m^*}(\bigcup_{i=1}^\infty S_i)=+\infty$．不论如何，都违反了\autoref{SetMet_eq2} ．因此假设不成立．

因此，必然存在一个$k$使得$\opn{m^*}(\bigcup_{i=1}^{k+1} S_i) \neq \opn{m^*}(\bigcup_{i=1}^k S_i)+\opn{m^*}S_{k+1}$．于是，$\bigcup_{i=1}^k S_i$和$S_{k+1}$就是两个不相交的集合，但它们并集的测度不等于测度之和．


\end{example}

我们能不能通过修改外测度的定义，来让任意不相交的集合之间都满足可加性呢？答案是不能，因为\autoref{SetMet_ex1} 的推导中只用到了外测度的非负性、单调性、可数次可加性、平移不变性以及\autoref{SetMet_the1} ，这些都是开集的体积也拥有的性质．因此，不管怎么定义外测度，只要它是体积的推广，就不可能绕开\autoref{SetMet_ex1} 的问题．

所以，为了能正常研究积分，我们只好对集合的性质进行限制了，详见\textbf{可测集合}\upref{MsbSet}．


















