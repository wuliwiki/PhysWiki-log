% 广义力

\pentry{欧拉—拉格朗日方程\upref{Lagrng}}

\subsection{拉格朗日方程的广义力拓展}
在之前的讨论中， 所有的系统外力都可以包含进拉格朗日量 $L = T-V$ 的势能项 $V$ 中． 和之前一样， 为了书写方便式中 $q$ 代表 $q_1, \dots, q_N$， $\dot q$ 也同理． 本文仍然假设 $V$ 不显含 $\dot q$， 即并非广义势能\upref{EMLagP}． 我们可以先把 $V$ 看成所有质点位置 $\bvec r_j$ 和 $t$ 的函数， 这样势能 $V$ 对每个质点产生的力就是
\begin{equation}\label{LagEqQ_eq4}
\bvec F_j^{(V)} = - \grad_j V(\bvec r_1,\bvec r_2,\dots,t) = -\pdv{V}{x_j}\uvec x - \pdv{V}{y_j}\uvec y - \pdv{V}{z_j} \uvec z
\end{equation}
然后再把每个 $\bvec r_j$ 看成广义坐标 $q$ 和时间 $t$ 的函数， 就有 $V = V(q,t)$．

这些力一般来说是保守力（如重力，弹簧弹力等）， 然而许多情况中还可能出现种种非保守力， 例如摩擦力等， 较难用势能描述． 这时引入\textbf{广义力（generalized force）}的概念会更方便． 每个广义坐标 $q_i$ 对应一个广义力， 定义为（$i=1,\dots,N$， 下同）
\begin{equation}\label{LagEqQ_eq3}
Q_i = \sum_j \bvec F_j^{(a)} \vdot \pdv{\bvec r_j}{q_i}
\end{equation}
其中 $\bvec F_j^{(a)}$ 是作用点为 $\bvec r_j$ 的主动力（即非约束力）\footnote{事实上把\autoref{LagEqQ_eq3} 中的主动力 $\bvec F_j^{(a)}$ 换成质点 $j$ 的所受的合力也无妨， 合力包括约束力和主动力． 然而达朗贝尔原理（\autoref{dAlbt_eq3}~\upref{dAlbt}）告诉我们约束力对广义力的贡献为零．}．

若除了势能项 $V$ 产生的主动力（\autoref{LagEqQ_eq4}）外还存在其他主动力 $\bvec F_j^{(e)}$（上标 $e$ 表示 extra）， 那么拉格朗日方程（\autoref{Lagrng_eq1}~\upref{Lagrng}）可以拓展为
\begin{equation}\label{LagEqQ_eq1}
\dv{t} \pdv{L}{\dot q_i} = \pdv{L}{q_i} + Q_i^{(e)}
\end{equation}
其中 $Q_i^{(e)}$ 的定义是把\autoref{LagEqQ_eq3} 中的 $\bvec F_j$ 替换为 $\bvec F_j^{(e)}$． 上式的证明见 “拉格朗日方程的证明、达朗贝尔定理\upref{dAlbt}”．

在该证明过程中还会发现， \autoref{LagEqQ_eq1} 中的 $\pdv*{L}{q_i} = \pdv*{T}{q_i} - \pdv*{V}{q_i}$ 的最后一项同样符合广义力的定义
\begin{equation}
Q_i^{(V)} = -\pdv{V}{q_i} = \sum_j \bvec F_j^{(V)} \vdot \pdv{\bvec r_j}{q_i}
\end{equation}
那么如果令总广义力为
\begin{equation}
Q_i = Q_i^{(V)} + Q_i^{(e)}
\end{equation}
那么拉格朗日方程\autoref{LagEqQ_eq1} 也可以完全抛开势能项记为（假设 $V$ 不显含 $\dot q$）
\begin{equation}\label{LagEqQ_eq2}
\dv{t} \pdv{T}{\dot q_i} = \pdv{T}{q_i} + Q_i
\end{equation}

\begin{example}{受阻耦合弹簧振子}
\autoref{Lagrng_ex2}~\upref{Lagrng} 中， 若两个滑块受到于速度相反， 大小与速度平方成正比的摩擦力， 比例系数为 $\alpha$， 求运动方程．

注意摩擦力是取决于运动方向的． 令 $\dot x_i \geqslant 0$ 时 $s_i = 1$，$\dot x_i < 0$ 时 $s_i = -1$， 那么使用\autoref{LagEqQ_eq3}， 广义力为
\begin{equation}
\begin{aligned}
Q_x &= F_1 \pdv{x_1}{x} + F_2 \pdv{x_2}{x} = (-\alpha s_1\dot x_1^2) \cdot \frac{1}{2} + (-\alpha s_2\dot x_2^2) \cdot \frac{-1}{2}\\
&= \frac{\alpha}{2}(s_1\dot x_1^2 - s_2 \dot x_2^2)
\end{aligned}
\end{equation}
同理得
\begin{equation}
Q_X = -\alpha(s_1 \dot x_1^2 + s_2\dot x_2^2)
\end{equation}
现在 $s_1,s_2,\dot x_1,\dot x_2$ 可以进一步写成 $\dot x, \dot X$ 的函数， 具体略． 求得含摩擦力的运动方程为
\begin{equation}
m\ddot x =  - 3kx + 2Q_x~, \qquad
m\ddot X =  - kX + \frac{Q_X}{2}
\end{equation}
\end{example}

\subsection{广义力做功}\label{LagEqQ_sub1}
若干力 $\bvec F_j$ 对系统的功率为
\begin{equation}
\begin{aligned}
P &= \sum_j \bvec F_j \vdot \dot{\bvec r}_j
= \sum_{i,j} \bvec F_j \vdot \pdv{\bvec r_j}{q_i}\dot q_i + \sum_j \bvec F_j \vdot \pdv{\bvec r_j}{t}\\
&= \sum_i Q_i \dot q_i + \sum_j \bvec F_j \vdot \pdv{\bvec r_j}{t}
\end{aligned}
\end{equation}
所以\textbf{若系统没有含时约束}， 即最后一项 $\pdv*{\bvec r_j}{t} = 0$， 则每个广义力的功率为
\begin{equation}
P_i = Q_i \dot q_i
\end{equation}
一段时间内的做功为
\begin{equation}
W_i = \int_{t_1}^{t_2} Q_i \dot q_i \dd{t}
\end{equation}
总功率和总功就是对所有 $P_i$ 和 $W_i$ 求和．

在学了虚功\upref{VirWrk}后会看到， 广义力对广义坐标积分等于虚功（\autoref{VirWrk_sub1}~\upref{VirWrk}）．
