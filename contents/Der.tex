% 导数（简明微积分）
% 微积分|导数|导函数|切线|极限

\pentry{函数\upref{functi}，切线与割线\upref{TanL}
\footnote{本文参考了\cite{同济高},\cite{Thomas}}}

\subsection{一点处的导数}
\subsubsection{几何含义}
\footnote{除非特别声明，我们暂且假定探讨的函数在定义域内处处可导，\textsl{就和大多数物理学家和工程师所默许的一样}}一个一元函数 $y = f(x)$ 在直角坐标系中表示为一条曲线。 在切线与割线\upref{TanL}中，我们已经初步了解了什么是切线与割线。

% \begin{figure}[ht]
% \centering
% \includegraphics[width=14cm]{./figures/Der_2.png}
% \caption{B趋向A，割线趋向切线} \label{Der_fig2}
% \end{figure}
\begin{figure}[ht]
\centering
\includegraphics[width=14cm]{./figures/Der_3.png}
\caption{B趋向A，割线趋向切线} \label{Der_fig2}
\end{figure}

我们先写出割线的直线方程。由于割线就是一条经过A，B两点的直线，根据高中数学知识，很容易得到
\begin{equation}
y-y_A=\frac{y_B-y_A}{x_B-x_A}(x-x_A)=\frac{f(x_B)-f(x_A)}{x_B-x_A}(x-x_A)
\end{equation}

观察割线的方程，除了斜率项$k=\frac{f(x_B)-f(x_A)}{x_B-x_A}$，其余项均与$x_B$无关。现在，如\autoref{Der_fig2} 所示，我们固定A点不动，让B点趋近于A点，即令$x_B\rightarrow x_A$，这使割线趋向于切线，它的斜率即可用极限\upref{FunLim}来定义
\begin{equation}
k=\lim_{x_B\to x_A}\frac{f(x_B)-f(x_A)}{x_B-x_A}
\end{equation}

我们把这个切线的斜率定义为$x=x_A$处$f(x)$的导数，一般记为$f'(x_A)$或$\dv{f}{x}|_{x=x_A}$。因此，我们说函数一点处的导数值就等于这点处切线的斜率。

\begin{figure}[ht]
\centering
\includegraphics[width=5cm]{./figures/Der_1.pdf}
\caption{点 $A$ 的切线。$f'(x_A)=k=\tan \theta$}
\end{figure}

更一般的，有
\begin{definition}{函数一点处的导数}
$f(x)$在$x=x_0$处的导数为
\begin{equation}
f'(x_0)=\lim_{x\to x_0}\frac{f(x)-f(x_0)}{x-x_0}
\end{equation}
也可以写为
\begin{equation}\label{Der_eq2}
f'(x_0)=\lim_{\Delta x\to0}\frac{f(x_0+\Delta x)-f(x_0)}{\Delta x}
\end{equation}
\end{definition}

% 若切线存在，该切线与 $x$ 轴的夹角 $\theta$ 的正切值，就叫点 $A$ 的导数。当函数在 $A$ 点递增时，可能的取值为 $\theta \in (0,\pi/2)$， 即 $\tan \theta  \in (0, + \infty)$。 递减时，取 $\theta  \in (-\pi/2,0)$， 即 $\tan \theta \in (-\infty ,0)$。 当切线水平时，$\theta  = \tan \theta  = 0$。 
\subsubsection{“物理”含义}
仔细观察$x=x_0$附近切线的形状与$f(x)$的形状，你很容易看出这两者是几乎一样的\footnote{这个结论可不是我瞎说的，数学上是能给出严格的证明}，这启发我们在一个小区域内用切线来近似原函数。

\begin{figure}[ht]
\centering
\includegraphics[width=14cm]{./figures/Der_2.pdf}
\caption{将切点放大，会发现切线和曲线在切点附近 “重合”}\label{Der_fig1}
\end{figure}

此时，若想计算$x$轻微增加后，函数值$y$的增量，就没有必要复杂地计算
$$\Delta y = f(x_0+\Delta x) - f(x_0)$$
，而只需要计算
\begin{equation}
\Delta y = f'(x_0) \Delta x
\end{equation}
这就引入了微分的概念\upref{Diff}。更重要的是，这启发了我们导数的另一层含义：导函数确定了$x=x_0$处，$y$关于$x$变化的“敏感度”，即$x$轻微变化时，$y$会做出多大的响应。例如，一个绝对值大的导数值意味着$y$会因为$x$的轻微变化而剧烈变化。

理解这一含义的最直白例子或许是速度\upref{VnA1}，速度被定义为物体位置关于时间的导数$v=\dv{r}{t}$。即使只靠直觉，我们也能理解\textsl{“速度快”就是指“一瞬间他就从我眼前飞过去了”}，这就是说当时间轻微增加时，物体的位置大幅变化。

%若函数曲线在某一点附近是光滑的，那么在这点附近取一小段，当这一段取得足够小，可以近似认为它是线段且与切线重合（如下图）。 以这条线段为斜边，作一直角三角形，令其底边长为 $\dd{x}$ （在微积分中，通常把非常小的一段 $\Delta x$ 记为 $\dd{x}$，  $\dd{x}$ 是一不能分割的整体符号，而不是两个量相乘），竖直边的边长为 $\dd{y}$ （当函数递增时， $\dd{y}$ 取正值，反之取负值）。根据上面导数的定义，$\dv*{y}{x} = \tan \theta $ 就是函数的导数。所以导数通常表示为 $\dv*{y}{x}$， 导数的倒数则为 $\dv*{x}{y}$。 

%由上面的讨论可得，当 $x$ 增加一小段 $\Delta x$ 时，$y$ 轴的增量约为 $\Delta y \approx f'(x)\Delta x$，且当 $\Delta x$ 越小，这条式子就越精确成立， 记为 $\dd{y} = f'(x) \dd{x}$。这个关系就叫函数的微分。
\subsubsection{单侧导数}
%需要补充一张图片，但好像有bug，上传新图片会覆盖掉旧的图片
类似于单侧极限\upref{FunLim}，我们也可以引入单侧导数的概念。如果B点从右侧趋近A点，但始终不运动到A点的左侧，那么此时切线的斜率即为该点处函数的右导数值，可以记为$f'_+(x_A)$。更一般地，用极限的语言可以写为：

\begin{definition}{单侧导数}\label{Der_def1}
$f(x)$在$x=x_0$处的右导数为：
\begin{equation}
f'_+(x_0) = \lim_{x\to x_0^+} \frac{f(x)-f(x_0)}{x-x_0}
\end{equation}
同理，可以定义左导数：
\begin{equation}
f'_-(x_0) = \lim_{x\to x_0^-} \frac{f(x)-f(x_0)}{x-x_0}
\end{equation}
\end{definition}

类似于极限，我们也有
\begin{theorem}{}
函数在某点可导的充分必要条件是它左右导数都存在并相等。
$$f'(x_0)=A\Longleftrightarrow f'_+(x_0)=f'_-(x_0)=A$$

也就是说，若左（或右）导数不存在，或者左、右导数存在但不相等，那此处的导数就不存在。
\end{theorem}

\begin{example}{}
如图，在棱角处，虽然函数连续，甚至左、右导数均存在，但他们的大小不相同，因此在棱角处该函数不可导。
\begin{figure}[ht]
\centering
\includegraphics[width=5cm]{./figures/Der_3.pdf}
\caption{棱角处不可导}
\end{figure}

\end{example}
\subsection{导函数}
在上文中，我们定义了一点处函数的导数。原则上我们可以任意选取函数定义域中的一点，然后用根据上文“导数的定义”找到该点处的导数值。这也就是说，对于函数定义域中的任意一点，都有一个导数值与之对应，这符合函数\upref{functi}的定义，也就是说我们可以在这二者间定义一个新函数，这就是$f(x)$的“导函数”；在不引起混淆的情况下往往简称为“导数”。
%若函数曲线在 $x$ 的某一开区间内的每一点都可导， 则这个区间上每一个 $x$ 对应一个导数。将其写成关于 $x$ 的函数 $g(x)$，  $g(x)$  就是该区间上的 \textbf{导函数}。 

字面上看，导函数的定义与一点处函数的导数完全类似。
\begin{definition}{导函数}
\begin{equation}
f'(x)=\lim_{\Delta x\to0}\frac{f(x+\Delta x)-f(x)}{\Delta x}
\end{equation}
\end{definition}

通常将导函数记为以下的一种%（后3种记号的来源见下文）
\begin{equation}\label{Der_eq1}
f'(x),\quad [f(x)]',\quad \dv{y}{x},\quad \dv{f}{x},\quad \dv{x}f(x)
\end{equation}
在物理中， 还可以在物理量上方加一点表示对时间求导（注意仅限于对时间求导）， 例如 $\dot f(t) = \dv*{f(t)}{t}$。

\begin{example}{}\label{Der_ex1}
计算$f(x)=2x+3$的导函数。

根据定义，
$$
\ali{
f'(x)&=\lim_{\Delta x\to0}\frac{f(x+\Delta x)-f(x)}{\Delta x}\\
&=\lim_{\Delta x\to0}\frac{[2(x+\Delta x)+3]-(2x+3)}{\Delta x}\\
&=\lim_{\Delta x\to0}\frac{2\Delta x}{\Delta x}\\
&=2
}
$$
事实上，所有直线方程的导函数都是常函数，且数值上等于自己的斜率。当然，实际上很少直接使用定义计算导数，有一些技巧可以简化求导过程（见本节其他文章）。
\end{example}

\begin{example}{}
计算$f(x)=C$的导函数, 其中C是常数。

仍然根据定义，
$$
\ali{
f'(x)&=\lim_{\Delta x\to0}\frac{f(x+\Delta x)-f(x)}{\Delta x}\\
&=\lim_{\Delta x\to0}\frac{C-C}{\Delta x}\\
&=\lim_{\Delta x\to0}\frac{0}{\Delta x}\\
&=0\\
}
$$
因此常函数的导数为零。这可以理解为\autoref{Der_ex1} 当$x$的系数为零时的特例。
\end{example}
% 若切线不存在（例如折线的棱角处，但也有其他更复杂的情况）， 我们说点 $kjA$ 不可导。 如果某区间内是 “光滑” 的， 那么的该区间内处处可导。

% \begin{figure}[ht]
% \centering
% \includegraphics[width=5cm]{./figures/Der_3.pdf}
% \caption{棱角处不可导}
% \end{figure}

% \subsection{导数的严谨理解}
% 导数的代数理解就是： 一个量关于另一个量的变化率。 例如质点直线运动时，速度的大小就是其路程对时间的导数。把这种描述用极限\upref{Lim}表达出来就是
% \begin{equation}\label{Der_eq2}
% f'(x) = \lim_{\Delta x \to 0} \frac{f(x + \Delta x) - f(x)}{\Delta x}
% \end{equation}
% 在图3的右图中，$\Delta x$ 的始末位置并不非常重要，既可以从 $x$ 取到 $x + \Delta x$， 也可以从 $x - \Delta x$  取到 $x$ 等等（ 因为当 $\Delta x$ 非常小的时候，$x$ 附近的曲线基本处处跟切线重合，它们的斜率都是一样的）。 所以导数的定义也有其他类似的形式

% \begin{equation}
% f'(x) = \lim_{\Delta x \to 0} \frac{f(x) - f(x - \Delta x)}{\Delta x} = \lim_{\Delta x \to 0} \frac{f(x + \Delta x) - f(x - \Delta x)}{2\Delta x}
% \end{equation}
% 虽然上面用到了诸如“近似”等词，但根据定义，极限都是精确的。

% 例子： 速度 加速度（一维）\upref{VnA1}。







