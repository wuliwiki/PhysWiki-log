% 磁场的能量
% keys 磁场|能量密度|麦克斯韦方程组
% license Xiao
% type Tutor
%未完成 不要写那么深! 先从两片面电流开始推导! (包括介质)

\begin{issues}
\issueTODO
\issueMissDepend
\end{issues}

\pentry{磁矢势\nref{nod_BvecA}}{nod_3890}

磁场 $\bvec B(\bvec r)$ 的能量密度为
\begin{equation}\label{eq_BEng_1}
W = \frac{1}{2\mu_0} \int \bvec B^2 \dd{V}
\qquad 
\text{或}
\qquad
W = \frac12 \int \bvec A \vdot \bvec J \dd{V}~.
\end{equation} 
其中 $\mu_0$ 是真空中的磁导率， $\bvec A$ 是磁场矢势\upref{BvecA}， $\bvec J$ 是电流密度，积分是对全空间积分（或者对被积函数不为零的空间积分）。
\subsection{幼稚的推导}
\pentry{电感\nref{nod_Induct}}{nod_22b5}
首先我们根据能量守恒的思想，假设给一个电感\upref{Induct} $l$ 充电的能量都以“磁场能”的形式储存起来，且每个点的能量密度只是磁场强度绝对值的函数。

在\autoref{ex_AmpLaw_2}~\upref{AmpLaw}中， 我们知道螺线管中的磁场强度为
\begin{equation}\label{eq_BEng_8}
B = \mu_0 nI~.
\end{equation}
该螺线管的电感为
\begin{equation}\label{eq_BEng_9}
L = \mu_0n^2lS~.
\end{equation}
该螺线管的能量\upref{Induct}为
\begin{equation}\label{eq_BEng_10}
E_B = \frac{1}{2}L I^2~.
\end{equation}
将\autoref{eq_BEng_8} ,\autoref{eq_BEng_9} 代入 \autoref{eq_BEng_10} 
\begin{equation}
E_B=\frac{1}{2} \mu_0n^2lS (\frac{B}{\mu_0 n})^2=\frac{1}{2\mu_0} B^2 lS~.
\end{equation}
$lS$即为螺线圈的体积，写为积分形式，即为
\begin{equation}
W = \frac{1}{2\mu_0} \int \bvec B^2 \dd{V}~.
\end{equation}
这就是螺线圈中磁场的能量。

\subsection{简单的推导}
 我们首先考虑一个单匝线圈的磁场能量
\begin{figure}[ht]
\centering
\includegraphics[width=12cm]{./figures/1391d05d84e60540.pdf}
\caption{单匝线圈} \label{fig_BEng_1}
\end{figure}

假设 $t = 0$ 时 $I = 0$， 此时没有磁场，磁场能量为零。

接下来将线圈接入外部电源，令 $I$ 随着 $t$ 慢慢增加。变化的电流激发变化的磁场\upref{AmpLaw}，而变化的磁场又产生一个反向电动势\upref{FaraEB}。反向电动势为（定义与电流相同的方向为正）
\begin{equation}\label{eq_BEng_2}
\varepsilon  =  - \dv{\Phi}{t} =  - \dv{t} \int \bvec B \vdot \dd{\bvec s} 
=  - \dv{t} \int \qty(\curl \bvec A) \vdot \dd{\bvec s} 
=  - \dv{t} \oint \bvec A \vdot \dd{\bvec l}~.
\end{equation}
电源克服反电动势的功率为
\begin{equation}\label{eq_BEng_3}
\dv{W}{t} =  - \varepsilon I = I\dv{t} \int \bvec B \vdot \dd{\bvec s} = \int I \dv{\bvec B}{t} \vdot \dd{\bvec s}~.
\end{equation}
从能量守恒角度看，这部分功率对应的能量转换为了磁场的能量\footnote{自感对电流的阻碍作用或许让你联想到电阻的阻碍作用，但这两者有一些微妙的不同。在电阻中，电能转换为热能；而在自感线圈中，电能转换为了磁场能。}。由于磁场与电流成正比（见比奥萨伐尔定律\upref{BioSav})
，不妨设 $\bvec B = \bvec bI$　。则
\begin{equation}\label{eq_BEng_4}
I \dv{\bvec B}{t} = \bvec bI \dv{I}{t} = \frac{\bvec b}{2} \dv{I^2}{t} = \dv{t} (\frac12 I\bvec B)~,
\end{equation}
所以
\begin{equation}\label{eq_BEng_5}
\dv{W}{t} = \dv{t} \qty(\frac12 \int I\bvec B \vdot \dd{\bvec s})~.
\end{equation}
注意两边都是对时间的导数。两边对时间积分，得
\begin{equation}\label{eq_BEng_6}
W = \frac12 \int I\bvec B \vdot \dd{\bvec s}~.
\end{equation}
注意当 $I = 0$ 时 $ W = 0$， 所以积分常数为零。注意在上述过程中，并没有假设电流以什么样的函数随时间变化（只要是缓慢变化即可）。
\begin{equation}\label{eq_BEng_7}
W = \frac{I}{2} \int \bvec B \vdot \dd{\bvec s}  = \frac{I}{2} \int \curl \bvec A \vdot \dd{\bvec s}  = \frac12 \oint I\bvec A \vdot \dd{\bvec l}~.
\end{equation}
\addTODO{推导}
 
