% 函数（高中）
% keys 函数|定义域|值域|二元函数
% license Xiao
% type Tutor

% 所有作者已经同意把协议改为 Xiao

\pentry{集合（高中）\nref{nod_HsSet}，集合的基本关系（高中）\nref{nod_HsSeOp}，函数回顾（高中） \nref{nod_HsFunB}}{nod_19dc}

在小学学习数学时，老师会先教你数数，然后引导你学习加减法等基本运算。到了初中，老师会让你理解边、角等几何的基本概念，再逐步带领你探索平面图形内部的线与角之间的关系。在高中阶段，主要的研究基础就是实数集。通过前面的学习，相信你已经掌握了集合和元素的知识，积累了一些理解新概念的经验，是时候开始探数集之间的关系——函数了。函数将成为你理解和分析数学问题的重要工具。

\subsection{函数}

想象一下，有这样一间高度自动化的\aref{工厂}{fig_functi_1}，我们将各种原材料投入到工厂的入料口，经过一系列复杂的加工和处理，最终得到了各种精致的产品。

\begin{figure}[ht]
\centering
\includegraphics[width=5cm]{./figures/720d887f9539bb73.png}
\caption{自动化工厂} \label{fig_functi_1}
\end{figure}

从原材料的视角来看，工厂代表着那个让原材料经过一系列操作最终变成产品的处理过程。原材料进入工厂后，经历了各种操作、转化，最终变成了某种特定的产品。而从外部的视角来看，工厂则起到了桥梁的作用：它将每一个原材料与特定的产品连接起来。无论原材料是什么，只要经过这个处理过程，都会对应生成一个特定的产品。

在数学上，函数同样扮演着这间工厂的角色，它将一个集合中的元素通过一定的规则对应到另一个集合中的元素。正如工厂里的每一道工序都有其明确的目的和结果，函数的每一个操作也都明确地将一个输入对应到一个输出。就像集合中的那个塑料袋一样，每次遇到函数时，你都可以采用这个工厂的模型来理解它。

其实，在初中时，你就已经接触过函数了。你或许还\enref{记得}{HsFunB}正比例函数、反比例函数以及一次函数、二次函数。想一想你最初接触函数概念的时候，是怎么做的。那时，老师给了你一个等式，等式左边是y，右边是含有x的一个式子，以一次函数为例，就是$y=kx+b$的样子。然后提供了一张\aref{表格}{tab_functi_1}，让你将不同的$x$值代入表达式中，计算出相应的$y$。接着，在平面直角坐标系上依次标出点$(x,y)$，并利用想象将它们连成一条曲线。称这个曲线就是函数的图象。

\begin{table}\label{tab_functi_1}[ht]
\centering
\caption{研究函数图象的表格}\label{tab_functi1}
\begin{tabular}{|c|c|c|c|c|}
\hline
x & -2 & -1 & 0 & 1 \\
\hline
y &   &   &   &   \\
\hline
\end{tabular}
\end{table}

在初中的数学学习中，主要关注这三个函数的图象的性质，比如形状、与坐标轴的交点等等。那个时候，我们通常把表达式本身与函数图象等同起来，认为好像那条曲线就是我们口中的函数，或者认为一个函数就是一个计算式，输入一个数字，然后通过计算式计算以输出一个数字。

现在回忆结束，让我们来看一看高中数学中的函数和初中的联系。初中的函数知识其实已经涵盖了函数的许多重要特点和性质，这些内容在未来的函数学习中仍然非常重要，在初中阶段主要是以函数图象的特质来描述，比如：
\begin{itemize}
\item 函数图象与$x$轴的交点
\item 两个函数图象的交点
\item 某类函数图象是否过某定点
\item 函数图象的对称轴
\item 某条直线的斜率
\item 函数图象上某点与坐标轴形成的矩形的面积
\end{itemize}

同时，初中阶段也给出了一个函数定义，说的是：如果在一个变化过程中有两个变量$x,y$，对于每个确定的$x$值都有唯一的$y$值与它对应，就称$y$是$x$的函数。这里要求每一个$x$都能找到一个与之对应的$y$，这其实就是函数定义的精髓部分。而这个概念从变量的观点和解析式的方法来描述函数，在实际使用上有些局限，无法描述更复杂的问题。

由于函数的种类多样，每次都将函数完整写出来的方法过于麻烦，有时也不完全确定函数表达式的样子，在高中，我们开始用符号来标记表达式。以刚才说过的老师给你的等式为例，等式右边的那个含有$x$的式子，我们一般用下面的记号来表示：
\begin{equation}
f(x)~.
\end{equation}

其中，$f$是给这个式子起的名字，一般取的名字是$f,g,h$等，至于为什么是$f$，后面会提到。$x$代表式子中的变量，以刚才的一次函数为例，就可以认为$f(x)=kx+b$，这时，$x$是变量\footnote{\textbf{变量}通常用来表示一个未知的数或在一个确定情况下可以取不同值的数。}，$k,b$就是参数\footnote{\textbf{参数}是用来描述某个函数或方程的特性或行为的常数。参数的值通常在一个特定的问题或情境中被固定下来，但可以在不同的情境中改变。}。于是一个函数按照刚才的说法，右侧用$f(x)$代替后的样子，就写成了$y=f(x)$的形式。这样既明确了变量是什么，又可以直接表示具有某些特点的一类函数。现在套用集合的语言，将函数的定义给出如下：

\begin{definition}{函数}\label{def_functi_1}
对于两个非空数集$X$和$Y$，$f$是一个二元关系\footnote{和初中的认知一样，这里的二元指的是两个变量。而“关系”指的是一种特殊的数学概念，高中阶段不涉及，此处认为是两个变量之间存在联系即可。}，且满足对于每个$x\in X$都存在唯一的$y\in Y$与它对应，则称$f$是一个定义在$X$上的或从$X$到$Y$的\textbf{函数}（function），记作：
\begin{equation}
y=f(x),x\in X~.
\end{equation}
其中：
\begin{itemize}
\item $X$称为\textbf{定义域}（domain）
\item 所有的函数值$y$构成的集合，即$\{y|y=f(x),x\in X\}$称为\textbf{值域}（range）。
\end{itemize}
\end{definition}

关于这个概念需要注意的几点：
\begin{itemize}
\item 定义域和值域可以像二次函数一样不同，也可以像一次函数一样相同。
\item 尽管函数的三个要素是：定义域、对应关系和值域，但函数的值域是由定义域和对应关系唯一确定的，因此一般不会特别提及。
\item 在不产生歧义的情况下，一般默认函数的定义域是使得表达式有意义的所有实数构成的集合，此时可以省略定义域不写。比如：$y={1\over x}$的定义域默认是$(-\infty,0)\cup(0,+\infty)$。
\item 两个函数如果定义域和对应关系完全相同，则两个函数不论表达式是否完全一致，都相同。比如：$y=\sqrt{x^2}$和$y=|x|$，在定义域都是$\mathbb R$的情况下，是同一个函数。而对于三个字母$x,y,f$，由于他们只是一个名字，只要能保证换名前后的两个函数的定义域和对应关系都是一致的，更换字母并不会让函数变成另一个函数。
\item 由于函数的定义域和值域都是数集，因此一般会使用“区间”来表示，例如：一般在记录结果时会写作$(-\infty,0)\cup(0,+\infty)$而不写作$\{x|x\neq0\}$。
\end{itemize}

\subsection{函数的表示方法}

你应该还记得集合的表示方法分为枚举法、描述法和图示法，这三者各有优势，需要根据情况使用。函数也一样，下面是函数的两种表示方法。

\subsubsection{解析法}

根据函数定义下面的“注意”，在一般情况下，值域和定义域都不需要特别写明。这也就是说，对函数最重要的就是对应关系$f$，因此很多时候就直接简称为“函数$f(x)$”或“函数$f$”。如果没有需要对$y$进行操作的情况，因为默认$y=f(x)$，在描述函数的表达式时也不再写$y$，而是直接写$f(x)=kx+b$（以一次函数为例）。而$f(x)$之所以一般用$f$就是因为f是函数单词function的首字母。

这样抽象之后，我们不仅可以研究某个函数，可以研究某一类具有共同形式的函数，也更清晰这些函数中哪些是变量、哪些是参数。通过调整看待某个量是参数还是变量的视角，看待包含多个量的函数的视角也多样起来。

我们现在针对$f$本身，总结一下看待函数的视角：

\begin{itemize}
\item 处理过程：函数可以看作从输入得到输出的一个过程。函数的表达式就是用来具体告诉我们如何通过输入得到相应的输出。
\item 对应关系：函数在两个集合之间建立一种对应关系。这种关系将一个集合中的每个元素与另一个集合中的元素相对应，建立了一个对应法则。
\item 选取条件：如果把坐标平面看成一个空间，那么每一个坐标$(x,y)$（或者说变量的有序对）可以理解为从空间中选出的满足特定条件的点的集合。函数图象实际上是这些满足条件的点在平面上的呈现。而函数就是集合所满足的性质或条件。
\end{itemize}

当遇到问题时，如果问题恰好符合上面的某个视角，就可以采用函数来解决。而不同视角之间也可以相互转化，因此在实际解决问题时，更换视角或许能给你带来一些新的灵感。

最后提一下，根据上面的简写规则，在某点$a$上（或称$x$取$a$时）的函数值一般记作：
\begin{equation}
f(a)\qquad\text{或}\qquad y|_{x=a}\qquad\text{或}\qquad f(x)|_{x=a}~.
\end{equation}
而在$x=a$处（或简称“$a$处”）的点，一般记作：
\begin{equation}
(a,f(a))~.
\end{equation}

这里有必要介绍一类稍显特殊的函数。假设定义域有一些子集，这些子集两两之间交集为空集，子集全体的并集为定义域\footnote{一般称呼这些子集为一个\textbf{集族}。}。函数在这些不同的子集上有不同的规律。例如，现在想要描述一个人眨眼睛的规律，那么很显然在这个人醒着和睡眠时这个规律是不一样的，醒着时眨眼的频率是一分钟15次，睡眠时则不会睁眼睛，因此频率就是0。而醒着的时间和睡眠的时间合起来就是一整天。如果自变量是一天中的某个时刻$t$，函数$f$描述的是这个时刻眨眼的频率，那么就有：
\begin{equation}
f(t)=
\begin{cases}
15,\qquad&t\in\{t|\text{这个人在}t\text{时醒着}\}\\
0,\qquad&t\in\{t|\text{这个人在}t\text{时睡眠}\}\\
\end{cases}~.
\end{equation}

这样的函数称为\textbf{分段函数}，在记录时需要将每一段的表达式写清楚放在大括号中，同时，由于定义的集合很重要，因此要在表达式后面写清他生效的子集。
\begin{example}{写出绝对值函数$f(x)=|x|$的具体表达式}
根据绝对值的定义，负数的绝对值是它的相反数，正数的绝对值是它自身，0的绝对值是0。因此：
\begin{equation}
|x|=
\begin{cases}
x,\qquad&x\in(0,+\infty)\\
0,\qquad&x\in\{0\}\\
-x,\qquad&x\in(-\infty,0)
\end{cases}~.
\end{equation}
\end{example}

根据例题可以看出，绝对值函数其实是一个分段函数，尽管一般出现时会写成$|x|$的形式，但在分析时一般需要按照分段函数的方法展开再研究。

\subsubsection{图象法}

相较于解析法，事实上，图像法对于现在的你而言会更为熟悉。毕竟，在初中阶段，对函数的研究完全建立在就函数图像的基础上。因此，在这里不会对此赘述太多。

在画图时，一般的步骤是求出函数的一些特殊点和一些特殊的关系，然后根据性质了解其图像的趋势，最后在坐标系中大概画出。

这里有一点是需要提醒你注意，尽管高中阶段触及的所有函数都是有图像的，而高中的在研究函数时，也有一大部分是需要从图像的视角去理解和处理。但由于函数的范畴相较于初中已经扩大了不少，其实存在着一些函数是无法画出他的图象的，也就是说它无法用图象法表示，或它不存在图像。一个比较有名的例子是狄利克雷函数$D(x)$，他是定义在实数集上的一个函数，它在自变量取有理数时为1，否则为0，即：
\begin{equation}\label{eq_functi_1}
D(x)=\begin{cases}
1,\qquad& x\in\mathbb{Q} \\
0,\qquad& x\notin\mathbb{Q}  \\
\end{cases} ~.
\end{equation}

当然狄利克雷函数和其他的无图象的函数在高中阶段不会触及，此处给出作为扩展。

\subsection{复合函数}

还是以之前提到的工厂为例，如果我们深入这个工厂观察它的生产过程，就会发现它在制造产品时往往要经过多道工序。假设原材料要经过两道工序：首先，原材料进入第一道工序，被加工成中间产品；接着，中间产品再进入第二道工序，最终被加工成最终产品。这里有一个很有趣的现象，中间产品既是第一道工序的输出，也是第二道工序的输入。

更妙的是，从外部来看，这两道工序的组合实际上与整个工厂的功能是等价的。也就是说，工厂整体所代表的函数，其实是由这两道工序各自代表的函数复合而成的。通过这种复合，工厂能够将复杂的生产过程高效地组织起来。对于管理者而言，只需要关注工厂的整体运作，而不必了解每道工序的细节；对于实际操作的工人而言，他们只需专注于自己负责的那部分工序，而不必了解整个工厂的运作方式。在数学中，复合函数也是通过这种方式，将多个简单的函数连接在一起，形成更复杂的函数关系。而一个复杂的函数，也可以通过拆成几个简单函数复合的形式来针对性地研究，降低研究的难度。根据上面观察到的模型，我们给出复合函数的定义：

\begin{definition}{复合函数}
设有两个函数$f(t),g(x)$，$g(x)$的定义域为$X$，$f(x)$的定义域与$g(x)$的值域相同，若将函数$g$的输出作为函数$f$的输入，产生的新函数称作$f$与$g$的复合函数，记作：
\begin{equation}
f(g(x))\qquad\text{或}\qquad(f \circ g)(x)~.
\end{equation}
，且复合函数与$g(x)$的定义域相同为$X$。
\end{definition}

这里需要注意：
\begin{itemize}
\item 第二种写法在高中阶段并不使用，但它其实反映了另一个视角。以工厂的那个例子来看，前面的写法是从原材料的视角来看的，它先进入一个过程，再进入另一个过程；而后面的写法则是先把两个过程合并到一块，抽象成整个工厂，然后再认为原材料进入工厂就称为产品了。与我们平时习惯的从左到右的顺序不同，这里因为被作用的$x$在右边，本着离着近的先作用，于是，先后顺序变成了从右到左，事实上前一种写法看上去也是先作用的在右边的。
\item 一般当$g(x)$比较简单且明确时，会直接写在$f$的表达式之中，而不是单独写出。比如，如果$g(x)=x-1$，那么一般会直接写成$f(x-1)$。看到这种写法时，请务必意识到它是复合函数。
\end{itemize}

\begin{exercise}{$f(x^2-1)$的定义域是$(2,+\infty)$，求$f(x-3)$的定义域。}
答案：

$f(x-3)$的定义域是$(6,+\infty)$。

解析：

将原本的命题写出应为：对$f(g(x))$，$g(x)=x^2-1$，$g(x)$的定义域是$(2,+\infty)$，求$f(h(x))$中$h(x)=x-3$的定义域。

根据$g(x)$的定义域是$(2,+\infty)$，$g(x)=x^2-1$，可知$g(x)$的值域是$(3,+\infty)$。根据复合函数的要求$f(x)$的定义域就是$(3,+\infty)$，从而需要$h(x)$的值域是$(3,+\infty)$，根据$h(x)=x-3$，可知$h(x)$的定义域是$(6,+\infty)$。综上，也就是$f(x-3)$的定义域是$(6,+\infty)$。

\end{exercise}

\subsection{反函数}

根据上面复合函数的知识，可以得到一种特殊的函数关系。

\begin{definition}{反函数}

设有两个函数$f(t),g(x)$，以及他们的复合函数$f(g(x))$，如果满足$f(g(x))=g(x)$，则称$f$和$g$互为\textbf{反函数}（\textbf{inverse function}，也译作\textbf{逆函数}），记作：
\begin{equation}
g^{-1}(x)=f(x)~.
\end{equation}
\end{definition}

关于这个概念有几点注意：
\begin{itemize}
\item 为了表示方便，在记法中将自变量$t$替换为了$x$，请注意$g^{-1}(x)$的$x$与$g(x)$的$x$代表的并不是同一个量。为了避免混淆，有时也会将其记作$g^{-1}(y)$。
\item 根据复合函数的要求可知，要求$g^{-1}(x)$的定义域和值域分别是$g(x)$值域和定义域。
\item 反函数是指两个函数间的关系，而非某个函数自己的性质，这一点也可以从复合函数是两个函数作用的结果看出。
\end{itemize}

在实际计算$y=f(x)$的反函数时，可以直接互换$x,y$的位置，得到$x=f(y)$。由于两边同时作用$f^{-1}$时，等式仍然成立，即有$f^{-1}(x)=f^{-1}(f(y))=y$。因此，只要针对$x=f(y)$把$y$解出来，得到的$y=g(x)$就是$f(x)$的反函数，或者说$x=f(y)$这个等式本身就蕴含着$y=f(x)$的反函数。

根据上面的算法，我们可以知道，互为反函数的两个函数其实就是$x,y$互换了而已。而在图像上，则意味着二者关于$y=x$这条直线对称，这是非常重要的性质，根据这个性质我们可以知道：
\begin{itemize}
\item $f(x)=x$的反函数是它自身。
\item $y=f(x)$上的点$(x_0,y_0)$和$y=f^{-1}(x)$上的点$(x_1,y_1)$，在$x_0=y_1$时，两点连线与$y=x$垂直（或者说斜率为-1），且两点到$y=x$的距离相同。
\item $y=f(x)$与$y=f^{-1}(x)$的交点一定在$y=x$上。
\item 注意与后面会学习到的函数的对称性区分，反函数是两个函数的关系，对称性是一个函数内部的性质。
\item 由于对称前后都是函数，因此要求对称之前的函数满足：每个自变量值对应的函数值是唯一的，而每个函数值对应的自变量值也是唯一的\footnote{这是后面会接触到的\aref{单调}{sub_HsFunC_1}，这里先感性地认识一下。}。
\item 根据上面一条，我们往往可以通过缩小定义域的方式来使一个函数满足上面的要求，进而具有反函数。例如 $f(x)=x^2,x\in\mathbb{R}$没有反函数，但$f(x)=x^2,x\in[0,\infty)$就具有反函数，它的反函数$f^{-1}(x)=\sqrt{x},x\in[0,\infty)$
\end{itemize}

\begin{exercise}{证明$f(x)=x$的反函数是它自身。}
证明：

根据定义有$f^{-1}(f(x))=x$，代入$f(x)=x$有：
$$
f^{-1}(x)=x=f(x)~.
$$

证毕。
\end{exercise}



\subsection{*映射}

请注意，这一部分的内容已经完全从高中数学中删除，但由于其地位重要及为了了解一些相关概念，这里介绍一下映射及相关的概念。其实，刚才学习的函数特指的是数集之间的关系，如果不限定集合中的元素是数字的话，就可以把“函数”的概念推广，得到“映射”。

\begin{definition}{映射}
对于两个非空集合$A$和$B$，$f$是一个二元关系，且满足对于每个$a\in A$都存在唯一的$b\in B$与它对应，则称$f$是一个定义在$A$上的或从$A$到$B$的\textbf{映射}（mapping），记作：
\begin{equation}
f:A\to B\qquad\text{或者}\qquad f:a\mapsto b~.
\end{equation}
其中：
\begin{itemize}
\item $A$称为\textbf{定义域}（domain）
\item $a$称为\textbf{原像}（preimage）
\item $B$称为\textbf{陪域}（codomain，也译作\textbf{到达域}、\textbf{上域}）
\item $b$称为\textbf{像}（image）
\item 所有的像构成的集合称为\textbf{值域}（range），值域是陪域的子集。
\end{itemize}
\end{definition}

对比\aref{函数的定义}{def_functi_1}看到，映射和函数定义上的区别只是对于集合的限定，相当于映射是增加了函数概念的外延。由于所有的数集都是集合，所以函数都是映射，那么既可以用映射的记号表示函数，例如：$f: \mathbb R \to \mathbb R$表示一个定义域和值域都为实数集的函数；$f:x \mapsto y$表示一个自变量为$x$，函数值为$y$的函数；也可以使用上面域映射相关的概念，如像、原像等来描述函数的相关概念。请注意这些写法和概念在高中阶段均不使用。

根据定义，映射已经限定了所有的$x$都必须能找到对应的值，因此从映射的结果看，$Y$有四种可能：
\begin{itemize}
\item 存在一些$y$是没有对应（0个）的$x$的，剩下都只对应一个（单射）
\item 每个$y$都只对应一个（1个）$x$的（双射）
\item 存在一些$y$对应了好几个（多个）$x$的，剩下都只对应一个（满射）
\item 既存在一些$y$是没有对应的$x$的，又存在一些$y$对应了好几个$x$的
\end{itemize}

由于前三个比较容易研究，因此分别称为单射、双射、满射，理解清楚会对反函数的学习有帮助。下面给出这三个概念的具体定义，如果不理解，只参照刚才的文字或后面给出的图片形象记忆就可以了，高中这里并不要求掌握每个概念。

\begin{definition}{单射、满射、双射}
设$f:A\to{B}$，若：
\begin{itemize}
\item 对任意$a_1,a_2\in{A}$，$a_1\not={a_2}$，都有$f(a_1)\not={f(a_2)}$，则称$f$是一个\textbf{单射}（injective）。
\item 任意$b\in{B}$，都存在$a\in{A}$，使得$f(a)=b$。则称$f$是一个\textbf{满射}（surjective）。
\item $f$既是单射又是满射，则称$f$是一个\textbf{双射}或者\textbf{一一对应}。
\end{itemize}
\end{definition}

\begin{figure}[ht]
\centering
\includegraphics[width=3cm]{./figures/f6cfb71bb0c378ef.png}
\caption{单射}\label{fig_functi_2}
\end{figure}
\begin{figure}[ht]
\centering
\includegraphics[width=3cm]{./figures/3031fee516997db1.png}
\caption{满射} \label{fig_functi_3}
\end{figure}
\begin{figure}[ht]
\centering
\includegraphics[width=3cm]{./figures/9fef429051c64955.png}
\caption{双射} \label{fig_functi_4}
\end{figure}
\subsection{总结}

阅读完上面的内容，相信你已经开始对函数这个新朋友有一些熟悉的感觉了。实际上，函数的概念涵盖了非常广泛的领域，它不仅是一个数学工具，更代表了一种深刻的思维方式——找寻基本的单元，研究彼此的关系\footnote{更底层的抽象是两个元素之间或两个集合之间的“关系”。注意这里的“关系”并非语言上的泛指，而有严格的数学定义。函数是一种特殊的关系，而由于函数的概念大多数人都接触过，而且函数的英语本身也有功能的意思，有很多场合用函数来代指映射、变换等并非函数的关系，但这些概念高中不会接触到，此处只是提示，希望你在未来遇到时注意。}。而因为数字是我们最为熟悉的元素，数集也是我们最为熟悉的集合，所以研究数集之间关系的函数在人们的认知中占据了特别重要的地位。函数这种概念不仅限于数学中的数集，它在各种领域中都有着广泛的应用。

从现在开始，直到你未来的大学、研究生学习，你都会遇到各种各样不同类型的函数。无论是在物理、经济学还是计算机科学中，函数都是用来描述复杂关系的核心。函数不仅仅是一个数学符号，它是一种让你能够用更抽象、更广阔的视角去理解世界的方法。通过将一个特定的过程或现象抽象成一个函数，并利用函数的性质去分析和预测其行为，你可以更深入地理解事物的动态变化。在生活中，你可能会发现，很多问题都可以通过函数的视角来处理和解决。这种方法将成为你未来学习和工作的基石，是帮助你分析、理解和解决问题的强大工具。
