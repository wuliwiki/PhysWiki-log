% 可测集合
% keys 实变函数|Lebesgue积分

\pentry{集合的测度（实变函数）\upref{SetMet}}

\subsection{可测集及其性质}

在\textbf{集合的测度（实变函数）}\upref{SetMet}中我们提到，Lebesgue积分是对值域作分划。但是值域作分划以后，有可能出现\autoref{ex_SetMet_1}~\upref{SetMet}那样病态的两个集合，它们互不相交，但其并集的测度小于各自测度之和。这就好比对定义域作分划的Riemann积分中，两根柱子的总面积小于单个柱子的面积之和，非常不符合直觉，而且会导致无法建立自洽的理论。

因此，讨论Lebesgue积分时，我们要对集合的性质作出限制，只讨论所谓的\textbf{可测集合（measurable set）}，以及进而导出的\textbf{可测函数（measurable function）}。

\begin{definition}{可测集}\label{def_MsbSet_1}
设 $E$ 为 $\mathbb{R}^n$ 的子集，满足：对于 $\mathbb{R}^n$ 的任意子集 $A$，都有
\begin{equation}
\opn{m^*}(A\cap E)+\opn{m^*}(A\cap E^C)=\opn{m^*}A~,
\end{equation}
那么称 $E$ 为\textbf{Lebesgue可测集}\footnote{$E^C$ 表示 $E$ 的补集。}，\textbf{在实变函数领域内}简称\textbf{可测集}\footnote{测度的定义有很多种，所以“可测”的定义也可能不同，简称可能会带来歧义。故我们特别声明，实变函数领域内“可测集”是“Lebesgue可测集”的简称。其它领域可能不同。}。此时记 $\opn{m^*}E=\opn{m}E$。

不是可测集的集合，就称为\textbf{不可测集}。

\end{definition}

这个定义初看很绕口，我们在这儿多加些解释。可测集 $E$ 可以看成一种分割，它可以把任何集合 $A$ 都分成两部分，使得分出来的两部分的测度之和就等于 $A$ 的测度。像\autoref{ex_SetMet_1}~\upref{SetMet}中最后构造的两个集合 $\bigcup_{i=1}^k S_i$ 和 $S_{k+1}$，它们都是\textbf{不可测集}，只需要取 $A=\bigcup^{k+1}_{i=1} S_i$ 再比较\autoref{def_MsbSet_1} 即可证明这一点。

看起来可测集的定义要求很严格，对 $A$ 毫无约束，那么可测集存在吗？答案是肯定的，最简单的例子就是测度为零的集合，又叫零测集。

\begin{example}{可测集的例子：零测集}

如果 $\opn{m^*}E=0$，那么 $E$ 是可测的。

任取 $A\in\mathbb{R}^n$，那么由外测度的单调性，$\opn{m^*}(A\cap E)=0$。

又由外测度的次可加性，
\begin{equation}\label{eq_MsbSet_1}
\begin{aligned}
\opn{m^*}(A)&=\opn{m^*}([A\cap E]\cup[A\cap E^C])\\
&\leq \opn{m^*}(A\cap E)+\opn{m^*}(A\cap E^C)\\
&=\opn{m^*}(A\cap E^C)~.
\end{aligned}
\end{equation}

再由单调性知，\autoref{eq_MsbSet_1} 中的不等号应为等号。由此得证。

\end{example}

\begin{theorem}{可数集都是零测集}\label{the_MsbSet_4}

如果一个点集中只含有至多可数个点（比如有理数集），那么这个点集必是零测集。

\end{theorem}

\textbf{证明}：

设 $E$ 是可数集，则可以给其中的每个元素编号，将它写为 $E=\{x_k\}_{k=1}^\infty$。任取 $\epsilon>0$。可以用区间 $(x_k-\epsilon/2^k, x_k+\epsilon/2^k)$ 来包含 $x_k$ 点，从而得到覆盖 $E$ 的开集，且该开集的体积为 $2\epsilon$。由于 $\epsilon$ 的任意性，可知覆盖 $E$ 的开集体积可以任意小，所以 $\opn{m^*}E=0$。

\textbf{证毕}。

零测集是可测的，这很显然，但我们毕竟是要研究积分，总要讨论非零的测度。那么有没有非零测的集合也是可测集呢？答案也是肯定的。

\begin{example}{可测集的例子：区间}\label{ex_MsbSet_1}

任意区间 $I$ 都是可测的。

任取 $A\in\mathbb{R}^n$，不失一般性\footnote{这里不失一般性是因为，就算 $A$ 中有点在 $I$ 的边界上，由于边界是零测集，故从 $A$ 中挖去这些点后，其外测度依然不变。}地，设 $A$ 中没有任何点在区间 $I$ 的边界上。那么我们总可以从覆盖 $A$ 的开集中挖去 $I$ 的边界点，剩下的依然是覆盖 $A$ 的开集。这样的开集总是被 $I$ 分成不相交的两部分，这两部分也都是开集。由开集\textbf{体积}的完全可加性即可最终证出 $\opn{m^*}(A\cap I)+\opn{m^*}(A\cap I^C)=\opn{m^*}A$。

\end{example}

更进一步，我们还可以通过已知的可测集来构造新的可测集，这由以下定理保证：

\begin{theorem}{可测集的性质}\label{the_MsbSet_1}

\begin{enumerate}
\item $E$ 可测，则 $E^C$ 可测；
\item $E_1$ 和 $E_2$ 可测，则 $E_1\cup E_2$ 和 $E_1\cap E_2$ 可测；
\item 如果 $\{E_i\}_{i=1}^{\infty}$ 是一列可测集合，且\textbf{两两不相交}，那么对于任意 $A\in\mathbb{R}^n$，都有：
\begin{equation}\label{eq_MsbSet_4}
\opn{m^*}(A\cap \bigcup_{i=1}^{\infty}E_i)=\sum_{i=1}^{\infty}\opn{m^*}(A\cap E_i)~.
\end{equation}
\item 如果 $\{E_i\}_{i=1}^{\infty}$ 是一列可测集合，那么 $\bigcap_{i=1}^{\infty}E_i$ 和 $\bigcup_{i=1}^{\infty}E_i$ 也都是可测的。
\end{enumerate}

\end{theorem}

\textbf{证明}：


\textbf{1.} 由\autoref{def_MsbSet_1} 中 $E$ 和 $E^C$ 地位的对称性直接可得。注意 $(E^C)^C=E$。

\textbf{2.} 任取 $A\in\mathbb{R}^n$，并记 $A_1=A\cap E_1$，$A_2=A\cap E_2-A_1$，$A_0=A-(A_1\cup A_2)$。


由于 $E_1$ 可测，故 $\opn{m^*}(A_1\cup A_0)=\opn{m^*}A_1+\opn{m^*}A_0$；类似地，$\opn{m^*}(A_2\cup A_0)=\opn{m^*}A_2+\opn{m^*}A_0$，$\opn{m^*}(A_1\cup A_2)=\opn{m^*}A_1+\opn{m^*}A_2$。

因此
\begin{equation}
\begin{aligned}
\opn{m^*}A&=\opn{m^*}A_1+\opn{m^*}(A_2\cup A_0)\\
&=\opn{m^*}A_1+\opn{m^*}A_2+\opn{m^*}A_0\\
&=\opn{m^*}(A_1\cup A_2)+\opn{m^*}A_0~,
\end{aligned}
\end{equation}
即
\begin{equation}
\opn{m^*}A=\opn{m^*}(A\cap [E_1\cap E_2])+\opn{m^*}(A\cap [E_1\cap E_2]^C)~,
\end{equation}
故 $E_1\cup E_2$ 是可测的。

再由集合论的de Morgan公式，可知 $E_1\cap E_2=(E_1^C\cup E_2^C)^C$，从而推论出 $E_1\cap E_2$ 也是可测的。

由此还可以推论，有限多个可测集进行交与并运算，结果还是可测集。

\textbf{3.} 为方便计，不妨设 $A\subseteq \bigcup_{i=1}^\infty E_i$\footnote{这样就有 $A\cap \bigcup_{i=1}^{\infty}E_i=A$，方便书写和理解。}，且记 $A_i=A\cap E_i$。

由于各 $E_i$ 可测，以及可测集的有限并还是可测集，可推知
\begin{equation}
\opn{m^*}(\bigcup_{i=1}^k A_i)=\sum_{i=1}^k \opn{m^*}A_i~
\end{equation}
对任意正整数 $k$ 成立。

设 $\opn{m^*}A=c_0$，$\sum_{i=1}^k \opn{m^*}A_i=\opn{m^*}(\bigcup_{i=1}^k A_i)=c_k$，则只需要证明 $\lim\limits_{k\to \infty}c_k=c_0$ 即得证\footnote{因为 $\sum_{i=1}^\infty \opn{m^*}A_i=\lim\limits_{k=1}\sum_{i=1}^k\opn{m^*}A_i$。证明 $\lim_{k\to\infty}c_k=c_0$ 相当于证明了 $\opn{m^*}(\lim\limits_{k\to\infty}\bigcup^k_{i=1}A_i)=\lim\limits_{k\to\infty}\opn{m^*}(\bigcup^k_{i=1}A_i)$。注意这里的 $\opn{m^*}(\lim\limits_{k\to\infty}\bigcup^k_{i=1}A_i)$ 就是 $\opn{m^*}(\bigcup^\infty_{i=1}A_i)$。}。而这由\autoref{lem_SetMet_1}~\upref{SetMet}即可直接推得。%由外测度的单调性，可知 $\{c_k\}$ 是单调递增的，而且 $c_k\leq c_0$ 恒成立。那么 $\lim\limits_{k\to\infty}c_k$ 存在且小于等于 $c_0$。

\textbf{4.} 由de Morgan公式，$\bigcap_{i=1}^\infty E_i=[\bigcup_{i=1}^\infty E_i^C]^C$，因此只需证明 $\bigcup_{i=1}^\infty E_i$ 是可测集即可。

我们首先证明，当 $E_i$ 两两不交的时候，$\bigcup^\infty_{i=1}E_i$ 是可测的。

任取 $A\in\mathbb{R}^n$，记 $A_i=A\cap E_i$，$c_0=\opn{m^*}A$，那么由上一条性质，
\begin{equation}
\begin{aligned}
\sum^\infty_{i=1}\opn{m^*}A_i&=\opn{m^*}(\bigcup_{i=1}^\infty A_i)~,
\end{aligned}
\end{equation}
故
\begin{equation}\label{eq_MsbSet_2}
\sum^\infty_{i=0}\opn{m^*}A_i=\opn{m^*}A_0+\opn{m^*}(\bigcup_{i=1}^\infty A_i)~.
\end{equation}


由外测度的次可加性，得
\begin{equation}\label{eq_MsbSet_3}
\sum_{i=0}^\infty\opn{m^*}A_i\geq \opn{m^*}(\bigcup_{i=0}^\infty A_i)=\opn{m^*}A~.
\end{equation}

由于各 $\bigcup_{i=1}^k E_i$ 都是可测的，以及外测度有单调性，得
\begin{equation}
\sum_{i=0}^k\opn{m^*}A_i=\opn{m^*}(\bigcup_{i=0}^k A_i)\leq \opn{m^*}A~,
\end{equation}
故令 $\lim_{k\to \infty}$ 后得
\begin{equation}\label{eq_MsbSet_5}
\sum_{i=0}^\infty\opn{m^*}A_i\leq \opn{m^*}A~.
\end{equation}

联立\autoref{eq_MsbSet_2} 、\autoref{eq_MsbSet_3} 和\autoref{eq_MsbSet_5} ，得
\begin{equation}
\opn{m^*}A=\opn{m^*}A_0+\opn{m^*}(\bigcup_{i=1}^\infty A_i)~,
\end{equation}

从而得证 $\bigcup_{i=1}^\infty E_i$ 是可测集。




\textbf{证毕}。


由\autoref{the_MsbSet_1} 可知，可测集进行求补集运算、可数次求并集运算和可数次求交集运算，结果仍然是可测集。由于求差集是求补集再求交集，故求差集运算的结果也是可测集。我们称这一情况为“全体可测集构成的族，对于\textbf{求补}、\textbf{求差}、\textbf{可数次求并}以及\textbf{可数次求交}运算是封闭的”。

\begin{definition}{}
如果一族集合满足“对于\textbf{求补}、\textbf{求差}、\textbf{可数次求并}以及\textbf{可数次求交}运算是封闭的”，我们就称之为一个 $\sigma$-代数。包含全体开区间（或开方块）的最小 $\sigma$-代数，称为\textbf{Borel族}，其元素都被称作\textbf{Borel集}。
\end{definition}

\addTODO{需引用讨论 $\sigma$-代数和Borel族的词条。}

\subsection{Borel集与可测集的关系}

\begin{definition}{}

我们知道，可数多个开集的并还是开集，可数多个闭集的交还是闭集。

可数多个开集的交不一定是开集\footnote{比如，令 $U_k=(-1, 1/k)$，那么 $\cap_{k=1}^\infty U_k=(-1, 0]$。}，这样的集合我们称之为 $G_\delta$ 型集合\cite{十一五实变函数论}。类似地，可数多个闭集的并不一定是闭集\footnote{比如，令 $F_k=[0, 1-1/k]$，那么 $\cup_{k=1}^\infty F_k=[0, 1)$。}，称之为 $F_\sigma$ 型集合。

进一步，可数多个 $G_\delta$ 型集合的并，称之为 $G_{\delta\sigma}$ 型集合，可数多个 $F_\sigma$ 型集合的交，称之为 $F_{\sigma\delta}$ 型集合；以此类推。

\end{definition}

由于区间都是可测的，全体可测集又构成 $\sigma$-代数，故\autoref{def_MsbSet_1} 中提到的所有集合以及“以此类推”的集合都是可测集。




\begin{theorem}{}\label{the_MsbSet_2}
对于任意 $A\subseteq \mathbb{R}^n$，都存在一个 $G_\delta$ 型集合 $G$，使得 $A\subseteq G$ 且 $\opn{m^*}A=\opn{m}G$。
\end{theorem}

\textbf{证明}：

由外测度的定义，对于任意正整数 $k$，总存在一个\textbf{开集}$U_k$，使得 $A\subseteq U_k$ 且 $\opn{m}U_k<\opn{m^*}A+\frac{1}{k}$。

于是只要令 $G=\bigcap_{i=1}^\infty U_k$，即满足定理要求。

\textbf{证毕}。








根据\autoref{the_MsbSet_2} ，我们还可以得到可测集的一个判定性质：

\begin{theorem}{}\label{the_MsbSet_3}
$E\subseteq \mathbb{R}^n$ 是可测集，当且仅当存在一个\textbf{零测集}$Z$ 使得 $E\cup Z$ 是一个 $G_\delta$ 型集。
\end{theorem}

\textbf{证明}：

充分性是很直接的。$E=[(E\cup Z)-Z]\cup(E\cap Z)$，而其中 $E\cup Z$ 是 $G_\delta$ 型集、$Z$ 和 $E\cap Z$ 都是零测集，故这三个集合都是可测集，因此由它们进行交、并、差所得到的 $E$ 也是可测集。

下证必要性。

设 $E$ 是可测集。由\autoref{the_MsbSet_2} ，可取 $G_\delta$ 型集 $G$ 使得 $E\subseteq G$ 且 $\opn{m}E=\opn{m}G$。

由于 $E$ 可测，故 $\opn{m}G=\opn{m}(G-E)+\opn{m}E$，故 $\opn{m}(G-E)=0$，故取 $Z=(G-E)$ 即得证。

\textbf{证毕}。

到了这一步，有了\autoref{the_MsbSet_3} ，我们可以说了解了所有可测集的形式了。首先有开区间的概念，由此可以引出开集的概念，即开集都是开区间的并集；然后得到 $G_\delta$ 集的概念，即开集的任意多交集；最后，任何可测集都是某个 $G_\delta$ 减去一个零测集的结果，而零测集是最简单最容易理解的一种可测集。


\subsection{乘积空间}

回忆\textbf{集合}\upref{Set}中所讨论的“笛卡尔积”的概念。

\begin{theorem}{}
设 $A\subseteq\mathbb{R}^m$ 和 $B\subseteq\mathbb{R}^n$ 都是可测集，则 $A\times B \subseteq \mathbb{R}^{m+n}$ 也是可测集，且 $\opn{m}(A\times B)=\opn{m}A\times \opn{m}B$。
\end{theorem}

证明本身暂略，只指出证明思路的核心：用来容纳 $A\times B$ 的开集，总能写成分别容纳 $A$ 和 $B$ 的开集之积。

\begin{definition}{截面}
设 $A\subseteq\mathbb{R}^{m+n}$。取 $x_0\in \mathbb{R}^m$，则称 $A_{x_0}=A\cap \{x_0\}\times \mathbb{R}^n$ 为 $A$ 在 $x_0$ 处的\textbf{截面（section）}。
\end{definition}

我们以一个简单的例子来理解截面：取 $m=n=1$，这样 $A$ 就是二维平面上的一个子集。在 $x$ 轴上取一点 $x_0$，作平行于 $y$ 轴的直线，该直线和 $A$ 相交的部分就是 $A_{x_0}$。如果抽象地把任何集合都想象成一条轴，比如 $\mathbb{R}^m$ 和 $\mathbb{R}^n$，那么这个具体的例子也可以用来抽象地代替所有情况。

\begin{theorem}{}
设 $Z\subseteq \mathbb{R}^{m+n}$ 是\textbf{零测集}。定义 $\mathbb{R}^m$ 上的集合 $N$ 如下：截面 $Z_{x_0}$ 的外测度\textbf{不为零}当且仅当 $x_0\in N$。

那么 $\opn{m}N=0$。
\end{theorem}

\textbf{证明}：

反设 $\opn{m^*}N>0$。

取 $N_k$ 为使得截面 $Z_{x_0}$ 的外测度大于 $1/k$ 的 $x_0$ 构成的集合。显然，$N_k\subseteq N_{k+1}$，且 $\bigcup_{k=1}^\infty N_k=N$。

由反设，存在一个 $k_0$，使得 $\opn{m^*}N_{k_0}>0$。

现在令 $Z_0=N_{x_0}\times\mathbb{R}^n \cap Z$，则 $Z_0$ 在任意 $x_0$ 处的截面测度都大于 $1/k_0$。

任取覆盖 $Z_0$ 的开集，这个开集总能表示为一系列开方块的\textbf{不交并}\footnote{即取并集，但是这些开方块两两不交。}。注意 $Z_0$ 在各 $x_0$ 处的截面，易得总能把上述开方块中覆盖该截面的那部分替换为一个新的开方块，同样覆盖该截面，但是其体积小于等于被替代的开方块的并的体积。对所有截面进行相同处理（原覆盖中的开方块们可能被反复替换），直到整个 $Z_0$ 都被如此构造的开方块覆盖。

接下来，把所有这些开方块的“底面”都沿着垂直 $\mathbb{R}^m$ 的方向平移到 $\mathbb{R}^m$ 上。平移后得到的开集，其体积不大于平移前的开覆盖——想一想，为什么\footnote{提示：当两个开方块底面处于同一“平面”时，其重合部分体积达到最大。}？而这个平移后得到的开集有一个开方块子集，其“底面积”和 $Z_0$ 一样，而高度是小于等于 $1/k_0$ 的\textbf{正数}。该子集的体积因此是个正数，于是 $Z_0$ 的体积也是正数，于是 $Z$ 的测度应该是正数。

这与 $Z$ 的测度为零矛盾，因此反设不成立。

% 这样，我们最终就能得到一个体积不变或者更小的开集来覆盖 $Z_0$，而这个开集可以拆成至多可数个开方块的并，这些开方块的“高度”都大于 $1/k$，底面长度之和大于等于 $\opn{m^*}N_{k_0}$。由此可得，任意覆盖 $Z_0$ 的开集，其体积大于 $(\opn{m^*}N_{k_0})/k$。于是，$\opn{m}Z>\opn{m^*}Z_{0}>0$。和题设矛盾！故反设不成立。


\textbf{证毕}。
















