% 仿射联络
% keys affine|联络|connection|方向导数|平行移动|directional derivative|parallel transport|协变导数|协变|covariant derivative
% license Xiao
% type Tutor

\pentry{流形上的切空间\nref{nod_tgSpa}}{nod_5397}

\addTODO{引入过于繁琐，需精简}

\subsection{平行移动}

地球的表面是一个二维实流形。如果我站在赤道上，沿着地球表面，保持向东匀速运动，那么我最终会绕赤道一圈回到原点。由于我被限制在地面，在我看来自己的速度是没有变化的，但如果你站在月球上看我，你会认为我的速度方向一直在变化。我们的答案都没有问题，只不过分别处在不同的视角中。站在月球上的你是从整个三维空间来观察的，也就是 $\mathbb{R}^3$，但限制在地球上的我并不知道宇宙和地幔的存在，对我来说整个世界就是地球表面，也就是 $S^2$。

在你看来，我处在不同位置上的速度向量是不一样的，但在我看来是一样的。这种情况就被称为一种“平行移动”，即给定流形上的一个切向量，沿着某条道路移动切点，过程中保持切向量不变。例子中的速度向量，其变化率是一直垂直地面的，而对于地面上的我来说是不存在这一方向的，因此在我的计算里我的速度并没有变化。

仔细琢磨以上例子，会发现很多值得注意的点。首先，平行移动是“在沿着某条道路移动过程中”保持切向量不变，也就是说此概念是依赖于道路而定义的，光有两个点可不行。我们可以通过一个例子来理解这一点：假设我手里有一个箭头，我在运动过程中保持这个箭头方向不变。我先绕赤道半圈，再沿着经线抵达北极，记录箭头的指向；回到原点重新开始，这次我直接沿着经线抵达北极，记录箭头的指向。两次运动的起点和终点都是一样的，但是最终记录的箭头指向是相反的。

其次，有变化的地方就有求导。平行移动无非就是要求运动过程中给定切向量对时间（或者对经过的弧长）求导的结果为零。对于地球表面的例子，求导的可行性似乎是显而易见的，但是具体例子的坏处就是自带先入为主的细节。回忆一下前面文章中对流形的讨论，我们似乎根本就没有讨论过求导的可行性。一个光滑向量场虽然是要求“在某个图中是光滑向量场”，但是换用不同的图来表示同一个光滑向量场，其求导结果可能完全不同。这是因为我们只要求图与图之间的变换是光滑的，而正是这个变换的存在导致不同图之间的求导结果不同，毕竟这个变换要参与到链式法则里。

直观来说，就是我们根本没有讨论过“不同切点上的切空间中，哪些向量应该被认为是相等的”。从地球表面的例子还可以看出，不同切空间中两个切向量是否相等，还可能取决于沿着什么道路进行平行移动。这就意味着，我们无法简单地规定一个“切空间之间的同构”，而必须和道路联系起来————好在我们不需要讨论完整的道路，只需要讨论切向量沿着道路的变化率即可。由于张量场沿着道路的变化率可以看作是道路对应的向量作用在该张量场上，我们可以通过“定义什么是流形上的方向导数”来“定义什么是沿着道路的变化率”，而其中“方向导数为零”就意味着“平行移动”了。

\subsubsection{光滑向量场与光滑函数的比较}

在流形上某点，一个切向量对一个光滑函数的作用是不依赖于图的。这一点很好理解：一个切向量就是一条道路，那么沿着道路的光滑函数对道路参数求导，得到的就是切向量对光滑函数的作用。但是一个切向量对一个光滑切向量场是无法进行作用的，因此才会出现“平行移动的概念不唯一”的情况。这本质上就是因为，不同切点上的标量函数值是可以比较的，因为都是实数；但不同切点的切向量不可比较。


\subsection{仿射联络}

流形上不同切空间之间的联系，被称为如下\textbf{仿射联络}。

\begin{definition}{仿射联络}
给定实流形 $M$，其中 $\mathfrak{X}(M)$ 为其上光滑切向量场的集合。记 $\mathbb{F}$ 为 $M$ 上\textbf{全体光滑函数构成的环}\footnote{此处是为了看起来舒服，实际上这个环通常写为 $C^\infty(M)$。}，若对于任意的 $X, X_i, Y, Y_i\in\mathfrak{X}(M)$，映射 $\nabla:\mathfrak{X}(M)\times\mathfrak{X}(M)\to\mathfrak{X}(M)$ 满足以下要求：
\begin{enumerate}
\item \textbf{$\mathbb{R}$-双线性性}：$\nabla_{\sum a_iX_i}\sum b_jY_j=\sum a_ib_j\nabla_{X_i}Y_j$，其中 $a_i, b_j\in\mathbb{R}$；
\item \textbf{$X$ 的 $\mathbb{F}$-线性性}：$\nabla_{\sum f_iX_i}Y=\sum f_i\nabla_{X_i}Y$，其中 $f_i\in\mathbb{F}$；
\item \textbf{$Y$ 的Leibniz律\footnote{通常定义$\nabla_X f=Xf$，使之类似普通导数的Leibniz律。}}：$\nabla_X(fY)=(Xf)Y+f\nabla_XY$。
\end{enumerate}
则称这个映射 $\nabla$ 为 $M$ 上的一个\textbf{仿射联络（affine connection）}。
\end{definition}

我们来详细解释一下仿射联络的意义。

首先是术语。“联络（connection）”一词，是指它建立了不同切空间之间的一种联系，而正如我们在上一小节讨论的那样，这种联系没法简单地定义为切空间之间固定的同构。“仿射（affine）”一词则是指该联系使得流形上有了类似仿射几何的性质。

仿射联络的定义是完全仿照“方向导数”的核心性质来的，也就是说，可以通俗地理解为“\textbf{规定了如何做方向导数}”。给定两个向量场 $X, Y$，想要求各个点上 $Y$ 沿着 $X$ 的变化率，只需要把它们放到定义好的仿射联络 $\nabla$ 里就可以：$\nabla_XY$。

知道了“仿射联络就是规定怎么做方向导数”以后，三个条件的意义就很明显了。第一和第二个条件都是线性性，第三个条件看起来复杂，但实际上就是乘积的求导法则，也就是Leibniz律。要注意的是，$Xf$ 不是 $fX$，后者是将函数 $f$ 乘到向量场 $X$ 上，前者是对函数 $f$ 沿着 $X$ 的方向求导\footnote{见\enref{切向量场}{Vec}。}。


\begin{exercise}{平凡的例子}
考虑多元微积分中的方向导数，将 $\mathbb{R}^n$ 视为流形。证明方向导数就是 $\mathbb{R}^n$ 上的一个仿射联络。
\end{exercise}

\begin{exercise}{子流形上的仿射联络}
考虑多元微积分中的方向导数，将 $\mathbb{R}^n$ 视为流形，取 $S$ 为 $\mathbb{R}^n$ 中的一个\textbf{正则曲面}。定义 $S$ 上的映射 $\nabla:\mathfrak{X}(S)\times\mathfrak{X}(S)\to\mathfrak{X}(S)$ 为“在 $\mathbb{R}^n$ 中求方向导数后将结果投影到 $S$ 上”。证明 $\nabla$ 是 $S$ 上的一个仿射联络\footnote{“投影”保证了这确实是一个到 $\mathfrak{X}(S)$ 上的映射。}。
\end{exercise}

回到我们一开始的例子。当我限制在地球表面上时，除了知道这是一个二维流形外，我对这个表面一无所知，它是否弯曲、扭转，在我看来都不会有区别，只有月球上的你能看出区别。但是，如果定义了地球表面上的仿射联络，我就可以确定这个流形究竟是一个球面，一个平面，还是别的什么奇怪的形状了。实际上，月球上的你判断地球表面样貌的方法，本质上也是看出了地球表面的仿射联络是什么————也就是三维宇宙空间中的仿射联络在地球表面上的继承，继承规则就是“求导后取在地球表面上的投影，作为地球表面求导的结果”。

这样，仿射联络给出了一个“不需要跳出地球外就能确定地球形状”的方法，不同的形状对应不同的仿射联络。想必看到这儿你已经体会到仿射联络的意义了————如果你不能跳出宇宙之外，你怎么知道时空流形长什么样子呢？

当然，爱因斯坦提出过可以通过测量圆周率的变化来获取关于时空形状的信息，但实际上测量圆周率依赖于\textbf{测地线}和\textbf{度量}的概念，而测地线是由仿射联络定义的，流形上的黎曼度量则在挠率\footnote{挠率的概念参见本文下一小节，其与黎曼度量的联系参见\enref{黎曼联络}{RieCon}文章。}一定的情况下和仿射联络是一一对应的，所以他的方案依然是在定义仿射联络。

仿射联络最直接的描述方式，被称为\enref{Christoffel符号}{CrstfS}，我们会在之后讲到。

\subsubsection{协变导数}

从多元微积分中我们知道，在通常的欧几里得空间中对切向量的求导是很容易的，因为我们可以唯一地把一个切向量分解成标量分量，对这些分量求导即可。在一般的流形上，这种求导就直接和仿射联络联系起来了。

\begin{definition}{道路上的协变导数}
令 $(M, \nabla)$ 为一个带仿射联络的流形，$c:I\to M$ 为一条光滑道路（光滑曲线），$V$ 为\textbf{沿着}道路 $c$ 的一个光滑切向量场，$\tilde{V}$ 为其在 $M$ 上拓展来的光滑切向量场。定义算子 $\frac{D}{\dd t}$ 如下：

对于任意 $t\in I$，有 $\frac{D}{\dd t}V(t)=\nabla_{c'(t)}\tilde{V}$，其中 $c'(t)$ 是道路 $c$ 在 $c(t)$ 处所对应的切向量\footnote{更准确地说，等式右边是将 $c'(t)$ 也拓展到整个 $M$ 上后，和 $\tilde{V}$ 进行联络映射的。}。

称算子 $\frac{D}{\dd t}$ 为“$M$ 上与 $\nabla$ 相关的沿着道路 $c(t)$ 的\textbf{协变导数}（the \textbf{covariant derivative} associated to $\nabla$ along the curve $c(t)$ in $M$）”。
\end{definition}

以上讨论中默认了拓展向量场 $\tilde{V}$ 的存在性，但它真的存在吗？这个问题以及其它和协变导数相关的讨论，可参见\enref{协变导数}{CoDer}文章。





\subsubsection{保联络微分同胚}

保联络微分同胚是一个重要的映射，它满足“先进行联络再进行切映射”和“先进行切映射再求联络”的结果永远是一致的。

\begin{definition}{保联络微分同胚}
设 $F:(M, \nabla^M)\to (N, \nabla^N)$ 是流形间的\textbf{微分同胚}。如果 $F$ 还满足对于任意 $X, Y\in \mathfrak{X}(M)$，都有 $F_*(\nabla^M_XY)=\nabla^N_{F_*(X)}F_*(Y)$，则称 $F$ 还是一个\textbf{保联络（connection-preserving）}的微分同胚。
\end{definition}




\subsection{流形的曲率与挠率}

如前所述，仿射联络描述了流形的形状。具体地，仿射联络定义了以下两个描述流形形状的量：

\begin{definition}{曲率}
令 $(M, \nabla)$ 是一个配备了仿射联络 $\nabla$ 的流形 $M$。定义 $R:\mathfrak{X}(M)\times\mathfrak{X}(M)\to\opn{End}(\mathfrak{X}(M))$ 为：对于任意 $X, Y\in\mathfrak{X}(M)$，有 $R(X, Y)=\nabla_X\nabla_Y-\nabla_Y\nabla_X-\nabla_{[X, Y]}$，称该映射为 $(M, \nabla)$ 的\textbf{曲率（curvature）}。
\end{definition}

古典微分几何中，无论是曲线的曲率、正则曲率还是曲面的高斯曲率，都是函数。曲线的曲率是曲线弧长的函数，高斯曲率是曲面上的函数。而我们现在定义的更一般化的曲率成了一个“将三个向量场 $X, Y, Z$ 映射为一个向量场 $R(XY)Z$ 的映射，它和曲率有什么关系？

这个关系就是著名的\enref{高斯绝妙定理}{Egreg}。


\begin{definition}{挠率}
令 $(M, \nabla)$ 是一个配备了仿射联络 $\nabla$ 的流形 $M$。定义 $T:\mathfrak{X}(M)\times\mathfrak{X}(M)\to\mathfrak{X}(M)$ 为：对于任意 $X, Y\in\mathfrak{X}(M)$，有 $T(X, Y)=\nabla_XY-\nabla_YX-{[X, Y]}$，称该映射为 $(M, \nabla)$ 的\textbf{挠率（torsion）}，有时也称\textbf{扭率}。
\end{definition}

由于李括号 $[X, Y]=XY-YX$，当曲率不为零时，常常出现“相同起点和终点，沿着不同道路进行平行移动的结果不同”的情况。

几何直觉告诉我们，平坦的流形应该处处曲率、挠率为零。当然，我们定义的曲率、挠率不是函数，而是映射，因此平坦流形上这两个映射应该是把一切输入量都映射为零的映射。

\begin{exercise}{欧几里得空间的挠率和曲率}
令 $(\mathbb{R}^n, \opn{D})$ 为欧几里得空间和其上的方向导数\footnote{$\opn{D_XY}$ 即沿着 $X$ 的方向对 $Y$ 求方向导数。}。证明对于任意光滑向量场 $X, Y, Z$，都有 $\opn{D}_X\opn{D}_YZ-\opn{D}_Y\opn{D}_XZ-\opn{D}_{[X, Y]}Z\equiv\bvec{0}$ 和 $\opn{D}_XY-\opn{D}_YX-{[X, Y]}\equiv\bvec{0}$，即曲率和挠率为零。
\end{exercise}

\subsubsection{曲率和挠率的线性性}

以下是两个非常关键的性质，由于证明过于冗长，此处暂时留作习题\footnote{若实在无法证明出来，请参考GTM 275\cite{GTM275}中6.2节内容的命题6.3，或反馈留言，谢谢！}。

\begin{exercise}{}\label{exe_affcon_1}
证明对于任意光滑向量场 $X, Y, Z$ 和光滑函数 $f, g, h$，有 $R(fX, gY)(hZ)=fghR(X, Y)Z$ 和 $T(fX, gY)=fgT(X, Y)$。

简单来说，就是证明曲率和挠率都是 $C^{\infty}(M)$-线性的。
\end{exercise}





\subsection{拓展}

本节讨论的仿射联络，是沿着流形上一个切向量场对另一个切向量场求方向导数的结果。由于切向量场只是流形上\textbf{向量丛}（\autoref{def_Fibre_1}~\upref{Fibre}）的特例，我们实际上也可以把联络的概念拓展到“对流形上的任意向量丛，沿着切向量场求方向导数”。这一拓展参见\enref{联络（向量丛）}{VecCon}文章。

\enref{联络（向量丛）}{VecCon}文章中使用的术语是“截面”，虽然一个截面就是一个场，但是术语中使用前者是为了强调其身为“纤维丛”的本质。回忆\enref{纤维丛}{Fibre}文章中的分析，使用这一概念强调了不同纤维之间不存在天然的对应关系，而向量丛的仿射联络就是负责定义一个对应关系的。



