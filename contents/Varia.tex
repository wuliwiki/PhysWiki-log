% 变分
% 变分|微分

\pentry{绝对极值与相对极值（变分学）\upref{AbPol}}
泛函是函数概念中自变数用函数替换的推广，而变分则是函数微分在泛函里的推广．简单来说，正如微分为函数改变量的主要线性部分，变分是泛函改变量的主要线性部分．另一方面，若将函数和泛函用参数的形式表示，则函数$\phi(t)=f(x_1+th_1,\cdots,x_n+th_n) $ 的微分是 $\phi(t)$ 对于 $t$ 在 $t=0$ 上的微商，而泛函 $J(y+t\eta)$ 的变分是函数 $\varphi(t)=J(y+t\eta)$ 对于参变数 $t$ 在 $t=0$ 时的微商．下面来具体讨论！
\subsection{微分}
先简略复习一下多元函数微分的定义是有必要的．
\subsubsection{微分第一定义}
设已给函数 $f(x_1,\cdots,x_n)$ 具有一阶连续偏微商，则有
\begin{equation}
\begin{aligned}
&f(x_1+h_1,\cdots,x_n+h_n)-f(x_1,\cdots,x_n)\\
&=\sum_{i=1}^{n} \pdv{f(x_1,\cdots,x_n)}{x_i}h_i+\epsilon
\end{aligned}
\end{equation}
其中 $\epsilon$ 是相对于 $\abs{h_i}$ 中最大者（或 $\sqrt{h_1^2+h_2^2+\cdots+h_n^2}$ ）的 高阶无穷小．而 
\begin{equation}
\sum_{i=1}^{n} \pdv{f(x_1,\cdots,x_n)}{x_i}h_i
\end{equation}
是改变量 $h_1,h_2,\cdots,h_n$ 的线性函数，称为函数 $f(x_1,\cdots,x_n)$ 的\textbf{微分}．
\subsubsection{微分第二定义}
$n$ 维空间中，过点 $(x_1,\cdots,x_n)$ 和 $(x_1+h_1,\cdots,x_n+h_n)$ 的直线为 $(x_1+th_1,\cdots,x_n+th_n)\;(-\infty<t<+\infty)$ ．在这条直线上函数 $f$ 化为参变数 $t$ 的函数
\begin{equation}
\phi(t)=f(x_1+th_1,\cdots,x_n+th_n) 
\end{equation}
则有
\begin{equation}
\begin{aligned}
\phi'(t)&=\dv{}{t}f(x_1+th_1,\cdots,x_n+th_n) \\
&=\sum_{i=1}^n\pdv{f(x_1+th_1,\cdots,x_n+th_n)}{x_i}h_i
\\
\Downarrow
\\
\phi'(0)&=\sum_{i=1}^n\pdv{f(x_1,\cdots,x_n)}{x_i}h_i
\end{aligned}
\end{equation}
这就是说，微分 $\sum\limits_{i=1}^n\pdv{f(x_1,\cdots,x_n)}{x_i}h_i$ 是 $\phi(t)$ 对于 $t$ 在 $t=0$ 上的微商．
\subsection{变分}\label{Varia_sub1}
\subsubsection{变分第一定义}
设已给泛函
\begin{equation}
J=\int_a^b F(x,y,y')\dd x
\end{equation}
这里 $F$ 对于三个变数都有连续的二阶微商，并且 $y=y(x)$ 属于具有连续微商的函数类 $C_1$ （若函数 $f(x)$ 在其定义域上直到 $n$ 阶微商都连续，则称 $f(x)$ 是\textbf{ $C_n$ 类}的）．

设 $y(x),\overline{y}(x)$ 是 $C_1$ 类的，且
\begin{equation}
\eta(x)=\overline{y}(x)-y(x)
\end{equation}
则 $\eta'(x)$ 显然是连续的．作
\begin{equation}\label{Varia_eq1}
J(\overline{y})-J(y)=\int_a^b\qty[F(x,y+\eta,y'+\eta')-F(x,y,y')]\dd x
\end{equation}
由拉格朗日微分中值定理\autoref{MeanTh_the2}~\upref{MeanTh}
\begin{issues}
\issueOther{这里应该是多元函数的拉格朗日中值定理，应完善相关词条插入引用}
\end{issues}
\autoref{Varia_eq1} 可写为
\begin{equation}
J(\overline{y})-J(y)=\int_a^b\qty[\tilde{F}'_y\eta(x)+\tilde{F}'_{y'}\eta'(x)]\dd x
\end{equation}
其中 $\tilde{F}$ 表示它的变数 $\tilde{y},\tilde{y}'$ 分别在 $y,\overline{y}$ 和 $y',\overline{y}'$ 之间．

因为对 $a\leq x\leq b$ ，总假设曲线之间的距离是一级的\autoref{AbPol_def1}~\upref{AbPol}．有
\begin{equation}
\begin{aligned}
&\abs{\overline{y}-y}<\abs{\eta(x)}\leq r(y,\overline{y})\\
&\abs{\overline{y}'-y}<\abs{\eta'(x)}\leq r(y,\overline{y})
\end{aligned}
\end{equation}
由于 $F_y,F_{y'}$ 连续，任给 $\epsilon$，当 $r(y,\overline{y})$ 充分小时，将有
\begin{equation}\label{Varia_eq2}
\abs{\tilde{F}'_y-F'_y}<\epsilon,\quad\abs{\tilde{F}'_{y'}-F'_{y'}}<\epsilon
\end{equation}
所以
\begin{equation}\label{Varia_eq3}
\begin{aligned}
&J(\overline{y})-J(y)\\
&=\int_a^b\qty[F'_y\eta(x)+F'_{y'}\eta'(x)]\dd x+\int_a^b\qty[(\tilde{F}'_y-F'_y)\eta(x)+(\tilde{F}'_{y'}-F'_{y'})\eta'(x)]\dd x\\
&=\int_a^b\qty[F'_y\eta(x)+F'_{y'}\eta'(x)]\dd x+\epsilon_1r(y,\overline{y})
\end{aligned}
\end{equation}
这里根据不等式\autoref{Varia_eq2} ， $\epsilon_1$ 随 $r(y,\overline{y})$ 而趋于0．表达式 $\int_a^b\qty[F'_y\eta(x)+F'_{y'}\eta'(x)]\dd x$ 与泛函改变量只差一个比 $r(y,\overline{y})$ 更高阶的无穷小量，它显然线性的依赖于 $\eta(x)$，即是泛函 $J$ 改变量的主要线性部分，称为泛函 $J$ 的\textbf{变分}，记作 $\delta{J}$：
\begin{equation}\label{Varia_eq4}
\delta J=\int_a^b\qty[F'_y(x,y,y')\eta(x)+F'_{y'}(x,y,y')\eta'(x)]\dd x
\end{equation}
可见，变分是依赖于函数 $y(x)$ 和改变量 $\eta(x)$ 的泛函．
\subsubsection{变分第二定义}
考虑一个含参的函数族 $y(x)+t\eta(x)$，其中 $y(x),\eta(x)$ 固定，泛函 $J(y+t\eta)$ 化为 $t$ 的函数
\begin{equation}
\varphi(t)=J(y+t\eta)
\end{equation}
由\autoref{Varia_eq3} 
\begin{equation}
J(y+t\eta)-J(y)=t\int_a^b\qty(F'_y\eta+F'_{y'}\eta')\dd x+\epsilon_t
\end{equation}
其中，$\epsilon_t=\epsilon_1r(y,y+t\eta)=\epsilon_1\abs{t}r(y,y+\eta)$，且
\begin{equation}
\lim_{t\rightarrow 0}\frac{\epsilon_t}{t}=0
\end{equation}
因而
\begin{equation}
\varphi'(0)=\lim_{t\rightarrow 0}\frac{\varphi(t)-\varphi(0)}{t}=\lim_{t\rightarrow 0}\frac{J(y+t\eta)-J(y)}{t}=\int_a^b\qty(F'_y\eta+F'_{y'}\eta')\dd x
\end{equation}
于是变分是函数 $\varepsilon(t)=J(y+t\eta)$ 对于 $t$ 在 $t=0$ 时的微商．于是，得到变分的另一定义：变分是函数 $\varphi(t)=J(y+t\eta)$ 对于参变数 $t$ 当 $t=0$ 时的微商．
\subsubsection{函数的变分}
在泛函的变分 $\delta J$ 的表式\autoref{Varia_eq4} 中，函数 $y(x)$ 的改变量 $\eta(x)$ 称为 $y(x)$ 的\textbf{变分}，记作 $\delta y(x)$，即
\begin{equation}\label{Varia_eq6}
\delta y(x)=\eta(x)=\overline{y}(x)-y(x)
\end{equation}

因此，变分 $\delta J$ \autoref{Varia_eq4} 可写为
\begin{equation}\label{Varia_eq5}
\delta J=\int_a^b\qty[F'_y(x,y,y')\delta y+F'_{y'}(x,y,y')\delta y']\dd x
\end{equation}
