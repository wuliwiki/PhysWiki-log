% 可测函数的 Lusin 定理
% keys 可测函数|实变函数|简单函数|simple function|Lusin定理|连续函数
% license Xiao
% type Tutor

\pentry{Egoroff定理\upref{EgrfTh}}

从\autoref{the_MsbFun_4}~\upref{MsbFun}可知可测函数的一个性质：其下方图形是可测集。

本节我们继续讨论可测函数具有哪些结构，来加深对可测函数的理解。

\subsection{简单函数}

\begin{definition}{}\label{def_MsbFSt_1}
设 $E$ 是 $\mathbb{R}^n$ 上的一个可测集，$f$ 是其上一个函数。如果 $E$ 能分解为\textbf{互不相交}的 $N$ 个 $E_k$，其中 $k$ 取值为正整数，使得 $E=\bigcup_{k=1}^N$，且 $f$ 在各 $E_k$ 上都是\textbf{有限常数}，那么我们称 $f$ 是一个 $E$ 上的\textbf{简单函数（simple function）}.
\end{definition}

显然，简单函数都是可测函数。你甚至可能留意到了，简单函数可以直接定义Lebesgue积分了：如果 $f$ 是\autoref{def_MsbFSt_1} 中所说的那种简单函数，那么可以定义其Lebesgue积分为：

\begin{equation}\label{eq_MsbFSt_1}
\int_E f \dd x = \sum_{k=1}^N f(x_k) \opn{m}(E_k)~,
\end{equation}
其中 $x_k\in E_k$。

事实上，简单函数是定义Lebesgue积分的基础，这可以由以下定理得出：

\begin{theorem}{}\label{the_MsbFSt_1}
设 $E$ 是 $\mathbb{R}^n$ 上的一个可测集，$f$ 是其上的\textbf{可测函数}。那么存在一列 $E$ 上的\textbf{简单函数}$\{f_k\}_{k=1}^\infty$，使得 $\lim\limits_{k\to\infty}f_k=f$ 在 $E$ 上处处成立。
\end{theorem}

\textbf{证明}：

定义数列 $\{a_{k, i}\}$ 为 $a_{k, i}=\arctan(\frac{\pi}{2}\cdot\frac{i}{k})$，其中 $k$ 是正整数，$i$ 是 $(-k, k)$ 中的整数。容易发现，固定 $k$ 时，$a_{k, i}$ 可以将整个 $\mathbb{R}$ 划分为 $2k+1$ 份。

由于 $f$ 是可测函数，故 $f^{-1}([a_{k, i}, a_{k, i+1}))$ 是可测集。定义 $E$ 上的函数 $f_k$ 如下：$f_k(x)=a_{k, i}$，如果 $f(x)\in [a_{k, i}, a_{k, i+1})$。

则各 $f_k$ 都是简单函数，并且 $\lim_{k\to\infty}f_k=f$ 在 $E$ 上处处成立。

\textbf{证毕}。

简单函数都是可测函数，加上\autoref{the_MsbFSt_1} ，我们就得到可测函数的另一个定义：可测函数都是简单函数列的极限。很多与可测函数有关的问题都可以通过讨论简单函数再取极限得到可测函数来解决。



\subsection{Lusin定理}

\begin{definition}{连续性}\label{def_MsbFSt_2}
设 $E$ 是 $\mathbb{R}^n$ 上的一个可测集，$f$ 是其上的\textbf{可测函数}。如果在 $x_0\in E$ 处，对于任何 $\epsilon>0$，都存在 $\delta>0$ 使得对于任意 $x\in E\cap N(x_0, \delta)$，恒有 $\abs{f(x)-f(x_0)}<\epsilon$，那么称 $f$\textbf{相对于}$E$ 在 $x_0$ 处连续。这里的 $N(x_0, \delta)$ 指以 $x_0$ 为球心、$\delta$ 为半径的邻域。

如果 $f$ 相对于 $E$ 的任何点都连续，则称 $f$ 在 $E$ 上\textbf{处处连续}。
\end{definition}

可测函数和连续函数的关系很密切，其逻辑类似于Egoroff定理的\textbf{对偶}形式。注意观察以下Lusin定理和之前讲过的Egoroff定理逻辑上的异同。

\begin{theorem}{}\label{the_MsbFSt_2}

设 $E$ 是 $\mathbb{R}^n$ 上的一个可测集，$f$ 是其上\textbf{几乎处处有限}的\textbf{可测函数}。则对于任意 $\delta>0$，总存在\textbf{闭集}$F$ 使得 $\opn{m}(E-F)<\delta$ 且 $f$ 在 $E\cap F$ 上\textbf{处处连续}。

\end{theorem}

\textbf{证明}：

只需要证明对于\textbf{处处有限的可测函数}的情况即可。

用\autoref{the_MsbFSt_1}  证明过程中构造简单函数列的方法，构造一列简单函数 $\{f_i\}_{i=1}^\infty$，它们处处趋近于 $f$。按照这个构造方法，对于 $f$ 的任意不连续点，一定存在一个 $N$，使得只要 $i>N$，那么该点也是 $f_i$ 的不连续点。

根据定义，一个简单函数最多只有有限多个不连续点，因此对于每个简单函数 $f_i$，都可以从 $E$ 中减去有限个\textbf{开区间}\footnote{虽然可以直接减去这些孤立点，但这么挖无法让讨论继续下去，所以还是挖开区间。请接着读后面的构造，你就知道为什么减去孤立点不行了。另外，减去的这个开区间不一定是 $E$ 的子集。}，其总体积可以任意小，使 $f_i$ 在剩下的部分中处处连续。

对简单函数 $f_i$，减去体积为 $\delta/2^{i+1}$ 的\textbf{开集}$U_i$。取所有减去的开集之并 $A=\bigcup_{i=1}^\infty U_i$，则 $f$ 的不连续点都在 $A$ 中。因此，$f$ 在 $E-A$ 上处处连续。

由于 $A$ 是开区间的并，因此 $A$ 为开集，其补集 $A^C$ 为闭集。而 $A$ 的体积小于 $\delta$。故令 $F=A^C$，定理即得证。

\textbf{证毕}。

根据\autoref{the_MsbSet_3}~\upref{MsbSet}，\autoref{the_MsbFSt_2} 中的 $E\cap F$ 总可以挖掉一个零测集后变成若干\textbf{互不相交}的区间的并。

这些区间最多有可数个。如果一个区间不是闭区间，那么可以通过挖掉一两个任意小的开区间使剩下部分为闭区间。有了这两个因素，可知 $E\cap F$ 总可以挖掉一个\textbf{测度任意小}的部分后变成\textbf{互不相交}的闭区间的并，或者说互不相交的开集的并再取补，因此这个剩余部分是一个闭集。

因此，我们进一步得到以下推论：

\begin{corollary}{Lusin定理}\label{cor_MsbFSt_1}

设 $E\subseteq\mathbb{R}^n$ 是一个可测集，$f$ 是其上一个几乎处处有限的可测函数。那么对于任意 $\delta>0$，总存在\textbf{闭集}$F\subseteq E$ 使得 $\opn{m}(E-F)<\delta$ 且 $f$ 在 $F$ 上处处连续。

\end{corollary}

注意，\autoref{the_MsbFSt_1} 和\autoref{cor_MsbFSt_1} 的区别在于 $F$ 的定义，前者不要求 $F\subseteq E$，但这导致无法保证 $E\cap F$ 是闭集。

另外，尽管\autoref{the_MsbFSt_1} 和\autoref{cor_MsbFSt_1} 讨论的是一维函数的情况，但只要把区间的概念拓展为方块，就可以把结论应用到任意维的函数上。

Lusin定理揭示了可测函数与连续函数的紧密联系，使得很多有关可测函数的问题都可以简化为对连续函数的讨论。















