% 洛必达法则（综述）
% license CCBYSA3
% type Wiki

本文根据 CC-BY-SA 协议转载翻译自维基百科 \href{https://en.wikipedia.org/wiki/L\%27H\%C3\%B4pital\%27s_rule}{相关文章}。

洛必达法则（/ˌloʊpiːˈtɑːl/，音似“洛-皮-塔尔”，法语：[lopital]），也称为伯努利法则，是一个数学定理，用于通过求导的方法来求解不定式形式的极限。该法则的应用（或重复应用）通常可以将一个不定式转化为一个可以通过代入法轻松求解的表达式。此定理以17世纪法国数学家纪尧姆·德·洛必达命名。尽管该法则通常归功于洛必达，但实际上这个定理是由瑞士数学家约翰·伯努利于1694年首次介绍给他的。

洛必达法则陈述如下：

设函数 $f$ 和 $g$ 在某开区间 $I$ 上定义，并且在 $I \setminus \{c\}$ 上可导，其中 $c$ 是区间 $I$ 的一个（可能是无穷的）聚点。如果满足：
$$
\lim_{x \to c} f(x) = \lim_{x \to c} g(x) = 0 \quad \text{或} \quad \pm \infty~
$$
且对于所有 $x \in I \setminus \{c\}$，都有 $g'(x) \ne 0$，并且
$$
\lim_{x \to c} \frac{f'(x)}{g'(x)} \quad \text{存在}~
$$
那么就有：
$$
\lim_{x \to c} \frac{f(x)}{g(x)} = \lim_{x \to c} \frac{f'(x)}{g'(x)}~
$$
该法则通过对分子与分母分别求导，常常可以简化商的表达式，或将其转化为一个可直接用连续性求解的极限形式。
\subsection{历史}
纪尧姆·德·洛必达（Guillaume de l'Hôpital，也写作 l'Hospital\(^\text{[a]}\)）于1696年在其著作《Analyse des Infiniment Petits pour l'Intelligence des Lignes Courbes》（直译为《为理解曲线而作的无穷小分析》）中发表了这一法则，该书是第一本关于微分法的教科书。\(^\text{[1][b]}\)然而，人们普遍认为，这一法则实际上是由瑞士数学家约翰·伯努利发现的。\(^\text{[3]}\)
\subsection{通用形式}

洛必达法则的通用形式涵盖了多种情况。设 $c$ 和 $L$ 为扩展实数，即实数以及正无穷与负无穷。设 $I$ 为包含 $c$ 的开区间（用于双侧极限），或者以 $c$ 为端点的开区间（用于单侧极限，或 $c$ 为无穷时的极限）。在 $I \setminus \{c\}$ 上，假设实值函数 $f$ 和 $g$ 可导，且满足：$g'(x) \ne 0$同时还假设：
$$
\lim_{x \to c} \frac{f'(x)}{g'(x)} = L~
$$
其中 $L$ 可以是有限数，也可以是无穷。

如果满足以下任一条件：
$$
\lim_{x \to c} f(x) = \lim_{x \to c} g(x) = 0~
$$
或
$$
\lim_{x \to c} |f(x)| = \lim_{x \to c} |g(x)| = \infty ~
$$
那么：
$$
\lim_{x \to c} \frac{f(x)}{g(x)} = L~
$$
虽然上述表达中我们始终使用的是 $x \to c$，但这些极限也可以是单侧极限（例如 $x \to c^+$ 或 $x \to c^-$），当 $c$ 是区间 $I$ 的有限端点时尤为如此。

在第二种情况下，并不要求 $f$ 必须发散到无穷大；实际上，仅需满足：$\lim_{x \to c} |g(x)| = \infty$这一条件就已足够。文献中通常会出现关于 $g'(x) \ne 0$ 的假设，但有些作者通过加入其他可以推出 $g'(x) \ne 0$ 的条件，来绕过这一要求。例如，\(^\text{[4]}\)有人要求在定义极限
$$
\lim_{x \to c} \frac{f'(x)}{g'(x)} = L~
$$
时，函数 $\frac{f'(x)}{g'(x)}$ 必须在区间 $I \setminus \{c\}$ 上处处有定义。\(^\text{[c]}\)另一种方法是\(^\text{[5]}\)，要求 $f$ 和 $g$ 在包含 $c$ 的整个区间上都可导。
\subsection{条件的必要性：反例说明}
罗必达法则的四个条件都是不可或缺的：
\begin{enumerate}
\item 不定型的存在：
   $$
   \lim_{x \to c} f(x) = \lim_{x \to c} g(x) = 0 \quad \text{或} \quad \pm \infty~
   $$
\item 函数可导性：
   函数 $f(x)$ 和 $g(x)$ 在开区间 $\mathcal{I}$（除去可能的极限点 $c$）上可导；
\item 分母导数不为零：对于 $\mathcal{I}$ 中所有 $x \ne c$，有 $g'(x) \ne 0$；
\item 导数之比的极限存在：
   $$
   \lim_{x \to c} \frac{f'(x)}{g'(x)} \quad \text{存在}~
   $$
\end{enumerate}
如果上述任意一个条件不成立，罗必达法则一般就不适用，其结论在某些情况下可能是错误的。
\subsubsection{1. 形式不是不定式}
第一个条件（形式为不定式）的必要性可以通过以下反例说明：设函数$f(x) = x + 1$，$g(x) = 2x + 1$，并考虑极限 $x \to 1$。

该反例不满足第一个条件，因为
$$
\lim_{x \to 1} f(x) = \lim_{x \to 1} (x + 1) = 2 \neq 0~
$$
$$
\lim_{x \to 1} g(x) = \lim_{x \to 1} (2x + 1) = 3 \neq 0~
$$
这说明极限形式不是不定式。

函数 $f(x)$ 与 $g(x)$ **满足第二与第三个条件**，即在开区间内可导，且 $g'(x) \ne 0$。
它们也满足第四个条件，因为：
$$
\lim_{x \to 1} \frac{f'(x)}{g'(x)} = \lim_{x \to 1} \frac{(x + 1)'}{(2x + 1)'} =\lim_{x \to 1} \frac{1}{2} =\frac{1}{2}~
$$
然而，结论不成立，因为
$$
\lim_{x \to 1} \frac{f(x)}{g(x)} = \lim_{x \to 1} \frac{x + 1}{2x + 1} =\frac{\lim_{x \to 1}(x+1)}{\lim_{x \to 1}(2x+1)}= \frac{2}{3} \ne \frac{1}{2}~
$$
这说明如果极限形式不是不定式（即使其它条件都满足），罗必达法则的结论也不一定成立。
\subsubsection{2. 函数的可导性}
函数的可导性是罗必达法则的一个必要条件，因为如果函数在某点不可导，就无法保证该点的导数存在。而开区间 $\mathcal{I}$ 的前提是由柯西中值定理的假设决定的。值得注意的是，尽管函数可能在极限点 $c$ 不可导，罗必达法则仍然可能适用，这是因为它只要求函数在趋近于 $c$ 的过程中可导，而不要求函数在 $c$ 点本身可导。

例如，设
$$
f(x) = \begin{cases}
\sin x, & x \ne 0 \\
1, & x = 0
\end{cases}
,\quad g(x) = x,\quad c = 0~
$$
在这个例子中，函数 $f(x)$ 在 $x = 0$ 不可导，但它在 $x \ne 0$ 的所有点都可导，因此：$\lim_{x \to 0} \frac{f(x)}{g(x)} = \frac{0}{0}$，为不定式；
尽管 $f(x)$ 在 $x = 0$ 不可导，但 $\lim_{x \to 0} \frac{f'(x)}{g'(x)}$ 存在。

因此，罗必达法则仍然成立，即：
$$
\lim_{x \to 0} \frac{f(x)}{g(x)} = \lim_{x \to 0} \frac{f'(x)}{g'(x)}~
$$
这说明只要函数在趋近于 $c$ 的过程中可导（即在 $\mathcal{I} \setminus \{c\}$ 上可导），即便在 $c$ 点本身不可导，罗必达法则仍然适用。
